/*! For license information please see d164b40c5acea462.js.LICENSE.txt */
"use strict";!function(t,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?exports.creator=a():t.creator=a()}(self,(()=>(self.webpackChunk=self.webpackChunk||[]).push([[845],{2437:(t,a,i)=>{i.r(a),i.d(a,{default:()=>A});var e=i(5647),o=i(2492),s=i(5829),n=i(7912),r=i(7754),l=i(6301),c=i(3319);function h(t,a,i){var e;return(a="symbol"==typeof(e=function(t,a){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var e=i.call(t,"string");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(a))?e:e+"")in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i,t}const u=class{constructor({creator:t=null,callback:a=null}={}){h(this,"LOGOS_PER_PAGE",12),h(this,"div",null),h(this,"creator",null),h(this,"creators",[]),h(this,"$content",null),h(this,"$button",null),h(this,"$controls",null),h(this,"callback",null),h(this,"variations",null),h(this,"$variationList",null),h(this,"$setList",null),h(this,"isAddingVariations",!1),h(this,"$variationAll",null),h(this,"$variationFont",null),h(this,"$variationColor",null),h(this,"$variationLayout",null),this.creator=t,this.callback=a,this.$content=(0,o.A)(".js-variation-selector"),this.$variationList=(0,o.A)(".js-variation-selector__items"),this.$variationAll=(0,o.A)(".js-variation-selector-style-all"),this.$variationFont=(0,o.A)(".js-variation-selector-style-font"),this.$variationColor=(0,o.A)(".js-variation-selector-style-color"),this.$variationLayout=(0,o.A)(".js-variation-selector-style-layout"),this.$close=(0,o.A)(".js-variation-selector__close")}activate(){this.$variationAll.on("click",(()=>{e.A.closeMenu(),this.updateVariations("keep-icon")})),this.$variationFont.on("click",(()=>{e.A.closeMenu(),this.updateVariations("font")})),this.$variationColor.on("click",(()=>{e.A.closeMenu(),this.updateVariations("color")})),this.$variationLayout.on("click",(()=>{e.A.closeMenu(),this.updateVariations("layout")})),this.$close.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.deactivate(),this.hide()})),this.onUpdate()}deactivate(){[this.$variationAll,this.$variationLayout,this.$variationColor,this.$variationFont,this.$close].forEach((t=>{t&&t.off()}))}onUpdate(){}async show(){(0,o.A)(".js-variation-selector-content").addClass("active"),this.$content.addClass("active"),e.A.setNavigation(this.$content,this.$content.find(".js-modal-navigation")),await n.A.show(),this.creators.length?this.creators.forEach((t=>{t.onResize()})):await this.addVariations("keep-icon")}clear(){for(const t of this.creators)t.destroy();this.creators=[],this.$variationList.empty()}updateVariations(t=null){this.isAddingVariations||(this.clear(),this.addVariations(t))}async addVariations(t=null){this.$content.removeClass("interactive"),this.$close.addClass("disabled"),this.isAddingVariations=!0;const a=[];for(let i=0;i<this.LOGOS_PER_PAGE;i++){const e=(0,o.A)("<div>").addClass("b-logo-wrap").appendTo(this.$variationList),n=(0,o.A)("<div>").addClass("b-logo-card").attribute("id",`logo-${(0,r.A)()}`).html('\n<div class="b-logo-card__loading">\n\t<div class="b-logo-card__loading-icon"></div>\n</div>\n').appendTo(e),h=new s.A(n.attribute("id"),{useCanvas:!0});this.creators.push(h),n.on("click",(t=>{t.preventDefault(),t.stopPropagation(),this.activateVariation(h.logo.getState())}));const u=this.creator.logo.getState({texts:!0}),d={text:(0,c.A)(u?.state?.elements?.name?.text),sloganText:(0,c.A)(u?.state?.elements?.slogan?.text),symbolText:(0,c.A)(u?.state?.elements?.symbol?.text),variation:0===i?null:t,savedState:t||0===i?u:null};a.push((async()=>{await h.create(d),await l.A.wait()}))}for(const t of a)await t();this.isAddingVariations=!1,this.$content.addClass("interactive"),this.$close.removeClass("disabled")}async hide(){this.$content.removeClass("active"),await n.A.hide(),(0,o.A)(".js-variation-selector-content").removeClass("active"),e.A.unsetNavigation()}async activateVariation(t){this.deactivate(),await this.creator.recreate({state:t}),this.callback&&this.callback(t),await this.hide()}};var d=i(3851),v=i(2116),p=i(2274),f=i(1212);function g(t,a,i){var e;return(a="symbol"==typeof(e=function(t,a){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var e=i.call(t,"string");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(a))?e:e+"")in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i,t}const A=new class{constructor(){g(this,"inputManager",null),g(this,"creator",null),g(this,"translations",{}),o.A.ready((async()=>{const t=window.mybrandnewlogo,a=t.logo;this.translations=t.translations,await this.start({id:a.id,state:a.state});const i=p.A.$modal.length?p.A.$modal:(0,o.A)(".js-modal-register");a.purchaseIntent&&(i.length?i.hasEvent("open")&&i.trigger("open"):f.A.captureError("no modal to open"))}))}async start({id:t=null,state:a=null}={}){this.inputManager=new v.A(document.body),this.creator=new s.A("logo",{controls:".js-logo-controls",inputManager:this.inputManager,translations:this.translations,enableMockups:!0}),await this.creator.create({id:unescape(t),savedState:JSON.parse(unescape(a))}),p.A.setCreator(this.creator),this.inputManager.showMappings&&d.A.add(this,(()=>(this.inputManager.drawMappings(),!0))),this.creator.variations=new u({creator:this.creator,callback:t=>{}})}}}},t=>{var a=a=>t(t.s=a);return t.O(0,[298,481,526,631,721,274,883,664],(()=>(a(7065),a(2437)))),t.O()}])));