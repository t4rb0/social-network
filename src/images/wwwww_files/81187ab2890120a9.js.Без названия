(self.webpackChunk=self.webpackChunk||[]).push([[664],{5829:(t,e,s)=>{"use strict";s.d(e,{A:()=>js});var i=s(1722),a=s.n(i),n=s(6182),o=s(7754),r=s(2783),h=s(2498),l=s(675);function c(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const d=class{constructor({precision:t=r.t4.PRECISION,width:e=r.t4.CONTENT_WIDTH,height:s=r.t4.CONTENT_HEIGHT,useUUID:i=!0}={}){c(this,"NAMESPACE",{NS:"http://www.w3.org/2000/svg",XMLNS:"http://www.w3.org/2000/xmlns/",XLINK:"http://www.w3.org/1999/xlink"}),c(this,"ATTRIBUTE_OVERRIDES",{viewBox:"viewBox",preserveAspectRatio:"preserveAspectRatio",gradientUnits:"gradientUnits",gradientTransform:"gradientTransform",patternUnits:"patternUnits",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",maskUnits:"maskUnits"}),c(this,"svg",null),c(this,"precision",r.t4.PRECISION),c(this,"width",r.t4.CONTENT_WIDTH),c(this,"height",r.t4.CONTENT_HEIGHT),c(this,"background",null),c(this,"backgroundEffect",null),c(this,"backgroundMasks",[]),c(this,"useUUID",!0),c(this,"uuids",{}),c(this,"contentDimensions",[0,0,1,1]),c(this,"fixNumber",(0,l.Up)(r.t4.PRECISION)),c(this,"fixFloat",(0,l.Up)(r.t4.TRANSFORM_PRECISION)),this.precision=t,this.width=e,this.height=s,this.useUUID=i,this.svg=this.createElement("svg",{version:"1.1",preserveAspectRatio:"xMidYMid meet"}),this.svg.setAttribute("xmlns",this.NAMESPACE.NS),this.svg.setAttribute("xmlns:xlink",this.NAMESPACE.XLINK),this.setDimensions(this.width,this.height)}uuid(t="global"){return this.useUUID?(0,o.A)():(void 0===this.uuids[t]&&(this.uuids[t]=0),this.uuids[t]++,this.uuids[t])}createElement(t,e={}){throw new Error("please implement function")}convertAttribute(t){return this.ATTRIBUTE_OVERRIDES[t]?this.ATTRIBUTE_OVERRIDES[t]:(0,n.A)(t)}add(t,e={}){const s=this.createElement(t,e);return this.addChild(this.svg,s),s}setBackground(t){this.background=t}setBackgroundEffect(t){this.backgroundEffect=t}setBackgroundEffectPattern(t){this.backgroundEffectPattern=t}addChild(t,e){throw new Error("please implement function")}prependChild(t,e){throw new Error("please implement function")}removeChild(t,e){throw new Error("please implement function")}findTags(t){throw new Error("please implement function")}findID(t){throw new Error("please implement function")}addPath(t="",e={}){const s=this.createElement("path",Object.assign({d:t},e));return this.addChild(this.svg,s),s}addRect(t,e,s,i,a){const n=this.createElement("rect",Object.assign({x:t,y:e,width:s,height:i},a));return this.addChild(this.svg,n),n}clearDefs(){const t=this.findTags("defs")[0];t&&this.removeChild(this.svg,t)}getElementById(t){return this.findID(t)}getDefs(){let t=this.findTags("defs")[0];return t||(t=this.prependChild(this.svg,this.createElement("defs"))),t}addColor(t,{forceSingle:e=!1,aspectRatio:s=null}={}){return t instanceof String||"string"==typeof t?t:e||!t.active||0===t.range?t.original:void 0!==t.radius&&null!==t.radius?this.addRadialGradient(t,s):this.addLinearGradient(t,s)}addDefinition(t,e={}){const s=this.getDefs(),i=this.uuid("def");return this.setAttributes(t,{id:`def-${i}`,...e}),this.addChild(s,t),`#def-${i}`}addElementFromDefinition(t,e=null){const s=this.createElement("use");return s.setAttributeNS(this.NAMESPACE.XLINK,"xlink:href",t),null!==e&&this.setAttributes(s,e),this.addChild(this.svg,s),s}createElementFromDefinition(t,e=null){const s=this.createElement("use");return s.setAttributeNS(this.NAMESPACE.XLINK,"xlink:href",t),null!==e&&this.setAttributes(s,e),s}addLinearGradient(t){const e=this.getDefs(),s=this.uuid("gradient"),i=t.point1,a=t.point2,n=this.createElement("linearGradient",{id:`gradient-${s}`,gradientUnits:i?"userSpaceOnUse":"objectBoundingBox",x1:this.fixFloat(i?i.x:.5+.5*Math.cos(t.angle)),y1:this.fixFloat(i?i.y:.5+.5*Math.sin(t.angle)),x2:this.fixFloat(a?a.x:.5+.5*Math.cos(t.angle+Math.PI)),y2:this.fixFloat(a?a.y:.5+.5*Math.sin(t.angle+Math.PI))});return t.stops.forEach((t=>{const e=this.createElement("stop",{offset:this.fixFloat(t.offset),stopColor:t.color,stopOpacity:void 0===t.opacity?1:this.fixFloat(t.opacity)});this.addChild(n,e)})),this.addChild(e,n),`url(#gradient-${s})`}addRadialGradient(t,e=null){const s=this.getDefs(),i=this.uuid("gradient"),a=t.point1,n=t.point2;let o=null;null!==e&&(o=`translate(0.5, 0.5) ${e>1?`scale(1, ${this.fixFloat(Number(e))})`:`scale(${this.fixFloat(Number(1/e))}, 1)`} translate(-0.5, -0.5)`);const r=Math.sqrt(.5),h=this.createElement("radialGradient",{id:`gradient-${i}`,gradientUnits:a?"userSpaceOnUse":"objectBoundingBox",gradientTransform:a?null:o,cx:this.fixFloat(a?a.x:.5+Math.cos(t.angle)*t.radius*r),cy:this.fixFloat(a?a.y:.5+Math.sin(t.angle)*t.radius*r),r:this.fixFloat(n?Math.sqrt((n.x-a.x)**2+(n.y-a.y)**2):.5+t.radius*r)});return t.stops.forEach((t=>{const e=this.createElement("stop",{offset:this.fixFloat(t.offset),stopColor:t.color,stopOpacity:void 0===t.opacity?1:this.fixFloat(t.opacity)});this.addChild(h,e)})),this.addChild(s,h),`url(#gradient-${i})`}addClipPath(t){const e=this.getDefs(),s=this.uuid("clip"),i=this.createElement("clipPath",{id:`clip-${s}`}),a=this.createElement("path",{d:t});return this.addChild(i,a),this.addChild(e,i),`url(#clip-${s})`}addBackgroundMask(){const t=this.getDefs(),e=this.uuid("mask"),s=this.createElement("mask",{id:`mask-${e}`}),i=this.createElement("rect",{x:this.viewBox[0],y:this.viewBox[1],width:this.viewBox[2],height:this.viewBox[3],fill:"#fff"});return this.backgroundMasks.push(i),this.addChild(s,i),this.addChild(t,s),`url(#mask-${e})`}addMask({fill:t="#fff",fillBox:e=new h.A(0,0,r.t4.CONTENT_WIDTH,r.t4.CONTENT_HEIGHT),elements:s=[]}={}){const i=this.getDefs(),a=this.uuid("mask"),n=e.clone().pad("-5%"),o=this.createElement("mask",{id:`mask-${a}`,x:this.fixNumber(n.x),y:this.fixNumber(n.y),width:this.fixNumber(n.w),height:this.fixNumber(n.h),maskUnits:"userSpaceOnUse",strokeWidth:0}),l=this.createElement("rect",{x:this.fixNumber(e.x),y:this.fixNumber(e.y),width:this.fixNumber(e.w),height:this.fixNumber(e.h),fill:t});return this.addChild(o,l),s.forEach((t=>{this.addChild(o,t)})),this.addChild(i,o),`url(#mask-${a})`}addClip(t,e,s,i,a=this.uuid("clip")){const n=this.getDefs(),o=this.createElement("clipPath",{id:`clip-${a}`}),r=this.createElement("path",{d:`M${t},${e} L${t+s},${e} L${t+s},${e+i} L${t},${e+i} Z`});return this.addChild(o,r),this.addChild(n,o),`url(#clip-${a})`}setAttributes(t,e){throw new Error("please implement function")}getPathDescriptionFromShape(t){return t.getPathData({precision:this.precision})}empty(){this.background=null,this.backgroundEffect=null,this.backgroundEffectPattern=null,this.backgroundMasks.length=0}setDimensions(t,e){const s=r.t4.CONTENT_WIDTH,i=r.t4.CONTENT_HEIGHT;let a;a=t>e?[-(s*t/e-s)/2,0,s*t/e,i]:[0,-(i*e/t-i)/2,s,i*e/t],this.viewBox=a.map((t=>this.fixNumber(t))),this.setAttributes(this.svg,{viewBox:this.viewBox.join(" ")})}setContentDimensions(t){this.contentDimensions=[(t.x||0)/this.width,(t.y||0)/this.height,(t.w||0)/this.width,(t.h||0)/this.height]}getContentDimensions(){return this.contentDimensions}getTextWithPlaceholders(){let t={viewBox:this.getAttribute(this.svg,"viewBox")},e=null;if(this.setAttributes(this.svg,{viewBox:"{{VIEWBOX_X}} {{VIEWBOX_Y}} {{VIEWBOX_WIDTH}} {{VIEWBOX_HEIGHT}}",width:"{{WIDTH}}",height:"{{HEIGHT}}"}),this.backgroundMasks.forEach(((e,s)=>{t=Object.assign({[`mask${s}`]:{x:this.getAttribute(e,"x"),y:this.getAttribute(e,"y"),width:this.getAttribute(e,"width"),height:this.getAttribute(e,"height")}},t),this.setAttributes(e,{x:"{{BACKGROUND_X}}",y:"{{BACKGROUND_Y}}",width:"{{BACKGROUND_WIDTH}}",height:"{{BACKGROUND_HEIGHT}}"})})),this.backgroundEffect){t=Object.assign({backgroundEffect:{transform:this.getAttribute(this.backgroundEffect,"transform")}},t);const e=this.fixFloat(r.t4.CONTENT_WIDTH/2),s=this.fixFloat(r.t4.CONTENT_HEIGHT/2);this.setAttributes(this.backgroundEffect,{transform:`translate(${e}, ${s}) scale({{BACKGROUND_EFFECT_SCALE}}) translate(${-e}, ${-s})`})}if(this.backgroundEffectPattern&&(t=Object.assign({backgroundEffectPattern:{patternTransform:this.getAttribute(this.backgroundEffectPattern,"patternTransform")}},t),this.setAttributes(this.backgroundEffectPattern,{patternTransform:t.backgroundEffectPattern.patternTransform.replace(/scale\(.+?\)/i,"scale({{BACKGROUND_PATTERN_SCALE}})")})),this.background){t=Object.assign({background:{x:this.getAttribute(this.background,"x"),y:this.getAttribute(this.background,"y"),width:this.getAttribute(this.background,"width"),height:this.getAttribute(this.background,"height")}},t),this.setAttributes(this.background,{x:"{{BACKGROUND_X}}",y:"{{BACKGROUND_Y}}",width:"{{BACKGROUND_WIDTH}}",height:"{{BACKGROUND_HEIGHT}}"});const s=/^url\(#(.+?)\)$/.exec(this.getAttribute(this.background,"fill"));if(s&&s[1]){e=this.findID(s[1]);const i=this.getAttribute(e,"gradientTransform");t.gradientTransform=i,i&&this.setAttributes(e,{gradientTransform:i.replace(/scale\(.+?\)/i,"scale({{ASPECT_RATIO}})")})}}const s=this.getText();return this.setAttributes(this.svg,{viewBox:t.viewBox}),this.backgroundMasks.forEach(((e,s)=>{const i=t[`mask${s}`];this.setAttributes(e,{x:i.x,y:i.y,width:i.width,height:i.height})})),this.backgroundEffect&&this.setAttributes(this.backgroundEffect,{transform:t.backgroundEffect.transform}),this.backgroundEffectPattern&&this.setAttributes(this.backgroundEffectPattern,{transform:t.backgroundEffectPattern.patternTransform}),this.background&&this.setAttributes(this.background,{x:t.background.x,y:t.background.y,width:t.background.width,height:t.background.height}),e&&this.setAttributes(e,{gradientTransform:t.gradientTransform}),s}},u=class extends d{createElement(t,e={}){const s=document.createElementNS(this.NAMESPACE.NS,t);return this.setAttributes(s,e),s}createTextElement(t=""){return document.createTextNode(t)}addChild(t,e){return t.appendChild(e)}prependChild(t,e){return t.insertBefore(e,t.firstChild)}removeChild(t,e){return t.removeChild(e)}findTags(t){return this.svg.querySelectorAll(t)}findID(t){return this.svg.querySelectorAll(`#${t}`)}setAttributes(t,e){Object.keys(e).forEach((s=>{const i=e[s];if(null!==i)if(s.includes(":")){const e=this.convertAttribute(s.replace(/^.*?:/,""));/^xlink/.test(s)&&t.setAttributeNS(this.NAMESPACE.XLINK,e,String(i))}else t.setAttribute(this.convertAttribute(s),String(i))}))}getAttribute(t,e){return t.getAttributeNS(null,this.convertAttribute(String(e)))}empty(){super.empty(),this.svg.innerHTML=""}getText(){return this.svg.outerHTML}};function p(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class m{constructor(t=null){p(this,"indent","\t"),this.name=t,this.attributes={},this.children=[]}empty(){this.children.length=0}setAttribute(t,e){this.attributes[t]=e}setAttributeNS(t,e,s){this.attributes[e]=s}get hasChildren(){return this.children&&this.children.length}get firstChild(){return this.children[0]}getText(t=0){const e=this.name,s=Object.keys(this.attributes).reduce(((t,e)=>("id"!==e&&t.push(`${e}="${this.attributes[e]}"`),t)),[]);this.attributes.id&&s.unshift(`id="${this.attributes.id}"`);const i=s.length?` ${s.join(" ")}`:"",a=this.children.reduce(((e,s)=>`${e}${s.getText(t+1)}`),"");return a?`${this.indent.repeat(t)}<${e}${i}>\n${a}${this.indent.repeat(t)}</${e}>\n`:`${this.indent.repeat(t)}<${e}${i}></${e}>\n`}}class g extends m{constructor(t=""){super("text"),p(this,"textContent",null),this.textContent=t}getText(t=0){return`${this.indent.repeat(t)}${this.textContent}\n`}}const f=class extends d{constructor(t={}){if(super(Object.assign({svg:null},t)),t.svg&&(this.copyFromDom(t.svg.svg,this.svg,this),t.svg.background)){const e=t.svg.getAttribute(t.svg.background,"id");this.background=this.findID(e)}}copyFromDom(t,e,s){[...t.childNodes].forEach((t=>{if(t.nodeType===Node.ELEMENT_NODE){const i={};for(const e of t.attributes)i[e.name]=e.value;const a=s.createElement(t.nodeName,i);s.addChild(e,a),this.copyFromDom(t,a,s)}}))}createElement(t,e={}){const s=new m(t);return this.setAttributes(s,e),s}createTextElement(t=""){return new g(t)}addChild(t,e){return t.children.push(e),e}prependChild(t,e){return t.children.unshift(e),e}removeChild(t,e){const s=t.children.indexOf(e);return-1!==s&&(t.children=t.children.splice(s,1)),e}filterAll(t){const e=[],s=i=>{t(i)&&e.push(i),i.hasChildren&&i.children.filter(s)};return this.svg.children.filter(s),e}findTags(t){return this.filterAll((e=>e.name===t))}findID(t){return this.filterAll((e=>e.attributes.id===t))[0]}setAttributes(t,e){Object.keys(e).forEach((s=>{const i=e[s];null!==i&&(t.attributes[this.convertAttribute(s)]=String(i))}))}getAttribute(t,e){return t.attributes[this.convertAttribute(String(e))]}empty(){super.empty(),this.svg.empty()}getText(){return this.svg.getText()}};function y(t,e,s){if(!t)return!0;const i="string"==typeof e?e:e[s],a=`${t.toLowerCase()}${t.toUpperCase()}`.split("").sort().map((t=>t.codePointAt(0)));let n=0;const o=[];function r(){for(o.length=0;n<i.length;){let t=i.codePointAt(n);if(92===t&&n<i.length-1&&44===i.codePointAt(n+1)&&n<i.length-2&&44===i.codePointAt(n+2))n+=2,t=44;else{if(44===t)return n++,o;if(n===i.length-1)return o.push(t),n++,o.length?o:null}o.push(t),n++}return null}function h(t,e){return!!e&&(1===e.length?t===e[0]:2===e.length?t>=e[0]&&t<=e[1]:e.length>2&&e.includes(t))}let l=r();for(let t=0;t<a.length;t++){const e=a[t];if(!h(e,l)){for(;!h(e,l)&&n<i.length;)l=r();if(null===l)break;if(!h(e,l)){l=null;break}}}return null!==l}var v=s(1930),b=s(5796),x=s(3517),w=s(6324),S=s(8711),A=s(6404);function k(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const B=class{constructor(t){k(this,"name","draw error"),k(this,"message",null),k(this,"stack",null),this.message=t}};var C=s(721),M=s(832),T=s(928),E=s(3696),I=s(6419);const N=class extends v.A{constructor(t){var e,s,i,a;super(Object.assign({active:(new M.A).enableInteraction(),strength:(new T.A).set(.3).enableInteraction(),style:new E.A([0,1,2,3]).randomizeBetweenOptions([0,1]).enableInteraction().setOrder(2).setLabel("style",["light","dark","white","black"])},t)),e=this,i=null,(s="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s="group"))?a:a+"")in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i}getHex(t,e=null,s=0){const i=this.getColor(t.color),a=I.A.hex2hcl(i),n=this.getAlpha(),o=null===e?1-n+n*this.state.strength.value:e;switch(a[0]=t.saturation.value?a[0]:360*t.hue.value,this.state.style.value){case 0:return I.A.hcl2hex(...I.A.hcl2derivative(a,[60,-30,30+s],-o));case 1:return I.A.hcl2hex(...I.A.hcl2derivative(a,[30,30,15+s],o));case 2:return"#fff";default:return"#000"}}getAlpha(){return this.state.strength.value}getGroup(t,{parent:e=null,shape:s=null,strokeWidth:i=null,strokeLinejoin:a=null,strokeLinecap:n=null,strokeMiterlimit:o=null,useMask:r=!0}={}){return this.group=r?t.createElement("g",{mask:t.addMask({fill:"#000",elements:[t.createElement("path",{d:t.getPathDescriptionFromShape(s),stroke:"#fff",strokeWidth:i,strokeLinecap:n,strokeLinejoin:a,strokeMiterlimit:o,fill:"#fff"})]})}):t.createElement("g"),t.addChild(e,this.group),this.group}getColor(t){return t instanceof String||"string"==typeof t?t:t.original}},P=class extends b.A{constructor(t=[]){super(),this.value=t}clone(){const t=new this.constructor(this.value);return super.cloneVariables(t),t}set(t=null){return null===t||(this.value=t),this}clear(){this.value.length=0}add(t){this.value.push(t)}get(t){return this.value[t]}},O=class extends b.A{constructor(t){super(),this.callback=t}clone(){const t=new this.constructor(this.value);return super.cloneVariables(t),t}randomize(){this.callback()}};var $=s(7301);function L(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const D=(0,l.Lr)(3),j=class extends N{constructor(t){const e=200;let s=0;super(Object.assign({circleX:new P,circleY:new P,circleR:new P(Array(e).fill(0).map((()=>D(s++/e)))),circleGradient:new P((0,$.A)(Array(e).fill(0).map(((t,e)=>e%5)))),detail:new T.A(0,1).randomizeBetweenOptions([.05,.35,.65]).enableInteraction().setOrder(0).setLabel("detail"),variation:new T.A(0,1).randomizeBetweenOptions([.15,.35,.65]).enableInteraction().setOrder(3).setLabel("variation"),random:new O((()=>{this.initRandomValues()})).enableInteraction().setOrder(4).setLabel("randomize")},t)),L(this,"numCircles",null),L(this,"numGradients",null),this.numCircles=e,this.numGradients=5,this.state.saved||(this.initRandomValues(),this.state.style.set(0))}initRandomValues(){let t=0;this.state.circleX.set(Array(this.numCircles).fill(0).map((()=>D(Math.random())))),this.state.circleY.set(Array(this.numCircles).fill(0).map((()=>D(Math.random())))),this.state.circleR.set(Array(this.numCircles).fill(0).map((()=>D(t++/this.numCircles)))),this.state.circleGradient.set((0,$.A)(Array(this.numCircles).fill(0).map(((t,e)=>e%this.numGradients))))}draw(t,e){const{x:s,y:i,width:a,height:n,originalColor:o}=e;if(!this.state.active.value||!this.state.strength.value)return;this.numCircles>this.state.circleR.value.length&&this.initRandomValues();const h=this.getGroup(t,e),l=[];for(let e=0;e<this.numGradients;e++){const s=this.getHex(o,(e+1)/this.numGradients,15),i=e/(this.numGradients-1),a=[{color:s,offset:i},{offset:1,color:s,opacity:1===i?1:0}];0!==i&&a.unshift({color:s,offset:0}),l.push(t.addRadialGradient({angle:0,radius:0,stops:a},1))}const c=this.state.detail.value,d=(a*n)**.5*.65,u=Math.floor((this.numCircles-this.numGradients)*(1-c)),p=this.state.variation.value,m=[];for(let t=u;t<this.numCircles;t++){const e={cx:s+this.state.circleX.value[t]*a,cy:i+this.state.circleY.value[t]*n,r:Math.max(r.t4.MIN_PATTERN_WIDTH/4,this.state.circleR.value[t]**(16*p)*d*(.75*p+(1-c)**2*.25)),gradientIndex:t>this.numCircles-this.numGradients?t-this.numCircles+this.numGradients:this.state.circleGradient.value[t],opacity:(1-.5*this.state.circleR.value[t])*this.state.strength.value};m.push(e)}m.sort(((t,e)=>t.gradientIndex-e.gradientIndex)).forEach((e=>t.addChild(h,t.createElement("circle",{cx:t.fixNumber(e.cx),cy:t.fixNumber(e.cy),r:t.fixNumber(e.r),fill:l[e.gradientIndex],fillOpacity:t.fixNumber(e.opacity)}))))}};var z=s(6455),F=s(2292);function R(t){if(!t)return null;const e={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},s=[];return t.replace(r.t4.PATH_COMMANDS,((t,i,a)=>{const n=[];let o=i.toLowerCase(),h=i;if(a.replace(r.t4.PATH_VALUES,((t,e)=>{e&&n.push(Number(e))})),"m"===o&&n.length>2&&(s.push([h].concat(n.splice(0,2))),o="l",h="m"===h?"l":"L"),"r"===o)s.push([h].concat(n));else for(;n.length>=e[o]&&(s.push([h].concat(n.splice(0,e[o]))),e[o]););})),s}function _(t,e){const s=[];for(let i=0,a=t.length;a-2*!e>i;i+=2){const n=[{x:Number(t[i-2]),y:Number(t[i-1])},{x:Number(t[i]),y:Number(t[i+1])},{x:Number(t[i+2]),y:Number(t[i+3])},{x:Number(t[i+4]),y:Number(t[i+5])}];e?i?a-4===i?n[3]={x:Number(t[0]),y:Number(t[1])}:a-2===i&&(n[2]={x:Number(t[0]),y:Number(t[1])},n[3]={x:Number(t[2]),y:Number(t[3])}):n[0]={x:Number(t[a-2]),y:Number(t[a-1])}:a-4===i?n[3]=n[2]:i||(n[0]={x:Number(t[i]),y:Number(t[i+1])}),s.push(["C",(-n[0].x+6*n[1].x+n[2].x)/6,(-n[0].y+6*n[1].y+n[2].y)/6,(n[1].x+6*n[2].x-n[3].x)/6,(n[1].y+6*n[2].y-n[3].y)/6,n[2].x,n[2].y])}return s}const G=Math.PI;function W(t){const e=function(t){let e=t;e&&e.length||(e=[["M",0,0]]);let s=[],i=0,a=0,n=0,o=0,r=0;"M"===e[0][0]&&(i=Number(e[0][1]),a=Number(e[0][2]),n=i,o=a,r++,s[0]=["M",i,a]);const h=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase();let l,c,d;for(let t=r;t<e.length;t++){l=[],s.push(l),c=e[t];const r=c[0].toUpperCase();if(c[0]!==r)switch(l[0]=r,r){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=Number(c[6]+i),l[7]=Number(c[7]+a);break;case"V":l[1]=Number(c[1])+a;break;case"H":l[1]=Number(c[1])+i;break;case"R":d=[i,a].concat(c.slice(1));for(let t=2,e=d.length;t<e;t++)d[t]=Number(d[t])+i,d[++t]=Number(d[t])+a;s.pop(),s=s.concat(_(d,h));break;case"M":n=Number(c[1])+i,o=Number(c[2])+a;default:for(let t=1;t<c.length;t++)l[t]=Number(c[t])+(t%2?i:a)}else if("R"===c[0])d=[i,a].concat(c.slice(1)),s.pop(),s=s.concat(_(d,h)),l=["R"].concat(c.slice(-2));else for(let t=0;t<c.length;t++)l[t]=c[t];switch(l[0]){case"Z":i=n,a=o;break;case"H":i=l[1];break;case"V":a=l[1];break;case"M":n=l[l.length-2],o=l[l.length-1];default:i=l[l.length-2],a=l[l.length-1]}}return s}(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i=[];let a="",n="";const o=(t,e,s)=>{let i,a,n=t;if(!n)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(n[0]in{T:1,Q:1}||(e.qx=e.qy=null),n[0]){case"M":e.X=n[1],e.Y=n[2];break;case"A":n=["C"].concat(V.apply(0,[e.x,e.y].concat(n.slice(1))));break;case"S":"C"===s||"S"===s?(i=2*e.x-e.bx,a=2*e.y-e.by):(i=e.x,a=e.y),n=["C",i,a].concat(n.slice(1));break;case"T":"Q"===s||"T"===s?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),n=["C"].concat(H(e.x,e.y,e.qx,e.qy,n[1],n[2]));break;case"Q":e.qx=n[1],e.qy=n[2],n=["C"].concat(H(e.x,e.y,n[1],n[2],n[3],n[4]));break;case"L":n=["C"].concat(U(e.x,e.y,n[1],n[2]));break;case"H":n=["C"].concat(U(e.x,e.y,n[1],e.y));break;case"V":n=["C"].concat(U(e.x,e.y,e.x,n[1]));break;case"Z":n=["C"].concat(U(e.x,e.y,e.X,e.Y))}return n},r=(t,e)=>{let s=e;if(t[s].length>7){t[s].shift();const e=t[s];for(;e.length;)i[s]="A",t.splice(s++,0,["C"].concat(e.splice(0,6)));t.splice(s,1)}},h=(t,e,s)=>{t&&"M"===t[s][0]&&(e.bx=0,e.by=0,e.x=t[s][1],e.y=t[s][2])};for(let t=0;t<e.length;t++){e[t]&&(a=e[t][0]),"C"!==a&&(i[t]=a,t&&(n=i[t-1])),e[t]=o(e[t],s,n),"A"!==i[t]&&"C"===a&&(i[t]="C"),r(e,t),h(e,s,t);const l=e[t],c=l.length;s.x=l[c-2],s.y=l[c-1],s.bx=parseFloat(l[c-4])||s.x,s.by=parseFloat(l[c-3])||s.y}return e}function U(t,e,s,i){return[t,e,s,i,s,i]}function H(t,e,s,i,a,n){const o=1/3,r=2/3;return[o*t+r*s,o*e+r*i,o*a+r*s,o*n+r*i,a,n]}function V(t,e,s,i,a=0,n,o,r,h,l){const c=120*G/180,d=G/180*Number(a);let u,p,m,g,f,y=[],v=t,b=e,x=s,w=i,S=r,A=h;const k=(t,e,s)=>({x:t*Math.cos(s)-e*Math.sin(s),y:t*Math.sin(s)+e*Math.cos(s)});if(l)p=l[0],m=l[1],g=l[2],f=l[3];else{u=k(v,b,-d),v=u.x,b=u.y,u=k(S,A,-d),S=u.x,A=u.y;const t=(v-S)/2,e=(b-A)/2;let s=t*t/(x*x)+e*e/(w*w);s>1&&(s=Math.sqrt(s),x*=s,w*=s);const i=x*x,a=w*w,r=(n===o?-1:1)*Math.sqrt(Math.abs((i*a-i*e*e-a*t*t)/(i*e*e+a*t*t)));g=r*x*e/w+(v+S)/2,f=r*-w*t/x+(b+A)/2,p=Math.asin(((b-f)/w).toFixed(9)),m=Math.asin(((A-f)/w).toFixed(9)),p=v<g?G-p:p,m=S<g?G-m:m,p<0&&(p=2*G+p),m<0&&(m=2*G+m),o&&p>m&&(p-=2*G),!o&&m>p&&(m-=2*G)}let B=m-p;if(Math.abs(B)>c){const t=m,e=S,s=A;m=p+c*(o&&m>p?1:-1),S=g+x*Math.cos(m),A=f+w*Math.sin(m),y=V(S,A,x,w,a,0,o,e,s,[m,t,g,f])}B=m-p;const C=Math.cos(p),M=Math.sin(p),T=Math.cos(m),E=Math.sin(m),I=Math.tan(B/4),N=4/3*x*I,P=4/3*w*I,O=[v,b],$=[v+N*M,b-P*C],L=[S+N*E,A-P*T],D=[S,A];if($[0]=2*O[0]-$[0],$[1]=2*O[1]-$[1],l)return[$,L,D].concat(y);y=[$,L,D].concat(y).join().split(",");const j=[];for(let t=0,e=y.length;t<e;t++)j[t]=t%2?k(y[t-1],y[t],d).y:k(y[t],y[t+1],d).x;return j}function q(t){if(!t)return new h.A;const e=W(t);let s,i=0,a=0,n=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=Number.MAX_VALUE,l=-Number.MAX_VALUE;for(let t=0;t<e.length;t++)if(s=e[t],"M"===s[0])i=s[1],a=s[2],n=Math.min(i,n),r=Math.min(a,r),o=Math.max(i,o),l=Math.max(a,l);else{if(i<n||a<r||s[1]<n||s[2]<r||s[3]<n||s[4]<r||s[5]<n||s[6]<r||i>o||a>l||s[1]>o||s[2]>l||s[3]>o||s[4]>l||s[5]>o||s[6]>l)if(s[1]<i!=s[1]<s[5]&&s[3]<i!=s[3]<s[5]&&s[2]<a!=s[2]<s[6]&&s[4]<a!=s[4]<s[6])n=Math.min(i,s[5],n),r=Math.min(a,s[6],r),o=Math.max(i,s[5],o),l=Math.max(a,s[6],l);else{const t=K(i,a,s[1],s[2],s[3],s[4],s[5],s[6]);n=Math.min(t.min.x,n),r=Math.min(t.min.y,r),o=Math.max(t.max.x,o),l=Math.max(t.max.y,l)}i=s[5],a=s[6]}return new h.A(n,r,o-n,l-r)}function X(t,e,s,i,a,n,o,r,h){const l=1-h;return{x:l**3*t+l**2*3*h*s+3*l*h*h*a+h**3*o,y:l**3*e+l**2*3*h*i+3*l*h*h*n+h**3*r}}function K(t,e,s,i,a,n,o,r){let h,l=a-2*s+t-(o-2*a+s),c=2*(s-t)-2*(a-s),d=t-s,u=(-c+Math.sqrt(c*c-4*l*d))/2/l,p=(-c-Math.sqrt(c*c-4*l*d))/2/l;const m=[e,r],g=[t,o];return Math.abs(u)>"1e12"&&(u=.5),Math.abs(p)>"1e12"&&(p=.5),u>0&&u<1&&(h=X(t,e,s,i,a,n,o,r,u),g.push(h.x),m.push(h.y)),p>0&&p<1&&(h=X(t,e,s,i,a,n,o,r,p),g.push(h.x),m.push(h.y)),l=n-2*i+e-(r-2*n+i),c=2*(i-e)-2*(n-i),d=e-i,u=(-c+Math.sqrt(c*c-4*l*d))/2/l,p=(-c-Math.sqrt(c*c-4*l*d))/2/l,Math.abs(u)>"1e12"&&(u=.5),Math.abs(p)>"1e12"&&(p=.5),u>0&&u<1&&(h=X(t,e,s,i,a,n,o,r,u),g.push(h.x),m.push(h.y)),p>0&&p<1&&(h=X(t,e,s,i,a,n,o,r,p),g.push(h.x),m.push(h.y)),{min:{x:Math.min(...g),y:Math.min(...m)},max:{x:Math.max(...g),y:Math.max(...m)}}}var Z=s(9851);function Y(t){const e=[];let s=[];return t.forEach((t=>{s.push(t),/z/i.test(t[0])&&(e.push(s.slice()),s=[])})),s.length&&e.push(s),e}const Q=class{constructor(t=[1,0,0,1,0,0]){this.array=new Float32Array(t)}apply(t,e=new Z.A){return e.x=this.array[0]*t.x+this.array[2]*t.y+this.array[4],e.y=this.array[1]*t.x+this.array[3]*t.y+this.array[5],e}applyScale(t,e=new Z.A){return e.x=this.array[0]*t.x+this.array[2]*t.y,e.y=this.array[1]*t.x+this.array[3]*t.y,e}applyScaleX(t){return this.array[0]*t}translate(t,e){return this.array[4]+=this.array[0]*t+this.array[2]*e,this.array[5]+=this.array[1]*t+this.array[3]*e,this}scale(t,e=null){const s=null===e?t:e;return this.array[0]*=t,this.array[1]*=t,this.array[2]*=s,this.array[3]*=s,this}rotate(t){const e=Math.sin(t),s=Math.cos(t),i=this.array[0],a=this.array[1],n=this.array[2],o=this.array[3];return this.array[0]=i*s+n*e,this.array[1]=a*s+o*e,this.array[2]=i*-e+n*s,this.array[3]=a*-e+o*s,this}identity(){return this.array[0]=1,this.array[1]=0,this.array[2]=0,this.array[3]=1,this.array[4]=0,this.array[5]=0,this}multiply(t){const e=t.array,s=this.array[0],i=this.array[1],a=this.array[2],n=this.array[3],o=this.array[4],r=this.array[5],h=e[0],l=e[1],c=e[2],d=e[3],u=e[4],p=e[5];return this.array[0]=s*h+a*l,this.array[1]=i*h+n*l,this.array[2]=s*c+a*d,this.array[3]=i*c+n*d,this.array[4]=s*u+a*p+o,this.array[5]=i*u+n*p+r,this}clone(){return new this.constructor(this.array)}copy(t){const e=t.array;return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this.array[3]=e[3],this.array[4]=e[4],this.array[5]=e[5],this}equals(t){return Boolean(t)&&[...this.array].every(((e,s)=>e===t.array[s]))}toString(){return`MAT2D: ${this.array.map((t=>t.toFixed(3))).join(", ")}`}},J=class{static applyRoundedCorners(t,e){const s=t.length,i=[];for(let a=0;a<s;a++){const n=t[(a-1+s)%s],o=t[a%s],r=t[(a+1)%s];i.push(this.getRoundedSegment(o,n,r,e))}return i[0]=i[0].replace(/^L/,"M"),i.push("z"),i.join(" ")}static getMaximumRadiusForAllPoints(t){let e=Number.MAX_VALUE;const s=t.length;for(let i=0;i<s;i++){const a=t[(i-1+s)%s],n=t[i%s],o=t[(i+1)%s],r=n.x-a.x,h=n.y-a.y,l=n.x-o.x,c=n.y-o.y,d=(Math.atan2(h,r)-Math.atan2(c,l))/2,u=Math.abs(Math.tan(d));let p=e/u;const m=this.getLength(r,h),g=this.getLength(l,c),f=Math.min(m,g)/2;p>f&&(p=f,e=Math.min(e,f*u))}return e}static getRoundedSegment(t,e,s,i){let a=i;const n=t.x-e.x,o=t.y-e.y,r=t.x-s.x,h=t.y-s.y,l=(Math.atan2(o,n)-Math.atan2(h,r))/2,c=Math.abs(Math.tan(l));let d=a/c;const u=this.getLength(n,o),p=this.getLength(r,h),m=Math.min(u,p)/2;d>m&&(d=m,a=m*c);const g=this.getProportionalPoint(t,d,u,n,o),f=this.getProportionalPoint(t,d,p,r,h),y=2*t.x-g.x-f.x,v=2*t.y-g.y-f.y,b=this.getLength(y,v),x=this.getLength(d,a),w=this.getProportionalPoint(t,x,b,y,v);let S=Math.atan2(g.y-w.y,g.x-w.x);const A=Math.atan2(f.y-w.y,f.x-w.x);let k=A-S;k<0&&(S=A,k=-k),k>Math.PI&&(k=Math.PI-k);const B=this.isConvex(e,t,s);return[`L${g.x},${g.y}`,`A${a},${a} 0 0 ${B?1:0} ${f.x} ${f.y}`,`L${f.x},${f.y}`].join(" ")}static getLength(t,e){return Math.sqrt(t*t+e*e)}static getProportionalPoint(t,e,s,i,a){const n=e/s;return new Z.A(t.x-i*n,t.y-a*n)}static isConvex(t,e,s){return t.x*(s.y-e.y)+e.x*(t.y-s.y)+s.x*(e.y-t.y)<0}};function tt(t,e,s){const i=/[ml]/i;let a=t.length;const n=/z/i.test(t[t.length-1][0]);n&&(a-=1);for(let n=0;n<a;n++){const o=t[(n-1+a)%a],r=t[n%a],h=t[(n+1)%a],l=r[0],c=h[0];if(i.test(l)&&i.test(c)){const s=new Z.A(o[o.length-2],o[o.length-1]),i=new Z.A(r[1],r[2]),a=new Z.A(h[1],h[2]);e(t[n],i,s,a,n)}else s&&s(t[n])}n&&s&&s(["Z"])}function et(t,e,s){return t.x*(s.y-e.y)+e.x*(t.y-s.y)+s.x*(e.y-t.y)<0}function st(t,e=null){const s=[],i=new Z.A,a=new Z.A,n=new Z.A;for(let o=0;o<e.length;o++){const r=e[o],h=r.length;if(/h/i.test(r[0]))t.apply(a.set(r[1],i.y),n),s[o]=["L",n.x,n.y];else if(/v/i.test(r[0]))t.apply(a.set(i.x,r[1]),n),s[o]=["L",n.x,n.y];else if(/a/i.test(r[0]))s[o]=e[o].slice(),t.applyScale(a.set(r[1],r[2]),n),s[o][1]=n.x,s[o][2]=n.y,t.apply(a.set(r[6],r[7]),n),s[o][6]=n.x,s[o][7]=n.y;else if(h>2){s[o]=[e[o][0]];for(let e=1;e<h;e+=2)t.apply(a.set(r[e],r[e+1]),n),s[o][e]=n.x,s[o][e+1]=n.y}else s[o]=[...e[o]];h>2&&i.copy(n)}return s}function it(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const at=class{constructor(t){it(this,"isSame",!1),it(this,"data",[]),it(this,"worldData",[]),t instanceof Array?this.data=t:("string"==typeof t||t instanceof String)&&(this.data=R(t))}clone(){return new this.constructor(this.cloneData())}cloneData(){const t=[];return this.data.forEach((e=>{e instanceof Array&&t.push(e.slice())})),t}getDistance(t,e,s,i){return((i-e)**2+(s-t)**2)**.5}cleanData(t){const e=[];let s=[],i=0,a=0,n=0,o=0,r=0,h=null;for(;n<t.length;){switch(h=t[n],h[0].toUpperCase()){case"C":if(o=this.getDistance(i,a,h[1],h[2]),r=this.getDistance(h[3],h[4],h[5],h[6]),(o<5||r<5)&&Math.abs(o-r)<.5){if(e.push(["L",h[5],h[6]]),i=h[5],a=h[6],n<t.length-1&&"S"===t[n+1][0])for(n++;n<t.length&&(h=t[n],"S"===h[0]);)e.push(["L",h[3],h[4]]),i=h[3],a=h[4],n++}else s=h.slice(),e.push(s),i=h[5],a=h[6];break;case"H":e.push(h),i=h[1];break;case"V":e.push(h),a=h[1];break;case"Z":e.push(h);break;default:e.push(h),i=h[h.length-2],a=h[h.length-1]}n++}return e}toSVG(t,e=r.t4.PRECISION,s=!1){const i=t.map((t=>{if("A"===t[0].toUpperCase()){const s=[1,2,6,7],i=t.map(((t,i)=>-1===s.indexOf(i)?t:(0,l.ey)(t,e)));return`${i[0]}${i[1]},${i[2]} ${i[3]} ${i[4]} ${i[5]} ${i[6]},${i[7]}`}return`${t[0]}${t.slice(1).map((t=>(0,l.ey)(t,e))).join(",")}`})).join(" ");return s?`<path d="${i}" />`:i}getData(t){return this.toSVG(this.data,t)}toDataString(t,e){return this.worldData=st(t,this.data),this.toSVG(this.worldData,e)}isCompletelyConvex(){return function(t){let e=!1;return tt(t,((t,s,i,a)=>{e=e&&et(i,s,a)})),e}(this.data)}rotate(t){return this.data=st((new Q).rotate(t),this.data),this}translate(t=0,e=0){return this.data=st((new Q).translate(t,e),this.data),this}scale(t=1,e=null){const s=null===e?t:e;return this.data=st((new Q).scale(t,s),this.data),this}applyMatrix(t){return this.data=st(t,W(this.data)),this}getMaxRadius(){return J.getMaximumRadiusForAllPoints(this.getPoints())}getMaxLineLength(){const t=this.getPoints(),e=t.length;let s=0;for(let i=0;i<e;i++){const a=t[i],n=t[(i+1)%e],o=n.x-a.x,r=n.y-a.y;s=Math.max(s,Math.sqrt(o**2+r**2))}return s}getMaxCurveRadius(){const t=[];return tt(this.data,((e,s,i,a)=>{const n=z.A.getAngleBetweenPoints(i,s,a)/2,o=Math.sqrt((s.x-i.x)**2+(s.y-i.y)**2)*Math.abs(Math.sin(n));t.push(o)})),t.length?Math.min(...t)/2:0}getPoints(){const t=[],e=new Z.A;for(let s=0;s<this.data.length;s++){const i=this.data[s],a=i.length;/h/i.test(i[0])?t.push(new Z.A(i[1],e.y)):/v/i.test(i[0])?t.push(new Z.A(e.x,i[1])):/a/i.test(i[0])?t.push(new Z.A(i[6],i[7])):a>2&&t.push(new Z.A(i[a-2],i[a-1])),a>2&&e.copy(t[t.length-1])}return t}reverse(){return this.data=function(t){const e=[],s=Y(function(t){const e=[],s=new Z.A,i=new Z.A,a=new Z.A,n=new Z.A;for(let o=0;o<t.length;o++){const r=t[o];switch(/mlhvacqst/.test(r[0])?n.copy(s):n.set(0,0),r[0].toUpperCase()){case"M":e.push(["M",n.x+r[1],n.y+r[2]]);break;case"L":e.push(["L",n.x+r[1],n.y+r[2]]);break;case"H":e.push(["L",r[1],n.y+s.y]);break;case"V":e.push(["L",n.x+s.x,r[1]]);break;case"Q":a.set(n.x+r[1],n.x+r[2]),e.push(["Q",n.x+r[1],n.y+r[2],n.x+r[3],n.y+r[4]]);break;case"T":i.set(n.x+s.x+(s.x-a.x),n.y+s.y+(s.y-a.y)),a.copy(i),e.push(["Q",i.x,i.y,n.x+r[1],n.y+r[2]]);break;case"C":a.set(n.x+r[3],n.x+r[4]),e.push(["C",n.x+r[1],n.y+r[2],a.x,a.y,n.x+r[5],n.y+r[6]]);break;case"S":i.set(n.x+s.x+(s.x-a.x),n.y+s.y+(s.y-a.y)),a.set(n.x+r[1],n.x+r[2]),e.push(["C",i.x,i.y,a.x,a.y,n.x+r[3],n.y+r[4]]);break;case"A":e.push(["A",r[1],r[2],r[3],r[4],r[5],n.x+r[6],n.y+r[7]]);break;case"Z":e.push(["Z"]);break;default:throw new Error(`invalid command: ${r.join(" ")}`)}const h=e[o].length;h>2&&s.set(e[o][h-2],e[o][h-1])}return e}(t)),i=new Z.A;return s.forEach((t=>{const s=t;let a=!1,n=null,o=null;if(!(s.length<2)){/z/i.test(s[s.length-1][0])?(a=!0,o=s[0]):o=s[s.length-1];for(let t=s.length-2;t>=0;t--){const a=s[t];switch(i.set(a[a.length-2],a[a.length-1]),o[0]){case"M":e.push(["M",i.x,i.y]);break;case"L":e.push(["L",i.x,i.y]);break;case"A":n=0===o[5]?1:0,e.push(["A",o[1],o[2],o[3],o[4],n,i.x,i.y]);break;case"C":e.push(["C",o[3],o[4],o[1],o[2],i.x,i.y]);break;case"Q":e.push(["Q",o[1],o[2],i.x,i.y]);break;default:throw new Error(`invalid command for reversing path: ${o[0]}`)}o=a}a&&e.push("Z")}})),e}(this.data),this}getBoundingBox(){return q(this.data)}isClockwise(){const t=this.getPoints();let e=0;for(let s=0;s<t.length;s++){const i=t[s],a=t[(s+1)%t.length];e+=(a.x-i.x)*(a.y+i.y)}return e>0}},nt=class extends N{constructor(t){super(Object.assign({rotation:new F.A(0,360,{interval:5}).randomizeBetweenOptions([0,45,90,135,180,225,270,315]).setRealValueOnLabel().enableInteraction(),detail:new F.A(1,100).randomizeBetweenOptions([1,10,50]).enableInteraction(),size:new T.A(0,1).set(.5).setLabel("size").enableInteraction()},t)),1===this.state.detail.value?this.state.size.set(1):2===this.state.detail.value&&this.state.size.set(.5)}draw(t,e){const{x:s,y:i,cx:a,cy:n,width:o,height:r,originalColor:h}=e;if(!this.state.active.value||!this.state.strength.value)return;const l=this.getGroup(t,e),c=this.getHex(h),d=Math.sqrt((o/2+Math.abs(s+o/2-a))**2+(r/2+Math.abs(i+r/2-n))**2),u=this.state.detail.value,p=Math.min(Math.PI/u*(.025+.95*this.state.size.value),Math.PI/2),m=[["M",a,n]];for(let t=0;t<u;t++){const e=t/u*Math.PI*2+z.A.deg2rad(this.state.rotation.value),s=z.A.rad2deg(e);m.push(["L",a+Math.cos(e-p)*d,n+Math.sin(e-p)*d],["A",d,d,s,0,1,a+Math.cos(e+p)*d,n+Math.sin(e+p)*d],["L",a,n])}m.push(["Z"]);const g=new at(m);t.addChild(l,t.createElement("path",{d:g.getData(),fill:c,fillOpacity:t.fixNumber(this.getAlpha())}))}};var ot=s(5296);function rt(t){return t*t}function ht(t,e,s){const i=rt(e[0])+rt(e[1]),a=(rt(t[0])+rt(t[1])-i)/2,n=(i-rt(s[0])-rt(s[1]))/2,o=(t[0]-e[0])*(e[1]-s[1])-(e[0]-s[0])*(t[1]-e[1]);return!(Math.abs(o)<1e-14)&&[(a*(e[1]-s[1])-n*(t[1]-e[1]))/o,((t[0]-e[0])*n-(e[0]-s[0])*a)/o]}const lt=class extends N{constructor(t){super(Object.assign({curve:new T.A(-1,1).randomizeBetweenOptions([-.5,-.35,-.15,0,.15,.35,.5]).enableInteraction(),position:new T.A(.25,.75).set(.5).enableInteraction(),style:new ot.A(0)},t))}draw(t,e){const{x:s,y:i,width:a,height:n,originalColor:o}=e;if(!this.state.active.value||!this.state.strength.value)return;const r=this.getGroup(t,e),h=Math.abs(this.state.curve.value)<.01,l=this.state.position.value,c=h?0:Math.min(a,n)*this.state.curve.value*.35,d=n*l-c,u=n*l,p=u-ht([0,d],[.5*a,u],[a,d])[1],m=this.getColor(o.color),g=I.A.hex2hcl(m),f=I.A.hcl2hex(...I.A.hcl2derivative(g,[60,-30,45],-1)),y=I.A.hcl2hex(...I.A.hcl2derivative(g,[15,-30,45],-1)),v=t.addLinearGradient({angle:Math.PI/2,stops:[{color:f,offset:0,opacity:this.state.strength.value},{color:y,offset:1,opacity:0}]},1);if(h)t.addChild(r,t.createElement("rect",{x:t.fixNumber(s),y:t.fixNumber(i),width:t.fixNumber(a),height:t.fixNumber(n*l),fill:v}));else{const e=new at([["M",s,i],["L",s,i+d],["A",p,p,0,0,c<0?1:0,s+a,i+d],["L",s+a,i],["Z"]]);t.addChild(r,t.createElement("path",{d:e.getData(),fill:v}))}}};const ct=class extends N{constructor(t){var e,s,i,a;super(Object.assign({detail:new T.A(0,1).setLabel("detail").randomizeBetweenOptions([.85,.9]).enableInteraction(),rotation:new F.A(0,360,{interval:5}).randomizeBetweenOptions([0,45,90,135]).setRealValueOnLabel().setOrder(0).setLabel("rotation").enableInteraction()},t)),e=this,i=null,(s="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s="pattern"))?a:a+"")in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i}createPattern(t,e){}draw(t,e){const{x:s,y:i,width:a,height:n}=e;if(!this.state.active.value||!this.state.strength.value)return;const o=this.getGroup(t,e),r=t.fixFloat(s+a/2),h=t.fixFloat(i+n/2),l=t.fixFloat(-(s+a/2)),c=t.fixFloat(-(i+n/2));this.pattern=t.createElement("pattern",{patternUnits:"userSpaceOnUse",patternContentUnits:"userSpaceOnUse",patternTransform:`rotate(${t.fixNumber(this.state.rotation.value)}, ${r}, ${h}) translate(${r}, ${h}) scale(1) translate(${l}, ${c})`}),this.createPattern(t,this.pattern,e);const d=t.addDefinition(this.pattern);t.addChild(o,t.createElement("rect",{x:s,y:i,width:a,height:n,fill:`url(${d})`}))}},dt=class extends ct{constructor(t){super(Object.assign({ratio:new T.A(0,1).setLabel("ratio").randomizeBetweenOptions([0,.25,.5]).enableInteraction(),strokeWidth:new T.A(.05,.95).randomizeBetweenOptions([.25,.5,.75]).setLabel("size").randomize().enableInteraction()},t))}createPattern(t,e,s){const{x:i,y:a,width:n,height:o,originalColor:h,scale:l=1}=s,c=this.getHex(h),d=Math.PI*(1-.75*this.state.ratio.value),u=r.t4.MIN_PATTERN_WIDTH,p=(u+(1-this.state.detail.value)**2*(2*n-u))/l,m=p/2*this.state.strokeWidth.value;let g,f=p/2;if(this.state.ratio.value<.05)g=`M0,0 L${p},0 M0,${f} L${p},${f}`;else{const t=p/2/Math.tan(d/2);f+=p/2/Math.sin(d/2)-p/2,g=`M${-p/2},${2*t-f} L${p/2},${-f} L${1.5*p},${2*t-f} M${-p/2},${2*t} L${p/2},0 L${1.5*p},${2*t} M${-p/2},${f+2*t} L${p/2},${f} L${1.5*p},${f+2*t}`}const y=(n**2+o**2)**.5,v=Math.min(y,p),b=Math.min(y,f);t.setAttributes(e,{x:i+n/2-v/2,y:a+o/2-b/2,width:t.fixFloat(v),height:t.fixFloat(b),viewBox:`${t.fixFloat((p-v)/2)} ${t.fixFloat((f-b)/2)} ${t.fixFloat(v)} ${t.fixFloat(b)}`});const x=t.createElement("path",{d:new at(g).getData(),fill:"none",stroke:c,strokeWidth:t.fixFloat(m),strokeOpacity:t.fixNumber(this.getAlpha()),strokeLinecap:"square"});t.addChild(e,x)}},ut=class extends ct{constructor(t){super(Object.assign({ratio:new T.A(0,1).setLabel("ratio").randomizeBetweenOptions([.25,.5]).enableInteraction(),strokeWidth:new T.A(.05,.9).randomizeBetweenOptions([.25,.5,.75]).setLabel("size").randomize().enableInteraction()},t))}createPattern(t,e,s){const{x:i,y:a,width:n,height:o,originalColor:h,scale:l=1}=s,c=this.getHex(h),d=Math.PI*(.75+.25*(1-this.state.ratio.value)),u=r.t4.MIN_PATTERN_WIDTH;let p,m,g,f=(u+(1-this.state.detail.value)**2*(2*n-u))/l;this.state.ratio.value<.05?(p=f/2,m=p*this.state.strokeWidth.value,g=`M0,0 L${f},0 M0,${p} L${f},${p}`):(f*=Math.tan(d/2),p=f/2/Math.tan(d/2),m=p*Math.sin(d/2)*this.state.strokeWidth.value,g=`M${.5*-f},${p} Q${.75*-f},${p} ${.5*-f},0 T0,0 T${.5*f},0 T${f},0 T${1.5*f},0 M${.5*-f},${2*p} Q${.75*-f},${2*p} ${.5*-f},${p} T0,${p} T${.5*f},${p} T${f},${p} T${1.5*f},${p}`);const y=(n**2+o**2)**.5,v=Math.min(y,f),b=Math.min(y,p);t.setAttributes(e,{x:i+n/2-v/2,y:a+o/2-b/2,width:t.fixFloat(v),height:t.fixFloat(b),viewBox:`${t.fixFloat((f-v)/2)} ${t.fixFloat((p-b)/2)} ${t.fixFloat(v)} ${t.fixFloat(b)}`});const x=t.createElement("path",{d:new at(g).getData(),fill:"none",stroke:c,strokeWidth:t.fixFloat(m),strokeOpacity:t.fixNumber(this.getAlpha()),strokeLinecap:"square"});t.addChild(e,x)}},pt=class extends ct{constructor(t){super(Object.assign({size:new T.A(.25,1).randomizeBetweenOptions([.25,.5]).setLabel("size").randomize().enableInteraction()},t)),this.state.saved||(this.state.rotation.set(0),this.state.detail.randomizeBetweenOptions([.65,.9]))}createPattern(t,e,s){const{x:i,y:a,width:n,height:o,originalColor:h,scale:l=1}=s,c=this.getHex(h),d=.75*r.t4.MIN_PATTERN_WIDTH,u=(d+(1-this.state.detail.value)**2*(2*n-d))/l,p=u,m=u/4*this.state.size.value,g=(n**2+o**2)**.5,f=Math.min(g,u),y=Math.min(g,p);t.setAttributes(e,{x:i+n/2-f/2,y:a+o/2-y/2,width:t.fixFloat(f),height:t.fixFloat(y),viewBox:`${t.fixFloat((u-f)/2)} ${t.fixFloat((p-y)/2)} ${t.fixFloat(f)} ${t.fixFloat(y)}`}),t.addChild(e,t.createElement("circle",{cx:t.fixNumber(.25*u),cy:t.fixNumber(.25*p),r:t.fixNumber(m),fill:c,fillOpacity:t.fixNumber(this.getAlpha())})),t.addChild(e,t.createElement("circle",{cx:t.fixNumber(.75*u),cy:t.fixNumber(.75*p),r:t.fixNumber(m),fill:c,fillOpacity:t.fixNumber(this.getAlpha())}))}};const mt=class extends A.A{constructor(...t){var e,s,i,a;super(...t),e=this,i=[{name:"bokeh",type:j},{name:"burst",type:nt},{name:"shine",type:lt},{name:"zigzag",type:dt},{name:"squiggle",type:ut},{name:"polkadot",type:pt}],(s="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s="types"))?a:a+"")in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i}modify(t){const e=t.state.saved?t.state.saved.model:null,s=e&&this.types.find((t=>t.name===e))?e:this.types[Math.floor(Math.random()*this.types.length)].name,i=new(0,this.types.find((t=>t.name===s)).type);t.state.model.set(s),t.state.type=i,t.state.models=this.types.map((t=>t.name))}draw(t,e){}},gt=class extends v.A{constructor(t){super(Object.assign({model:new S.A},t)),this.addModifiers([mt]),this.applyModifiers()}};function ft(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const yt=class extends v.A{constructor(t){super(Object.assign({active:(new M.A).randomize(.15).enableInteraction(),size:new T.A(0,1).randomizeBetweenOptions([.25,.35]).setLabel("size").enableInteraction(),rotation:new F.A(0,360,{interval:5}).randomizeBetweenOptions([45,135]).setRealValueOnLabel().enableInteraction(),offset:new T.A(0,1).randomizeBetweenOptions([.35,.5,.65]).setLabel("offset").setIcon("stroke-offset").enableInteraction()},t)),ft(this,"group",null),ft(this,"sourceShape",null),ft(this,"nullBox",new h.A)}createElement({sourceShape:t=null,svg:e=null}={}){this.sourceShape=t,this.group=e.createElement("g")}getBox(t,e){const s=e*r.t4.MAX_SHADOW_WIDTH_FACTOR,i=this.state.offset.value*s,a=z.A.deg2rad(this.state.rotation.value),n=Math.cos(a)*i,o=Math.sin(a)*i,h=this.state.size.value*s,l=this.getCombinedBox({box:t,x:n,y:o,strokeWidth:h,offset:i,shadowSize:s});return{dy:t.y-l.y,dh:t.h-l.h,box:l}}getBoundingBox(){return this.sourceShape?this.sourceShape.getBoundingBox():this.nullBox}},vt=class extends yt{getElement({svg:t,sourceID:e,color:s}={}){const i=this.sourceShape.worldLineHeight*r.t4.MAX_SHADOW_WIDTH_FACTOR,a=this.state.offset.value*i,n=z.A.deg2rad(this.state.rotation.value),o=Math.cos(n)*a,h=Math.sin(n)*a,l=this.state.size.value*i;return a>0&&t.addChild(this.group,t.createElementFromDefinition(e,{"stroke-width":t.fixFloat(l),"stroke-linejoin":"round","stroke-linecap":"round",fill:s,stroke:s,transform:`translate(${t.fixFloat(o)}, ${t.fixFloat(h)})`})),l>0&&t.addChild(this.group,t.createElementFromDefinition(e,{"stroke-width":t.fixFloat(l),"stroke-linejoin":"round","stroke-linecap":"round",fill:s,stroke:s})),this.boundingBox=this.sourceShape.boundingBox,this.effectBox=this.sourceShape.effectBox,this.group}getCombinedBox({box:t,x:e,y:s,strokeWidth:i}){const a=new h.A(t.x,t.y,t.w,t.h).pad(-i/2),n=new h.A(t.x+e,t.y+s,t.w,t.h).pad(-i/2);return a.add(n).add(t)}},bt=class extends yt{getElement({svg:t,sourceID:e,color:s}={}){const i=this.sourceShape.worldLineHeight*r.t4.MAX_SHADOW_WIDTH_FACTOR,a=this.state.offset.value*i/2,n=z.A.deg2rad(this.state.rotation.value),o=Math.cos(n)*a,h=Math.sin(n)*a,l=this.state.size.value*i;return a>0&&t.addChild(this.group,t.createElementFromDefinition(e,{"stroke-width":t.fixFloat(l+2*a),"stroke-linejoin":"round","stroke-linecap":"round",fill:s,stroke:s,transform:`translate(${t.fixFloat(o)}, ${t.fixFloat(h)})`})),l>0&&t.addChild(this.group,t.createElementFromDefinition(e,{"stroke-width":t.fixFloat(l),"stroke-linejoin":"round","stroke-linecap":"round",fill:s,stroke:s})),this.boundingBox=this.sourceShape.boundingBox,this.effectBox=this.sourceShape.effectBox,this.group}getCombinedBox({box:t,x:e,y:s,strokeWidth:i,offset:a}){const n=new h.A(t.x,t.y,t.w,t.h).pad(-i/2),o=new h.A(t.x+e/2,t.y+s/2,t.w,t.h).pad(-(i+a)/2);return n.add(o).add(t)}},xt=class extends yt{constructor(t){super(Object.assign({sizeFactor:new T.A(0,1).set(.5).setLabel("gap").setIcon("position").enableInteraction()},t))}getElement({svg:t,sourceID:e,color:s}={}){const i=this.sourceShape.worldLineHeight*r.t4.MAX_SHADOW_WIDTH_FACTOR,a=this.state.offset.value*i,n=z.A.deg2rad(this.state.rotation.value),o=Math.cos(n)*a,h=Math.sin(n)*a,l=this.state.size.value*i,c=this.state.sizeFactor.value,d="#000"===s?"#fff":"#000";for(let i=2;i>=0;i--){const n=i/2,r=l*c+(l-l*c)*n;!(r||i>0)||0===a&&1===c&&i<2||t.addChild(this.group,t.createElementFromDefinition(e,{"stroke-width":t.fixFloat(r),"stroke-linejoin":"round","stroke-linecap":"round",fill:i%2==0?s:d,stroke:i%2==0?s:d,transform:`translate(${t.fixFloat(o*n)}, ${t.fixFloat(h*n)})`}))}return this.boundingBox=this.sourceShape.boundingBox,this.effectBox=this.sourceShape.effectBox,this.group}getCombinedBox({box:t,x:e,y:s,strokeWidth:i}){const a=new h.A(t.x,t.y,t.w,t.h).pad(-i/2),n=new h.A(t.x+e,t.y+s,t.w,t.h).pad(-i/2);return a.add(n).add(t)}};const wt=class extends A.A{constructor(...t){var e,s,i,a;super(...t),e=this,i=[{name:"2d",type:vt},{name:"3d",type:bt},{name:"striped",type:xt}],(s="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s="types"))?a:a+"")in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i}modify(t){const e=t.state.saved?t.state.saved.model:null,s=e&&this.types.find((t=>t.name===e))?e:this.types[Math.floor(Math.random()*(this.types.length-1))].name,i=new(0,this.types.find((t=>t.name===s)).type);t.state.saved||t.state.enabled||i.state.active.set(!1),t.state.model.set(s),t.state.type=i,t.state.models=this.types.map((t=>t.name))}},St=class extends v.A{constructor(t){super(Object.assign({model:new S.A,type:null,enabled:!0,models:null,saved:null},t)),this.addModifiers([wt]),this.applyModifiers()}createShape(){return this.state.type}},At=class extends w.A{constructor(t){super(Object.assign({links:new E.A,linkedTo:new S.A,active:new M.A},t))}},kt=class extends A.A{activate(t){t.state.fontScheme=new E.A([0,1,2,3,4,5,6]).randomize().ignoreOnSave()}modify(t){if(t.state.saved)return this.setFontDescriptionFromSavedState(t.state.saved.name,t.state.name),this.setFontDescriptionFromSavedState(t.state.saved.slogan,t.state.slogan),void this.setFontDescriptionFromSavedState(t.state.saved.symbol,t.state.symbol);const e=t?.state?.hasNameShadow,s=t.logo.hasIcon,i=t.logo.hasSymbol,a=t.logo.hasTextInsideSymbol,n=void 0===t.logo.textPosition||0===t.logo.textPosition,o=t.logo.hasLetter;let r;switch(a?s?t.state.fontScheme.randomizeBetweenOptions([5]):t.state.fontScheme.randomizeBetweenOptions([5,6]):!n||o||i?t.state.fontScheme.randomizeBetweenOptions([0,1]):s?i?t.state.fontScheme.randomizeBetweenOptions([0,1,2]):t.state.fontScheme.randomizeBetweenOptions([0,1,2,3,4,5,6]):t.state.fontScheme.randomizeBetweenOptions([0,1,2,3,4]),t.state.fontScheme.value){case 0:r=[{category:["sans-serif","serif"],style:["normal"],weight:["400","500","600","700"]},{category:["sans-serif"],style:["normal"],weight:["300"]},{category:["display","brush"]}];break;case 1:r=[{category:["sans-serif"],style:["normal"],weight:["600","700","800","900"]},{category:["sans-serif"],style:["normal"],weight:["300"]},{category:["sans-serif","serif"]}];break;case 2:r=[{category:["serif","brush","slab"],style:["normal"],weight:["700","800","900"]},{category:["sans-serif"],style:["normal"],weight:["300"]},{category:["serif","sans-serif","display","brush","script"]}];break;case 3:r=[{category:["brush","script"],style:["normal","italic"],weight:["400","500","600","700","800","900"]},{category:["sans-serif"],style:["normal"],weight:["300","400","500"]},{category:["display"]}];break;case 4:r=[{category:["display"],style:["normal","italic"],weight:["400","500","600","700","800","900"]},{category:["sans-serif"],style:["normal"],weight:["300","400","500"]},{category:["sans-serif"]}];break;case 5:r=[{category:["sans-serif","serif","slab"],style:["normal"],weight:["700","800","900"]},{category:["sans-serif"],style:["normal"],weight:["300"]},{category:["display","brush"]}];break;case 6:r=[{category:["brush","display"],style:["normal"],weight:["600","700","800","900"]},{category:["sans-serif"],style:["normal"],weight:["300"]},{category:["sans-serif"]}]}e&&(r[0].category=r[0].category.filter((t=>!/brush/.test(t))),r[0].category.length||(r[0].category="sans-serif")),this.setFontDescription(t.state.name,r[0]),this.setFontDescription(t.state.slogan,r[1]),this.setFontDescription(t.state.symbol,r[2])}setFontDescriptionFromSavedState(t,e){const s=r.oB.FONTS.items.find((e=>e.family===t.family&&e.variants.includes(t.variant)));if(s)e.file=`${r.oB.FONT_PATH}${s.files[t.variant]}`,e.category=s.category;else{const s=r.oB.FONTS.items.find((e=>e.family===t.family));if(s){const t=Object.values(s.variants)[0];e.file=`${r.oB.FONT_PATH}${s.files[t]}`,e.category=s.category}else{const t=r.oB.FONTS.items.find((t=>"Open Sans"===t.family));if(!t)throw new Error("fallback font Open Sans not found");e.file=`${r.oB.FONT_PATH}${t.files.regular}`,e.category=t.category}}}setFontDescription(t,e){let s=null;const i=[{category:e.category,style:e.style,weight:e.weight},{category:null,style:e.style,weight:e.weight},{category:null,style:null,weight:e.weight},null];for(const e of i)if(s=r.oB.FONTS.items.filter((s=>{let i=!0,a=!0;return s.filteredVariants=null,e?(e.category&&(i=e.category.some((t=>s.category===t))),e.style||e.weight?(s.filteredVariants=s.variants.filter((i=>{let a=!0,n=!0;if(e.weight){const t=i.replace(/(regular|italic)/,"400").replace(/[^0-9]/g,"");n=e.weight.includes(t)}if(e.style){const t=i.includes("italic");a=e.style.some((e=>"italic"===e&&t||"normal"===e&&!t))}return y(t.text,s.glyphs,i)&&n&&a})),a=0!==s.filteredVariants.length):(s.filteredVariants=s.variants.filter((e=>y(t.text,s.glyphs,e))),a=s.filteredVariants.length>0),i&&a):(s.filteredVariants=s.variants.filter((e=>y(t.text,s.glyphs,e))),s.filteredVariants.length>0)})),s&&s.length>0)break;if(!s.length)throw new Error("no font match");const a=s[Math.floor(Math.random()*s.length)],n=a.filteredVariants||a.variants,o=n[Math.floor(Math.random()*n.length)],h=a.files[o];t.family.set(a.family),t.variant.set(o),t.file=`${r.oB.FONT_PATH}${h}`,t.category=a.category}},Bt=class extends v.A{constructor(t){super(t);const e=new w.A({family:new S.A,variant:new S.A,file:null,category:null});this.state.name=e.clone(),this.state.name.text=this.state.texts.text,this.state.slogan=e.clone(),this.state.slogan.text=this.state.texts.sloganText,this.state.symbol=e.clone(),this.state.symbol.text=this.state.texts.symbolText,this.addModifiers([kt])}},Ct=class extends A.A{modify(t){!/(brush|script|handwriting)/.test(t.state.font.category)&&t.state.text.value&&t.state.text.set(t.state.text.value.toUpperCase())}},Mt=class extends A.A{modify(t){(t.state.text.value&&1===t.state.text.value.length||/(brush|script|handwriting)/.test(t.state.font.category))&&t.state.letterSpacing.set(0),t.state.ligatures.set(0===t.state.letterSpacing.value)}};var Tt=s(6337);function Et(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const It=class extends x.A{constructor(t){super(t),Et(this,"contentBox",null),Et(this,"boundingBox",null),Et(this,"effectBox",null),Et(this,"trimBox",null),Et(this,"matrix",new Q),Et(this,"worldContentBox",new h.A),Et(this,"worldBoundingBox",new h.A),Et(this,"worldEffectBox",new h.A),Et(this,"worldTrimBox",new h.A),Et(this,"worldMatrix",new Q),Et(this,"_rotation",0),Et(this,"position",new Z.A),Et(this,"origin",new Z.A),Et(this,"originInverse",new Z.A),Et(this,"scale",new Z.A(1,1)),Et(this,"worldPosition",new Z.A),Et(this,"worldCurvePosition",new Z.A),Et(this,"worldCurveRadius",0),this.scale.onUpdate=()=>{this.updateTransform()},this.position.onUpdate=()=>{this.updateTransform()},this.origin.onUpdate=()=>{this.originInverse.copy(this.origin).scale(-1)}}reset(){this.contentBox=null,this.boundingBox=null,this.effectBox=null,this.trimBox=null,this.resetTransforms()}resetTransforms(){this.matrix.identity(),this.worldContentBox.reset(),this.worldBoundingBox.reset(),this.worldEffectBox.reset(),this.worldTrimBox.reset(),this.worldMatrix.identity(),this._rotation=0,this.position.set(0,0),this.origin.set(0,0),this.scale.set(1,1),this.worldPosition.set(0,0)}updateTransform(){if(this.parent&&this.parent.updateTransform(),!this.boundingBox)return;const t=!this.position.isZero(),e=0!==this.rotation,s=!this.scale.isOne();let i=!1;if(this.matrix.identity(),t&&(this.matrix.translate(this.position.x,this.position.y),i=!0),e||s){const t=!this.origin.isZero();t&&this.matrix.translate(this.origin.x,this.origin.y),e&&this.matrix.rotate(this.rotation),s&&this.matrix.scale(this.scale.x,this.scale.y),t&&this.matrix.translate(this.originInverse.x,this.originInverse.y),i=!0}this.parent?(this.worldMatrix.copy(this.parent.worldMatrix),i&&this.worldMatrix.multiply(this.matrix)):this.worldMatrix.copy(this.matrix),this.worldBoundingBox.copy(this.boundingBox),this.worldBoundingBox.applyMatrix(this.worldMatrix),this.worldTrimBox.copy(this.trimBox?this.trimBox:this.boundingBox),this.worldTrimBox.applyMatrix(this.worldMatrix),this.effectBox&&(this.worldEffectBox.copy(this.effectBox),this.worldEffectBox.applyMatrix(this.worldMatrix)),this.worldPosition.set(this.worldBoundingBox.x,this.worldBoundingBox.y),this.contentBox&&(this.worldContentBox.copy(this.contentBox),this.worldContentBox.applyMatrix(this.worldMatrix)),this.curveRadius&&(this.worldMatrix.apply(this.curvePosition,this.worldCurvePosition),this.worldCurveRadius=this.worldMatrix.applyScaleX(this.curveRadius),this.worldInnerCurveRadius=this.worldMatrix.applyScaleX(this.innerCurveRadius))}get rotation(){return this._rotation}set rotation(t){this.dirty=!0,this._rotation=t}get width(){return null===this.worldBoundingBox.w&&(this.worldBoundingBox=this.getBoundingBox()),this.worldBoundingBox.w}get height(){return null===this.worldBoundingBox.h&&(this.worldBoundingBox=this.getBoundingBox()),this.worldBoundingBox.h}get x(){return null===this.worldBoundingBox.x&&(this.worldBoundingBox=this.getBoundingBox()),this.worldBoundingBox.x}get y(){return null===this.worldBoundingBox.y&&(this.worldBoundingBox=this.getBoundingBox()),this.worldBoundingBox.y}};function Nt(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Pt=class extends It{constructor(t){super(Object.assign({hasStroke:(new M.A).randomize(.15).setLabel("enable").setOrder(0).enableInteraction(),strokeWidth:new T.A(.02,1,{interval:.01}).randomizeBetween(.05,.1).setLabel("width").setOrder(1).enableInteraction(),strokeOffset:new T.A(.02,1,{interval:.01}).randomizeBetween(.05,.15).setLabel("offset").setOrder(2).enableInteraction()},t)),Nt(this,"oldState",{}),Nt(this,"path",null),Nt(this,"boundingBoxWithoutStroke",null),Nt(this,"maxStroke",0),Nt(this,"hasDefinedStroke",!1),Nt(this,"_worldTypographicBoundingBox",new h.A),Nt(this,"minAngle",null),Nt(this,"_hasContent",null)}addCircle(t,e,s,i=!1){const a=i?1:-1,n=i?0:1;this.path.data.push(["M",s*-a,0],["A",s,s,0,1,n,s*a,0],["A",s,s,0,1,n,s*-a,0],["Z"])}reset(){super.reset(),this.path=null,this.maxStroke=0,this.boundingBoxWithoutStroke=null,this.hasDefinedStroke=!1,this.minAngle=null}getPathData({precision:t=null}={}){if(this.initializePathBox(),this.updateTransform(),this.oldState&&this.path.isSame&&this.worldMatrix.equals(this.oldState.worldMatrix))return this.oldState.dataString;if(!this.path)return"";const e=this.path.toDataString(this.worldMatrix,t);return this.oldState={worldMatrix:this.worldMatrix.clone(),dataString:e},e}initializePathBox({normalize:t=!0}={}){if(this.path&&!this.boundingBox){if(this.boundingBox=this.boundingBoxWithoutStroke?this.boundingBoxWithoutStroke.clone():this.symbolBox?this.symbolBox.clone():this.path.getBoundingBox(),this.equalBoundarySpace&&this.boundingBox.equalizeSpaceFromBox(this.contentBox,this.equalBoundarySpace),this.initializeStroke(),this.state.hasStroke.value&&this.state.strokeWidth.value&&this.maxStroke){let t=1;this.symbolBox||this.state.cornerType&&2===this.state.cornerType.value&&this.minAngle&&(t=1/Math.sin(this.minAngle/2)),this.boundingBox.pad(-(this.getStrokeOffset()/2+this.getStrokeWidth())*t/2)}t&&(this.path.translate(-this.boundingBox.x,-this.boundingBox.y),this.contentBox&&(this.contentBox.x-=this.boundingBox.x,this.contentBox.y-=this.boundingBox.y),this.boundingBox.set(0,0,this.boundingBox.w,this.boundingBox.h)),this.effectBox=this.boundingBox.clone().pad(`-${r.t4.EFFECT_PADDING}`)}}initializeStroke(){this.hasDefinedStroke||this.path&&(this.boundingBoxWithoutStroke||(this.boundingBoxWithoutStroke=this.symbolBox?this.symbolBox.clone():this.path.getBoundingBox(),this.maxStroke=Math.sqrt(this.boundingBoxWithoutStroke.w**2+this.boundingBoxWithoutStroke.h**2)*r.t4.MAX_STROKE_WIDTH))}resetStroke(){this.boundingBoxWithoutStroke=null,this.maxStroke=null}setMaxStrokeWidth(t){this.hasDefinedStroke=Boolean(t),this.maxStroke=t}getBoundingBox(){return this.initializePathBox(),this.updateTransform(),this.worldBoundingBox}getEffectBox(){return this.initializePathBox(),this.updateTransform(),this.worldEffectBox}getTrimBox(){return this.initializePathBox(),this.updateTransform(),this.trimBox?this.worldTrimBox:this.worldBoundingBox}getContentBox(){return this.initializePathBox(),this.updateTransform(),this.worldContentBox}getStrokeOffset(){return this.initializeStroke(),this.state.hasStroke.value&&this.maxStroke*this.state.strokeOffset.value}getStrokeWidth(){return this.initializeStroke(),(this.hasStroke||this.state.hasStroke.value)&&this.maxStroke*this.state.strokeWidth.value}get worldStrokeWidth(){return this.getStrokeWidth()*this.worldMatrix.array[0]}get worldStrokeOffset(){return this.getStrokeOffset()*this.worldMatrix.array[0]}get hasContent(){return null===this._hasContent?this.path&&this.path.data.length>0:this._hasContent}set hasContent(t){this._hasContent=t}get worldTypographicBoundingBox(){return this._worldTypographicBoundingBox.copy(this.typographicBox),this._worldTypographicBoundingBox.applyMatrix(this.worldMatrix),this._worldTypographicBoundingBox}get worldSize(){return(this.size||0)*this.worldMatrix.array[0]}get worldLineHeight(){return(this.lineHeight||0)*this.worldMatrix.array[0]}};function Ot(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const $t=class extends Pt{constructor(t){super(Object.assign({hasStroke:new M.A(!1),align:new E.A([0,1]).setLabel("align",["left","center"])},t)),Ot(this,"oldShapeState",{}),Ot(this,"size",0),Ot(this,"gapWidth",0),Ot(this,"lineHeight",0),Ot(this,"curvePosition",new Z.A),Ot(this,"curveRadius",null),Ot(this,"innerCurveRadius",null),Ot(this,"curveAngle",null),Ot(this,"isCurvingUpwards",!1),Ot(this,"hasCurve",!1)}getTextPathData(t){return t?t.commands.map((t=>{switch(t.type.toUpperCase()){case"M":case"L":return[t.type,t.x,t.y];case"C":return[t.type,t.x1,t.y1,t.x2,t.y2,t.x,t.y];case"Q":return[t.type,t.x1,t.y1,t.x,t.y];case"Z":return[t.type];default:throw new Error(`unrecognized command: ${t.type}`)}})):[]}getGlyphBox(t){if(void 0===t.xMax||void 0===t.xMin||void 0===t.yMax||void 0===t.yMin){const e=t.getBoundingBox();t.xMin=e.x1||0,t.yMin=e.y1||0,t.xMax=e.x2||0,t.yMax=e.y2||0}return t}getLines(t,e,s,i,a){let n=t.match(/(?:\\\||[^|])+/g)||[];i&&n.length>2&&(n=[n[0],n.slice(1).join(" ")]);const o=this.state.openTypeFont,r=o.unitsPerEm,h=[],l=this.getCapHeight(),c=!(n.length<=1)&&s;return n.forEach(((t,e)=>{const s=t.replace(/\\\|/g,"|");let i=null;const n=[];try{if(i=o.stringToGlyphs(s,a),a?.kerning){let t=0;for(let e=0;e<i.length-1;e++){const s=o.getKerningValue(i[e],i[e+1]);s&&t++,n.push(i[e].advanceWidth+s)}n.push(i[i.length-1].advanceWidth)}else for(let t=0;t<i.length;t++)n.push(i[t].advanceWidth)}catch(t){throw t}const d=this.getGlyphBox(i[0]).xMin,u=this.getGlyphBox(i[Math.max(0,i.length-1)]),p=Math.max(0,u.advanceWidth-u.xMax),m=u.advanceWidth-u.xMax,g=n.reduce(((t,e)=>t+e),0),f=(i.length||1)-1,y=f*a.letterSpacing*r,v=g+y-d-m,b=0!==e&&c?h[0].wBox/v:1,x=l*r*b;h.push({text:s,x:d,w:g+y-p,originalWidth:g,wBox:v,sizeFactor:b,h:x,glyphs:i,glyphSpaces:f,advanceWidthsWithKerning:n})})),h}getCapHeight(){const t=this.state.openTypeFont,e=t.unitsPerEm;let s=t.tables.os2.sCapHeight/e;const i=this.getGlyphBox(t.charToGlyph("H")).yMax/e;return s||(s=i),s<.9*i&&(s=i),s}resetText(){super.reset(),this.typographicBox=null,this.path=new at("M0,0"),this.initializePathBox(),this.initializeStroke(),this.oldShapeState=null}createPath({forceInBox:t=!1,size:e=64,width:s=100,height:i=100,padding:a=new Tt.A,worldCurvePosition:n=null,worldCurveRadius:o=null}={}){const l=this.state.ligatures.value,c=this.state.isCircular.value,d=this.state.letterSpacing.value,u=this.state.lining.value,p=this.state.align.value,m=this.state.curve.value,g=this.state.shadow?.state.type,f=g?.state.size.value,y=g?.state.offset.value,v=g?.state.rotation.value,b=g?.state.active.value;let x=this.state.hasBoxedText&&this.state.hasBoxedText.value,w=this.state.text.value;const S=x,A=this.state.openTypeFont,k=A.unitsPerEm,B={features:{liga:l,rlig:l},kerning:!0,hinting:!1,letterSpacing:d};if(!w)return void this.resetText();c&&(x=!1);const C=this.getLines(w,u,x,c,B);if(C.length<=1&&(x=!1),this.size=c?.35*o*this.state.sizeFactor.value:e,this.state.capitalization.value&&(w=w.toUpperCase()),this.oldShapeState&&a.equals(this.oldShapeState.padding)&&w===this.oldShapeState.text&&e===this.oldShapeState.size&&t===this.oldShapeState.forceInBox&&s===this.oldShapeState.width&&i===this.oldShapeState.height&&d===this.oldShapeState.letterSpacing&&l===this.oldShapeState.ligatures&&u===this.oldShapeState.lining&&p===this.oldShapeState.align&&x===this.oldShapeState.hasBoxedText&&m===this.oldShapeState.curve&&c===this.oldShapeState.isCircular&&f===this.oldShapeState.shadowSize&&y===this.oldShapeState.shadowOffset&&v===this.oldShapeState.shadowRotaion&&b===this.oldShapeState.shadowActive)return this.resetTransforms(),void(this.path.isSame=!0);this.reset(),this.typographicBox=null,this.effectBox=null;const M=C.slice().sort(((t,e)=>e.w-t.w))[0],T=M.w,E=C[0].wBox,I=this.getCapHeight();if(c){const t=Math.PI*(.25+.75*d),e=t*o,s=A.getAdvanceWidth(M.text,this.size,Object.assign(B,{letterSpacing:this.state.letterSpacing.min}));s>e&&(this.size*=e/s),this.innerCurveRadius=o-M.h/k*this.size,this.curveAngle=t/2+Math.PI/2}else if(x){const t=C.reduce(((t,e)=>t+e.w),0)/C.length/C[0].w;this.size*=t}this.hasCurve=Math.abs(m)>.01&&w.length>1;let N=A.tables.os2.sxHeight/k;N||(N=this.getGlyphBox(A.charToGlyph("x")).yMax/k);const P=this.getGlyphBox(A.charToGlyph("."));this.gapWidth=Math.max((P.xMax-P.xMin)/k/1.25,this.lineHeight/this.size/8),this.gapWidth>.35*N&&(this.gapWidth=this.lineHeight/this.size/8);const O=new Q,$=[],L=[],D=[],j=[],z=[];let F=m>0?1:-1,R=null,_=null,G=null,W=0,U=null,H=null,V=0,q=0;if(C.forEach(((t,e)=>{const s=x?E:T;q+=t.h/k*this.size,c?(this.hasCurve=!0,this.curvePosition.copy(n),this.curveRadius=o,this.isCurvingUpwards=1===C.length||1===e,F=this.isCurvingUpwards?1:-1,U=Math.PI*(.25+.75*d),R=this.curveRadius,this.isCurvingUpwards||(R+=q*F),H=U*R/this.size*k,V=S?(H-t.w)/t.glyphSpaces:(H-s)/M.glyphSpaces):this.hasCurve&&(null===R&&(G=-m*s/2,_=ht([0,G],[.5*s,0],[s,G]),this.curvePosition.set(_[0]/k*this.size,_[1]/k*this.size),this.curveRadius=Math.abs(_[1])/k*this.size,this.isCurvingUpwards=m>0,m<0&&(W=C.reduce(((t,e,s)=>t+(e.h+(s<C.length-1?(u-1)*I*k:0))),0),this.curvePosition.y+=W/k*this.size)),R=Math.abs(_[1]),U=2*Math.asin(Math.min(s/2,R)/R),R+=q*F/this.size*k+W,H=U*R,V=x?(H-s)/t.glyphSpaces:(H-s)/M.glyphSpaces);const i=x||0===p?0:(T+M.glyphSpaces*V-t.w-t.glyphSpaces*V)/2,a=1/k;let r=i+(x?-t.x:0);c&&S&&(r=0);let h=0;t.glyphs.forEach(((e,s)=>{const i=this.getGlyphBox(e),n=i.xMin,o=i.xMax-n,l=a*this.size*t.sizeFactor;if(i.path.commands.length){if(this.hasCurve)if(c){O.identity().scale(l,-l);const e=1.5*Math.PI+(1===t.glyphs.length?0:((r+n+o/2+h)/H-.5)*U),s=this.curvePosition.x/l+Math.cos(e)*R/l,i=-this.curvePosition.y/l+Math.sin(e)*R*F/l;O.translate(s,i).rotate(this.isCurvingUpwards?e-1.5*Math.PI:1.5*Math.PI-e).translate(-n-o/2,0)}else{O.identity().scale(l,-l);const e=1.5*Math.PI+(1===t.glyphs.length?0:((r+n+o/2+h/t.sizeFactor)*t.sizeFactor/H-.5)*U),s=(_[0]+Math.cos(e)*R)/t.sizeFactor,i=(-_[1]-W+Math.sin(e)*F*R)/t.sizeFactor;O.translate(s,i).rotate(this.isCurvingUpwards?e-1.5*Math.PI:1.5*Math.PI-e).translate(-n-o/2,0)}else O.identity().translate(0,q).scale(a*this.size*t.sizeFactor,-a*this.size*t.sizeFactor).translate(r,0);c||($.push((r+i.xMin)*l),L.push(q-i.yMax*l),D.push((r+i.xMax)*l),j.push(q-i.yMin*l));const e=st(O,this.getTextPathData(i.path));z.push(...e)}r+=t.advanceWidthsWithKerning[s]+d*k,h+=V})),e<C.length-1&&(q+=(u-1)*I*this.size)})),this.path=new at(z),t){const t=this.path.getBoundingBox(),e=Math.min((s-a.horizontal)/t.w,(i-a.vertical)/t.h);this.path.scale(e),this.initializePathBox()}else if(c)this.typographicBox=this.path.getBoundingBox(),this.boundingBox=this.typographicBox.clone(),this.effectBox=this.typographicBox.clone(),this.trimBox=this.typographicBox.clone(),this.lineHeight=I*this.size,this.initializeStroke();else{const t=x?E/k*this.size:T/k*this.size,e=$?.length?Math.min(...$):0,s=L?.length?Math.min(...L):0,i=D?.length?Math.max(...D)-e:0,a=j?.length?Math.max(...j)-s:0;let n=0,o=0,l=0,c=0;C[0].text===C[0].text.toLowerCase()&&(c=(I-N)*this.size),this.lineHeight=I*this.size;const d=new h.A(e,s,i,a);if(this.hasCurve?(this.typographicBox=this.path.getBoundingBox(),this.trimBox=this.typographicBox.clone(),n=Math.max(e-this.typographicBox.x,this.typographicBox.x+this.typographicBox.w-(e+i)),o+=s-this.typographicBox.y,l+=this.typographicBox.y+this.typographicBox.h-(s+a)):(this.typographicBox=d,this.trimBox=this.path.getBoundingBox()),this.boundingBox=new h.A(0,c,t,q-c),this.boundingBox.adjustSpaceFromBox(d),this.boundingBox.set(this.boundingBox.x-n,this.boundingBox.y-o,this.boundingBox.w+2*n,this.boundingBox.h+o+l),this.state.shadow?.state.type.state.active.value){this.typographicBox=this.state.shadow.state.type.getBox(this.typographicBox,this.lineHeight).box,this.trimBox=this.state.shadow.state.type.getBox(this.trimBox,this.lineHeight).box;const t=this.state.shadow.state.type.getBox(this.boundingBox,this.lineHeight);this.boundingBox=t.box.add(this.typographicBox),this.curvePosition.y-=t.dy,this.isCurvingUpwards||(this.curvePosition.y-=t.dh)}this.effectBox=this.typographicBox.clone().equalizeSpaceFromBox(this.boundingBox).pad(`-${r.t4.EFFECT_PADDING}`),this.initializeStroke()}this.oldShapeState={size:this.size,padding:a.clone(),text:w,forceInBox:t,width:s,height:i,letterSpacing:d,ligatures:l,lining:u,align:p,hasBoxedText:x,curve:m,isCircular:c,shadowSize:f,shadowOffset:y,shadowRotation:v,shadowActive:b}}};var Lt=s(7110),Dt=s(6301);const jt=class extends v.A{constructor(t){if(super(Object.assign({font:null,text:null,isCircular:(new M.A).setLabel("circular").enableInteraction(),curve:new T.A(-1,1,{interval:.01}).set(0).setLabel("curve").enableInteraction(),letterSpacing:new T.A(-.25,1,{interval:.01}).randomizeBetween(0,.15).setLabel("letter spacing").enableInteraction(),capitalization:new M.A,ligatures:new M.A,padding:new Tt.A},t)),e=this,i=null,(s="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s="type"))?a:a+"")in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i,this.addModifiers([Mt,[Ct,{chance:.35}]]),this.applyModifiers(),this.state.curveEnabled){if(!this.state.saved&&this.state.canCurve){if(Math.random()<.85)return;this.state.curve.randomizeBetweenOptions([-.25,-.15,-.1,.1,.15,.25])}}else this.state.curve=new ot.A(0);var e,s,i,a;this.state.canBeCircular?this.state.saved||this.state.isCircular.randomize(.65):this.state.isCircular=new ot.A(!1)}async createShape(){const t=await this.loadFont(this.state.font.file);return await Dt.A.wait(),this.type=new $t(Object.assign(this.state,{openTypeFont:t})),this.type}async loadFont(t){try{return await Lt.Ay.load(t)}catch(t){throw t}}};function zt(t){return t.replace(/^\s+|\s+$/g,"")}var Ft=s(7457);function Rt(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const _t=(0,l.Lr)(r.t4.ICON_PRECISION);function Gt(t,e,s=[]){if(t.test(e.tagName)&&s.push(e),e.children)for(const i of e.children)Gt(t,i,s);return s}function Wt(t){if(t.children)for(const e of t.children)e.parentNode=t,Wt(e);return t}const Ut=class extends It{constructor(t){super(t),Rt(this,"svg",null),Rt(this,"oldSVG",null),Rt(this,"group",null),Rt(this,"originalX",0),Rt(this,"originalY",0),Rt(this,"originalWidth",100),Rt(this,"originalHeight",100),Rt(this,"originalBoundingBox",null),Rt(this,"elements",null),Rt(this,"originalStrings",new WeakMap),Rt(this,"originalElementContents",new WeakMap),Rt(this,"clipID",(0,o.A)()),Rt(this,"validNodes",["g","path","rect","circle","ellipse","line","polyline","polygon","clipPath","mask","use","symbol","defs"]),Rt(this,"styles",null),Rt(this,"computedBoundingBox",null),Rt(this,"originGroup",null),Rt(this,"rotationGroup",null),Rt(this,"boundingBoxGroup",null),Rt(this,"hasRotation",!1),Rt(this,"rotationMatrix",null),this.originalWidth=100,this.originalHeight=100}createElement({svg:t=null,forceInBox:e=!1,width:s=100,height:i=100,padding:a=new Tt.A}={}){if(this.reset(),this.hasRotation=0!==this.state.rotation.value||this.state.isFlipped.value,null===this.oldSVG||t!==this.oldSVG){this.computedBoundingBox=new h.A,this.computedRotatedBoundingBox=new h.A,this.elements=[],this.oldSVG=t;const e=Wt((0,Ft.q)(this.state.svg)),s=Gt(/svg/i,e)[0],i=s.properties.viewBox||"0 0 100 100",a=/(.+)\s(.+)\s(.+)\s(.+)/.exec(i),n=Gt(/style/i,e).reduce(((t,e)=>{let s="";for(const t of e.children)/text/i.test(t.type)&&(s+=t.value);return`${t}${s}`}),"");n&&(this.styles=function(t,e){const s=[];function i(i){const a=new Error(i+' at "'+t.substr(0,100)+'"');if(a.reason=i,!e)throw a;s.push(a)}function a(e){const s=e.exec(t);if(s)return t=t.slice(s[0].length),s}function n(){a(/^\s*/)}function o(){return a(/^{\s*/)}function r(){return a(/^}/)}function h(){if(n(),"/"!==t[0]||"*"!==t[1])return;let e=2;for(;""!=t[e]&&("*"!==t[e]||"/"!==t[e+1]);)e++;if(""==t[e+1])return i("End of comment is missing");const s=t.slice(2,e);return t=t.slice(e+2),{type:"comment",comment:s}}function l(){const t=[];let e;for(;e=h();)t.push(e);return t}function c(){for(n();"}"===t[0];)i("extra closing bracket"),t=t.slice(1),n();const e=a(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(e)return zt(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(t){return t.replace(/,/g,"")})).split(/\s*(?![^(]*\)),\s*/).map((t=>t.replace(/\u200C/g,",")))}function d(){a(/^([;\s]*)+/);const t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;let e=a(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(!e)return;if(e=zt(e[0]),!a(/^:\s*/))return i("property missing ':'");const s=a(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),n={type:"declaration",property:e.replace(t,""),value:s?zt(s[0].replace(t,"")):""};return a(/^[;\s]*/),n}function u(){if(!o())return i("missing '{'");let t,e=l();for(;t=d();)e.push(t),e=e.concat(l());return r()?e:i("missing '}'")}function p(){n();const t=[];let e;for(;e=a(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),a(/^,\s*/);if(t.length)return{type:"keyframe",values:t,declarations:u()}}function m(){if(n(),"@"===t[0])return function(){let t=a(/^@([-\w]+)?keyframes\s*/);if(!t)return;const e=t[1];if(t=a(/^([-\w]+)\s*/),!t)return i("@keyframes missing name");const s=t[1];if(!o())return i("@keyframes missing '{'");let n,h=l();for(;n=p();)h.push(n),h=h.concat(l());return r()?{type:"keyframes",name:s,vendor:e,keyframes:h}:i("@keyframes missing '}'")}()||function(){const t=a(/^@supports *([^{]+)/);if(t)return{type:"supports",supports:zt(t[1]),rules:f()}}()||function(){if(a(/^@host\s*/))return{type:"host",rules:f()}}()||function(){const t=a(/^@media *([^{]+)/);if(t)return{type:"media",media:zt(t[1]),rules:f()}}()||function(){const t=a(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return{type:"custom-media",name:zt(t[1]),media:zt(t[2])}}()||function(){if(a(/^@page */))return{type:"page",selectors:c()||[],declarations:u()}}()||function(){const t=a(/^@([-\w]+)?document *([^{]+)/);if(t)return{type:"document",document:zt(t[2]),vendor:zt(t[1]),rules:f()}}()||function(){if(a(/^@font-face\s*/))return{type:"font-face",declarations:u()}}()||function(){const t=a(/^@(import|charset|namespace)\s*([^;]+);/);if(t)return{type:t[1],name:zt(t[2])}}()}function g(){const t=c()||[];return t.length||i("selector missing"),{type:"rule",selectors:t,declarations:u()}}function f(e){if(!e&&!o())return i("missing '{'");let s,a=l();for(;t.length&&(e||"}"!=t[0])&&(s=m()||g());)a.push(s),a=a.concat(l());return e||r()?a:i("missing '}'")}return{type:"stylesheet",stylesheet:{rules:f(!0),errors:s}}}(n,!0)),this.originalX=Number(a[1])||0,this.originalY=Number(a[2])||0,this.originalWidth=Number(a[3])||100,this.originalHeight=Number(a[4])||100,this.svg=t,this.rotationMatrix=new Q;const o=this.originalX+this.originalWidth/2,r=this.originalY+this.originalHeight/2;this.rotationMatrix.translate(o,r),this.rotationMatrix.rotate(z.A.deg2rad(this.state.rotation.value)),this.state.isFlipped.value&&this.rotationMatrix.scale(-1,1),this.rotationMatrix.translate(-o,-r),this.group=t.createElement("g"),this.originGroup=t.createElement("g"),t.addChild(this.group,this.originGroup),this.boundingBoxGroup=t.createElement("g"),t.addChild(this.originGroup,this.boundingBoxGroup),this.hasRotation&&(this.rotationGroup=t.createElement("g"),t.addChild(this.originGroup,this.rotationGroup));for(const t of s.children)this.addNode(this.hasRotation?this.rotationGroup:this.originGroup,t)}this.initializeBoundingBox(),this.computedBoundingBox||(this.computedBoundingBox=new h.A(this.originalX,this.originalY,this.originalWidth,this.originalHeight),this.computedRotatedBoundingBox=this.computedBoundingBox.clone().applyMatrix(this.rotationMatrix));const n=this.computedRotatedBoundingBox&&!this.computedRotatedBoundingBox.isEmpty()?this.computedRotatedBoundingBox:this.computedBoundingBox;if(n&&!n.isEmpty()?t.setAttributes(this.originGroup,{transform:`translate(${t.fixFloat(-n.x)}, ${t.fixFloat(-n.y)})`}):t.setAttributes(this.originGroup,{transform:`translate(${t.fixFloat(-this.originalX)}, ${t.fixFloat(-this.originalY)})`}),this.hasRotation&&t.setAttributes(this.rotationGroup,{transform:`matrix(${[...this.rotationMatrix.array].map((t=>this.svg.fixFloat(t))).join(", ")})`}),e){const t=Math.min((s-a.horizontal)/this.originalBoundingBox.w,(i-a.vertical)/this.originalBoundingBox.h);this.scale.set(t,t)}}addBox(t,e,s){!0===e?(this.computedBoundingBox=null,this.computedRotatedBoundingBox=null):!1!==e&&t&&(e.pad(-s/2),t.add(e))}isInBounds(t){return!1===t||t.x+t.w>=this.originalX&&t.y+t.h>=this.originalY&&t.x<=this.originalX+this.originalWidth&&t.y<=this.originalY+this.originalHeight}getBox(t){let e=t;for(;e;){if(e.properties&&e.properties.transform)return{box:!0,rotatedBox:!0};e="svg"===e.tagName.toLowerCase()?null:e.parentNode}const s=new h.A,i=new h.A;let a,n,o,l,c,d,u,p,m,g,f,y,v,b,x,w,S,A,k,B,C,M,T,E,I,N,P=Number.MAX_VALUE,O=Number.MAX_VALUE,$=-Number.MAX_VALUE,L=-Number.MAX_VALUE;switch(t.tagName.toLowerCase()){case"rect":s.set(Number(t.properties.x),Number(t.properties.y),Number(t.properties.width),Number(t.properties.height)),this.hasRotation&&i.copy(s).applyMatrix(this.rotationMatrix);break;case"circle":u=Number(t.properties.cx),p=Number(t.properties.cx),m=Number(t.properties.r),s.set(u-m,p-m,2*m,2*m),this.hasRotation&&(d=new Z.A(u,p),B=this.rotationMatrix.apply(d),i.set(B.x-m,B.y-m,2*m,2*m));break;case"ellipse":u=Number(t.properties.cx),p=Number(t.properties.cx),g=Number(t.properties.rx),f=Number(t.properties.ry),s.set(u-g,p-f,2*g,2*f),this.hasRotation&&(y=z.A.deg2rad(this.state.rotation.value),v=y+Math.PI/2,b=g*Math.cos(y),x=g*Math.sin(y),w=f*Math.cos(v),S=f*Math.sin(v),d=new Z.A(Number(t.properties.cx),Number(t.properties.cy)),B=this.rotationMatrix.apply(d),A=2*Math.sqrt(b*b+w*w),k=2*Math.sqrt(x*x+S*S),i.set(B.x-A/2,B.y-k/2,A,k));break;case"line":T=Number(t.properties.x1),E=Number(t.properties.y1),I=Number(t.properties.x2),N=Number(t.properties.y2),P=Math.min(T,I),O=Math.min(E,N),s.set(P,O,Math.max(T,I)-P,Math.max(E,N)-O),this.hasRotation&&(C=this.rotationMatrix.apply(new Z.A(T,E)),M=this.rotationMatrix.apply(new Z.A(I,N)),P=Math.min(C.x,M.x),O=Math.min(C.y,M.y),i.set(P,O,Math.max(C.x,M.x)-P,Math.max(C.y,M.y)-O));break;case"polygon":case"polyline":o=t.properties.points,l=[],o.replace(r.t4.PATH_VALUES,((t,e)=>{e&&l.push(Number(e))}));for(let t=0;t<l.length;t+=2)a=l[t],n=l[t+1],a<P&&(P=a),n<O&&(O=n),a>$&&($=a),n>L&&(L=n);if(s.set(P,O,$-P,L-O),this.hasRotation){P=Number.MAX_VALUE,O=Number.MAX_VALUE,$=-Number.MAX_VALUE,L=-Number.MAX_VALUE,d=new Z.A,B=new Z.A;for(let t=0;t<l.length;t+=2)d.set(l[t],l[t+1]),B=this.rotationMatrix.apply(d),B.x<P&&(P=B.x),B.y<O&&(O=B.y),B.x>$&&($=B.x),B.y>L&&(L=B.y);i.set(P,O,$-P,L-O)}break;case"path":c=R(t.properties.d),s.copy(q(c)),this.hasRotation&&i.copy(new at(c).applyMatrix(this.rotationMatrix).getBoundingBox());break;case"g":return{box:!1,rotatedBox:!1};default:return{box:!0,rotatedBox:!0}}return{box:s,rotatedBox:i}}addNode(t,e){let s=t;if(!e.tagName)return;const i=e.tagName.toLowerCase(),{box:a,rotatedBox:n}=this.getBox(e);if(this.validNodes.includes(i)&&(!0===a||this.isInBounds(a))){const o={};for(const[t,s]of Object.entries(e.properties))if(/:/.test(t)&&"xlink:href"!==t.toLowerCase());else if("path"===i&&"d"===t){let e=s;e=e.replace(r.t4.PATH_VALUES,((t,e)=>e?"0"===e||"1"===e?` ${e} `:` ${_t(Number(e))} `:e)).replace(/\s+/gm," ").replace(/\s?,\s?/gm,",").replace(/\s?([a-z])\s?/gim," $1"),o[t]=e}else"class"===t?o.styleFromClass=this.getInlineStyleFromClass(s,o):o[t]=s;o.styleFromClass&&(o.style=o.style?`${o.styleFromClass}${o.style}`:o.styleFromClass,delete o.styleFromClass),s=this.svg.createElement(e.tagName,o),this.elements.push(s);for(const t of e.children)if(/text/i.test(t.type)){const e=this.svg.createTextElement(t.value);this.svg.addChild(s,e),this.elements.push(e)}this.svg.addChild(t,s);const h=o["stroke-width"]?parseFloat(o["stroke-width"]):1;this.addBox(this.computedRotatedBoundingBox,n,h),this.addBox(this.computedBoundingBox,a,h)}for(const t of e.children)this.addNode(s,t)}relativeFitRectangle(t){const e=this.originalX+this.originalWidth/2,s=this.originalY+this.originalHeight/2,i=Math.max(Math.abs(e-t.x),Math.abs(e-(t.x+t.w))),a=Math.max(Math.abs(s-t.y),Math.abs(s-(t.y+t.h)));return new h.A(e-i,s-a,2*i,2*a)}initializeBoundingBox(){if(!this.boundingBox)if(this.computedBoundingBox&&!this.computedBoundingBox.isEmpty()?(this.computedBoundingBox=this.relativeFitRectangle(this.computedBoundingBox),this.boundingBox=new h.A(0,0,this.computedBoundingBox.w,this.computedBoundingBox.h)):this.boundingBox=new h.A(0,0,this.originalWidth,this.originalHeight),this.originalBoundingBox=this.boundingBox.clone(),this.hasRotation)if(this.computedRotatedBoundingBox&&!this.computedRotatedBoundingBox.isEmpty())this.computedRotatedBoundingBox=this.relativeFitRectangle(this.computedRotatedBoundingBox),this.boundingBox=new h.A(0,0,this.computedRotatedBoundingBox.w,this.computedRotatedBoundingBox.h);else{const t=this.boundingBox.applyMatrix(this.rotationMatrix);this.boundingBox=new h.A(0,0,t.w,t.h)}else this.computedRotatedBoundingBox=null}getInlineStyleFromClass(t,e){if(!this.styles||!this.styles.stylesheet||!this.styles.stylesheet.rules)return"";let s="";return this.styles.stylesheet.rules.forEach((i=>{i.selectors&&i.selectors.includes(`.${t}`)&&i.declarations.forEach((t=>{const i=t.property,a=t.value;switch(i){case"fill":case"stroke":case"stroke-width":e[i]=a;break;default:s+=`${i}:${a};`}}))})),s}transformStyle({text:t="",fillSolid:e="#000",fillTransparent:s="#fff"}={}){return t.replace(/(fill|stroke)\s*?:\s*?([#a-zA-Z0-9]+)/gim,((t,i,a)=>`${i}:${this.transformColor({color:a,fillSolid:e,fillTransparent:s})}`))}transformColor({color:t="",fillSolid:e="#000",fillTransparent:s="#fff"}){return/none/i.test(t)?"none":/white|#fff|#ffffff/i.test(t)?s:e}getElement({fillSolid:t="#000",fillTransparent:e="#fff"}={}){return this.updateTransform(),this.svg.setAttributes(this.group,{transform:`matrix(${[...this.worldMatrix.array].map((t=>this.svg.fixFloat(t))).join(", ")})`,fill:t,stroke:"none",strokeWidth:1}),this.elements.forEach((s=>{if(3===s.nodeType)return;if(!this.originalElementContents.get(s)){const t=this.svg.getAttribute(s,"style");this.originalElementContents.set(s,{textContent:s.textContent,fill:this.svg.getAttribute(s,"fill"),stroke:this.svg.getAttribute(s,"stroke"),style:t&&t.cssText?t.cssText:t})}const i=this.originalElementContents.get(s);s.textContent&&(s.textContent=this.transformStyle({text:i.textContent,fillSolid:t,fillTransparent:e})),i.fill&&this.svg.setAttributes(s,{fill:this.transformColor({color:i.fill,fillSolid:t,fillTransparent:e})}),i.stroke&&this.svg.setAttributes(s,{stroke:this.transformColor({color:i.stroke,fillSolid:t,fillTransparent:e})}),i.style&&this.svg.setAttributes(s,{style:this.transformStyle({text:i.style,fillSolid:t,fillTransparent:e})})})),this.group}getBoundingBox(){return this.initializeBoundingBox(),this.updateTransform(),this.worldBoundingBox}};const Ht=class extends v.A{constructor(t){var e,i,a,n;super(Object.assign({iconSVG:null,iconID:null,iconTerm:null,padding:new Tt.A,data:new S.A,id:new S.A,term:new S.A,isFlipped:(new M.A).setLabel("flip").enableInteraction(),rotation:new F.A(0,360,{interval:5}).setRealValueOnLabel().setLabel("rotation").enableInteraction()},t)),e=this,i="symbols",a=(t=>{const e=t.keys(),s=e.map(t);return e.reduce(((t,e,i)=>{const a=/(\.[\\/])?(.+?)\./.exec(e);return t[a?a[2]:e]=s[i],t}),{})})(s(4759)),(i="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i))?n:n+"")in e?Object.defineProperty(e,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[i]=a}async getPlaceholder(){if(!this.symbols)return null;const t=Object.keys(this.symbols),e=this.symbols[t[Math.floor(Math.random()*t.length)]],s=await fetch(e);return await s.text()}async createShape(){if(this.state.iconSVG&&this.state.data.set(this.state.iconSVG),this.state.iconID&&this.state.id.set(this.state.iconID),this.state.iconTerm&&this.state.term.set(this.state.iconTerm),!this.state.data.value){const t=await this.getPlaceholder();this.state.data.set(t),this.state.term.set("default")}return this.state.type=new Ut(Object.assign({svg:this.state.data.value},this.state)),this.state.saved&&(this.state.saved=null),this.state.type}};const Vt=class extends Pt{constructor(t){var e,s,i,a;super(Object.assign({active:(new M.A).randomize(.75).setLabel("enable").enableInteraction(),width:new T.A(.01,1,{interval:.005}).set(.5).enableInteraction().setOrder(0).setLabel("length"),margin:new T.A(0,1,{interval:.01}).randomizeBetweenOptions([.6,.7]).enableInteraction().setOrder(0).setLabel("margin"),strokeWidth:new T.A(.01,1,{interval:.001}).randomizeBetweenOptions([.04,.08]).setLabel("size").setOrder(1).enableInteraction(),strokeOffset:new ot.A(0)},t)),e=this,i=!1,(s="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s="hasStroke"))?a:a+"")in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i}createPath({width:t,height:e}){this.reset();const s=t*this.state.width.value,i=e*this.state.strokeWidth.value;this.path=new at(`M0,0 L${s},0 L${s},${i} L0,${i} Z`),this.boundingBox=new h.A(0,0,s,i)}};const qt=class extends Pt{constructor(t){var e,s,i,a;super(Object.assign({active:(new M.A).randomize(.35).setLabel("enable").enableInteraction(),width:new T.A(.01,1,{interval:.005}).set(.5).enableInteraction().setOrder(0).setLabel("length"),height:new T.A(.01,1,{interval:.01}).randomizeBetweenOptions([.15,.25]).enableInteraction().setOrder(0).setLabel("height"),detail:new T.A(0,1).randomizeBetween(.5,.85).enableInteraction().setOrder(0).setLabel("detail"),margin:new T.A(0,1,{interval:.01}).randomizeBetweenOptions([.65,.7]).enableInteraction().setOrder(0).setLabel("margin"),strokeWidth:new T.A(.01,.25,{interval:.001}).randomizeBetweenOptions([.02,.05]).setLabel("size").setOrder(1).enableInteraction(),strokeOffset:new ot.A(0)},t)),e=this,i=!0,(s="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s="hasStroke"))?a:a+"")in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i}drawPath({w:t,h:e,miter:s,num:i,s:a}){let n=.25*a,o=`M0,${e/2} L${n},0 `;for(let t=0;t<i-1;t++)o+=`L${n+.5*a},${e}, L${n+a},0 `,n+=a;o+=`L${n+.5*a},${e}, L${n+.75*a},${e/2}`,this.path=new at(o),this.path.translate(this.getStrokeWidth(),s),this.boundingBox=new h.A(0,0,t+2*this.getStrokeWidth(),e+2*s)}createPath({width:t,height:e}){this.reset(),this.setMaxStrokeWidth(2*e);const s=e*this.state.height.value,i=Math.max(t*this.state.width.value,s),a=Math.floor(Math.max(1,i/e*this.state.detail.value*4)),n=i/a,o=Math.atan(n/2/s),r=1/Math.sin(o)*this.getStrokeWidth()/2;this.drawPath({w:i,h:s,miter:r,num:a,s:n})}},Xt=class extends qt{constructor(t){super(Object.assign({strokeCap:new ot.A(2)},t))}drawPath({h:t,num:e,s}){let i=0,a=`M${i},${t/2} Q${i+.25*s},${t} ${i+.5*s},${t/2} T${i+s},${t/2} `;for(let n=1;n<e;n++)i+=s,a+=`T${i+.5*s},${t/2} T${i+s},${t/2} `;this.path=new at(a),this.boundingBox=this.path.getBoundingBox(),this.path.translate(this.getStrokeWidth()/2,this.getStrokeWidth()/2),this.boundingBox.h+=this.getStrokeWidth(),this.boundingBox.w+=this.getStrokeWidth()}};const Kt=class extends A.A{constructor(...t){var e,s,i,a;super(...t),e=this,i=[{name:"line",type:Vt},{name:"zigzag",type:qt},{name:"squiggle",type:Xt}],(s="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s="types"))?a:a+"")in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i}modify(t){let e=t.state.saved?t.state.saved.model:null;t.state.saved||t.state.forceLine&&(e="line");const s=e&&this.types.find((t=>t.name===e))?e:this.types[Math.floor(Math.random()*this.types.length)].name,i=new(0,this.types.find((t=>t.name===s)).type);t.state.saved||t.state.enabled||i.state.active.set(!1),t.state.model.set(s),t.state.type=i,t.state.models=this.types.map((t=>t.name))}},Zt=class extends v.A{constructor(t){super(Object.assign({model:new S.A,type:null,models:null,saved:null,forceLine:!1,enabled:!0},t)),this.addModifiers([Kt]),this.applyModifiers()}createShape(){return this.state.type}};function Yt(t={},e=[],s=null){let i=t;for(let t=0;t<e.length;t++){const a=e[t];if(!i||!i[a])return s;i=i[a]}return i}const Qt=class{constructor(){var t,e,s,i;t=this,s=[],(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e="layers"))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s}add(t,e=null){const s=this.getLayer(t);if(null===e)return void(s||this.layers.push(new Set([t])));const i=this.getLayer(e);if(s||i)if(s)if(i)if(s===i);else{[...i.values()].forEach((t=>{s.add(t)}));const t=this.layers.indexOf(i);-1!==t&&this.layers.splice(t,1)}else s.add(e);else i.add(t);else this.layers.push(new Set([t,e]))}getLayer(t){let e=null;for(let s=0;s<this.layers.length;s++){const i=this.layers[s];if(i.has(t)){e=i;break}}return e}hasContent(){return 0!==this.layers.length}};var Jt=s(8289);function te(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const ee=class extends v.A{constructor(t){const e=t.saved?.elements?.nameShadow?.type,s=Boolean(e?.active&&(e?.size||e?.offset));super(Object.assign({colors:new C.A({hue:t.hue,saved:t.saved?.colors}),fonts:new Bt({saved:t.saved?.fonts,texts:{text:t.text,sloganText:t.sloganText,symbolText:t.symbolText},hasNameShadow:s}),size:new T.A(0,1,{interval:.01}).set(1).setLabel("size").enableInteraction()},t)),te(this,"shapeName",null),te(this,"shapeNameShadow",null),te(this,"shapeSlogan",null),te(this,"shapeDivider",null),te(this,"hasDivider",!1),te(this,"isMonotone",!1),te(this,"isCancelled",!1),te(this,"startTime",0),te(this,"cancelOnRedraw",!1),te(this,"shapeMap",null),te(this,"layers",null)}getLinks(t,e){const s=new w.A;return e.forEach((e=>{s[e]=new At({saved:t.saved?.links?.[e]})})),s}updateAllLinks(t,e,s){const i=this.state.links;Object.keys(s).forEach((a=>{i[a].links.setOptions(s[a].links),t.saved?.links?.[a]?(t.saved.links[a].links&&e.includes(t.saved.links[a].links)?i[a].links.setValue(t.saved.links[a].links):i[a].links.setValue(s[a].default),delete t.saved.links[a].links):(i[a].links.setValue(s[a].default),s[a].linkedTo&&(i[a].linkedTo.set(s[a].linkedTo),i[a].active.set(!0)))}))}getEffects(t,e){const s=new w.A;return e.forEach((e=>{s[e]=new gt({saved:t.saved?.effects?.[e]})})),s}isLinked(t,e,s){if(e===s)return!1;const i=t.find((t=>t.find((t=>t.id===e))));return!!i&&Boolean(i.find((t=>t.id===s)))}applyAllModifiers(){this.state.fonts.logo=this,this.state.fonts.applyModifiers()}create(){}setBackground(t){if(t.setBackground(t.add("rect",{id:`background-${t.uuid("background")}`,x:t.viewBox[0],y:t.viewBox[1],width:t.viewBox[2],height:t.viewBox[3],fill:t.addColor(this.state.colors.state.background.color,{aspectRatio:t.viewBox[2]/t.viewBox[3],forceSingle:0===this.state.colors.state.background.gradient.range.value})})),this.isMonotone||!this.state.effects.background.state.type.state.active.value)return;const e=t.add("g",{mask:t.addBackgroundMask()}),s=Math.max(t.viewBox[2]/r.t4.CONTENT_WIDTH,t.viewBox[3]/r.t4.CONTENT_HEIGHT);if(this.state.effects.background.state.type.draw(t,{cx:r.t4.CONTENT_WIDTH/2,cy:r.t4.CONTENT_HEIGHT/2,x:0,y:0,width:r.t4.CONTENT_WIDTH,height:r.t4.CONTENT_HEIGHT,parent:e,useMask:!1,originalColor:this.state.colors.state.background,scale:s}),t.setBackgroundEffect(this.state.effects.background.state.type.group),this.state.effects.background.state.type.pattern&&t.setBackgroundEffectPattern(this.state.effects.background.state.type.pattern),t.backgroundEffect){const e=t.fixFloat(t.width/2),i=t.fixFloat(t.height/2);t.setAttributes(t.backgroundEffect,{transform:`translate(${e}, ${i}) scale(${t.fixFloat(s)}) translate(${-e}, ${-i})`})}}splitLines(t,e=8,s=!0){if(!t)return t;const i=Math.ceil(t.length/e);if(i<=1)return t;let a=e;const n=t.length/i;n<=e&&(a=n);const o=t.split(" ");if(o.some((t=>t.length<3))&&s)return t;const r=[];let h=0;for(let t=0;t<o.length;t++){let e=o[t];h+=e.length+1,h>=a&&(e+="|",h=0),r.push(e)}return r.join(" ").replace(/\| /g,"|").replace(/\|$/,"").toUpperCase()}createElements(){const t=void 0===this.textPosition||0===this.textPosition;this.applyAllModifiers();const e=/(brush|script|handwriting)/.test(this.state.fonts.state.name.category),s=/display/.test(this.state.fonts.state.name.category)||/^(7|8|9)00/.test(this.state.fonts.state.name.variant.value);this.state.elements.divider=new Zt({saved:Yt(this.state.saved,["elements","divider"],null),forceLine:this.hasSymbol||!t,enabled:!e&&!(this.hasSymbol||this.hasIcon)||this.hasTextInsideSymbol&&!this.hasIcon}),(!this.state.saved||this.state.saved&&/layout/.test(this.state.saved.variation))&&(/(script|handwriting)/.test(this.state.fonts.state.name.category)||(this.hasTextInsideSymbol?this.state.text=this.splitLines(this.state.text,8,!1):this.state.text=this.splitLines(this.state.text,16)),this.hasTextInsideSymbol&&(this.state.sloganText=this.splitLines(this.state.sloganText,12)));const i=this.state.colors.state,a=i.background.value.value>.65&&i.background.saturation.value<.35;this.state.elements.nameShadow=new St({saved:Yt(this.state.saved,["elements","nameShadow"],null),enabled:!e&&s&&!this.hasTextInsideSymbol&&t&&a});const n={font:this.state.fonts.state.name,text:new S.A(this.state.text).enableInteraction(),margin:new T.A(-.25,1,{interval:.01}).randomizeBetween(.2,.25).setLabel("margin").enableInteraction(),lining:new T.A(.75,4,{interval:.01}).set(1.25).enableInteraction().setLabel("lining"),hasBoxedText:(new M.A).randomize().setLabel("box").enableInteraction(),shadow:this.state.elements?.nameShadow,canCurve:(!this.state.saved||this.state.saved&&this.state.saved.variation)&&!e&&!this.state.elements.divider.state.enabled&&!this.hasTextInsideSymbol&&this.state.text&&this.state.text.length>6,curveEnabled:t};let o=.2;this.state.text&&this.state.sloganText&&(o=.4+.15*(1-Math.min(this.state.sloganText.length/this.state.text.length,1)));const r={font:this.state.fonts.state.slogan,text:new S.A(this.state.sloganText).enableInteraction(),sizeFactor:new T.A(.125,1).set(o).setLabel("size").setOrder(-1).enableInteraction(),margin:new T.A(0,2,{interval:.01}).randomizeBetween(.25,.5).setLabel("margin").enableInteraction(),lining:new T.A(.75,4,{interval:.01}).set(1.25).enableInteraction().setLabel("lining"),hasBoxedText:(new M.A).setLabel("box").enableInteraction(),canBeCircular:this.hasTextInsideSymbol};if((!this.state.saved||this.state.saved&&"font"===this.state.saved.variation)&&((this.hasTextInsideSymbol||!t&&/\|/.test(n.text.value))&&(n.text.set(n.text.value.toUpperCase()),n.hasBoxedText.set(!0)),t||n.margin.randomizeBetween(.2,.3)),(!this.hasSymbol&&!this.hasIcon||this.hasSymbol&&this.hasTextInsideSymbol&&!this.hasIcon)&&n.margin.enableInteraction(!1),this.state.elements.name=new jt(n),this.state.elements.slogan=new jt(r),(!this.state.saved||this.state.saved&&this.state.saved.variation)&&this.state.elements.slogan.state.isCircular.value){this.state.elements.slogan.state.margin.randomizeBetween(.75,1.25);const t=Math.floor((this.state.sloganText?.length||0)/2-1);r.text.set(this.splitLines(this.state.sloganText,t,!1)),this.state.elements.slogan.state.letterSpacing.set(.65*(0,Jt.A)(t/32,0,1)+.25)}this.hasIcon&&(this.state.elements.icon=new Ht({iconSVG:this.state.iconSVG,iconID:this.state.iconID,iconTerm:this.state.iconTerm,sizeFactor:new T.A(0,1).set(.5).setLabel("size").enableInteraction(),saved:Yt(this.state.saved,["elements","icon"],null)}))}alignText(){if(void 0===this.textPosition)return this.hasText&&this.shapeName.state.align.set(1),void(this.hasSlogan&&this.shapeSlogan.state.align.set(1));switch(this.textPosition){case 0:this.hasText&&this.shapeName.state.align.set(1),this.hasSlogan&&this.shapeSlogan.state.align.set(1);break;case 1:this.hasText&&this.shapeName.state.align.set(0),this.hasSlogan&&this.shapeSlogan.state.align.set(0)}}setPositions(t=[],{center:e=!1,verticalAxis:s=0,horizontalAxis:i=0}={}){let a=0,n=null,o=0,r=0;for(const i of t)if(i.shape&&i.enabled){const t=e?s-i.shape.width/2-i.shape.position.x:s;if(n){r=Math.max(r,0);let t=0;const e=i.marginTop<0?i.marginTop:Math.max(i.marginTop||0,o,!1===i.respectDescender?0:r);if(i.shape.hasCurve&&i.shape.isCurvingUpwards&&2*i.shape.worldCurveRadius>n.width){const s=Math.asin(n.worldBoundingBox.w/2/i.shape.worldCurveRadius),a=Math.cos(s)*i.shape.worldCurveRadius;t=Math.min(e,-(i.shape.worldCurvePosition.y+i.shape.worldCurveRadius-i.shape.worldBoundingBox.y)+(i.shape.worldCurveRadius-a)+e)}else if(n.hasCurve&&!n.isCurvingUpwards&&2*n.worldCurveRadius>i.shape.width){const s=Math.asin(i.shape.worldBoundingBox.w/2/n.worldCurveRadius),a=Math.cos(s)*n.worldCurveRadius;t=Math.min(e,-(n.worldBoundingBox.y+n.worldBoundingBox.h)+(n.worldCurvePosition.y-n.worldCurveRadius)+(n.worldCurveRadius-a)+e)}else t=e;a+=t,r-=t}i.x=t,i.y=a,a+=i.shape.height,r-=i.shape.height,i.marginBottom&&(o=i.marginBottom),n=i.shape}const h=e?0:i-a/2;for(let e=0;e<t.length;e++){const s=t[e];s.shape&&s.enabled&&s.shape.position.set(s.x-s.shape.boundingBox.x,h+s.y-s.shape.boundingBox.y)}}positionShapes(t){const e=this.hasText?this.shapeName.state.margin.value:this.shapeSlogan.state.margin.value;let s=t,i=0,a=0,n=0,o=0;this.hasText?o=this.shapeName.worldLineHeight:this.hasSlogan&&(o=this.shapeSlogan.worldLineHeight),i=t?(t.height+o)*this.shapeName.state.margin.value:this.shapeName.worldLineHeight*this.shapeName.state.margin.value,n=this.hasText?this.shapeName.worldLineHeight*(3*this.shapeDivider.state.margin.value-1.5):-this.shapeSlogan.worldLineHeight+(3*this.shapeDivider.state.margin.value-1.5),this.hasSlogan&&!this.hasSloganInCircle&&(a=this.shapeName.worldLineHeight*this.shapeSlogan.state.margin.value,this.hasText||(a+=i));const r=[this.shapeName,this.shapeSlogan];for(;!s;)s=r.shift();const h=void 0===this.textPosition||0===this.textPosition;this.setPositions([{shape:t,enabled:Boolean(t)&&h},{marginTop:i,shape:this.shapeName,enabled:this.hasText,respectDescender:!1},{marginTop:n,shape:this.shapeDivider,marginBottom:n,enabled:this.hasDivider,respectDescender:!1},{marginTop:a,shape:this.shapeSlogan,enabled:this.hasSlogan&&!this.hasSloganInCircle}],{center:h,verticalAxis:h?s.position.x+s.width/2:s.position.x+s.width+s.width*e,horizontalAxis:h?0:s.position.y+s.height/2})}getStrokeCap(t){return t.state.strokeCap?["butt","square","round"][t.state.strokeCap.value]:"square"}getStrokeJoin(t){return t.state.strokeCap?["miter","miter","round"][t.state.strokeCap.value]:"miter"}getOptimalSize(){const t=this.shapeGroup.width,e=this.shapeGroup.height,s=(Math.max(t,e)**2*2)**.5*.5,i=Math.min(t,e)/Math.max(t,e);return this.hasSymbol?this.hasTextInsideSymbol||!this.hasText&&!this.hasSlogan?1-(this.shapeSymbol.contentBox.w**2+this.shapeSymbol.contentBox.h**2)**.5*.5/(s/(2**.5)**.5)*.35:1-i**2*.35:this.hasIcon?1-i**2*.35:this.hasSlogan?.85*(1-i**2*.5):.85*(1-i**2*.75)}initContentDimensions(t,e=this.shapeGroup){t.setContentDimensions(e?.worldTrimBox||e.worldBoundingBox)}drawBoundingBoxes(t,e=this.shapeGroup){if(e&&e.state.shapes){e.worldBoundingBox&&!e.worldBoundingBox.isEmpty()&&t.add("rect",{x:e.worldBoundingBox.x,y:e.worldBoundingBox.y,width:e.worldBoundingBox.w,height:e.worldBoundingBox.h,fill:"none",stroke:"#48f",strokeWidth:2}),e.worldTrimBox&&!e.worldTrimBox.isEmpty()&&t.add("rect",{x:e.worldTrimBox.x,y:e.worldTrimBox.y,width:e.worldTrimBox.w,height:e.worldTrimBox.h,fill:"none",stroke:"#f48",strokeWidth:8});const s=e.getEnclosedCircle();return s&&t.add("circle",{cx:s.x,cy:s.y,r:s.r,fill:"none",stroke:"#fff",strokeWidth:2}),void e.state.shapes.forEach((e=>{this.drawBoundingBoxes(t,e)}))}e.typographicBox&&!e.typographicBox.isEmpty()&&t.add("rect",{x:e.worldTypographicBoundingBox.x,y:e.worldTypographicBoundingBox.y,width:e.worldTypographicBoundingBox.w,height:e.worldTypographicBoundingBox.h,fill:"none",stroke:"#84f",strokeWidth:2}),e.hasCurve&&(t.add("circle",{cx:e.worldCurvePosition.x,cy:e.worldCurvePosition.y,r:e.worldCurveRadius,fill:"none",stroke:"#84f",strokeWidth:2}),e.worldInnerCurveRadius&&(t.add("circle",{cx:e.worldCurvePosition.x,cy:e.worldCurvePosition.y,r:e.worldInnerCurveRadius,fill:"none",stroke:"#84f",strokeWidth:2}),t.add("path",{d:`M${e.worldCurvePosition.x},${e.worldCurvePosition.y} L${e.worldCurvePosition.x+Math.cos(e.curveAngle)*e.worldInnerCurveRadius},${e.worldCurvePosition.y+Math.sin(e.curveAngle)*e.worldInnerCurveRadius}`,fill:"none",stroke:"#84f",strokeWidth:2}))),e.worldBoundingBox&&!e.worldBoundingBox.isEmpty()&&t.add("rect",{x:e.worldBoundingBox.x,y:e.worldBoundingBox.y,width:e.worldBoundingBox.w,height:e.worldBoundingBox.h,fill:"none",stroke:"#f84",strokeWidth:4}),e.worldContentBox&&!e.worldContentBox.isEmpty()&&t.add("rect",{x:e.worldContentBox.x,y:e.worldContentBox.y,width:e.worldContentBox.w,height:e.worldContentBox.h,fill:"none",stroke:"#f48",strokeWidth:2}),e.worldEffectBox&&!e.worldEffectBox.isEmpty()&&t.add("rect",{x:e.worldEffectBox.x,y:e.worldEffectBox.y,width:e.worldEffectBox.w,height:e.worldEffectBox.h,fill:"none",stroke:"#8f4",strokeWidth:2})}getAllElements(){const t=this.state.links,e=this.state.colors.state,s=this.state.effects,i=[];return Object.keys(t).filter((e=>t[e]instanceof w.A)).forEach((t=>{i.push({color:e[t],effect:s[t],id:t})})),i}getSizeFactor(t){const e=1-t;return.03125+(1/(1+(e/(1-e))**-.5))**(Math.log(.96875/31.96875)/Math.log(.5))*31.96875}getShapeUnderPosition(t,e,s,i){const a=[this.shapeIcon,this.shapeLetter,this.shapeName,this.shapeDivider,this.shapeSlogan,this.shapeSymbolContent,this.shapeSymbol];for(let n=0;n<a.length;n++){const o=a[n];if(o&&o.worldBoundingBox.contains(t,e,s)&&i(o))return o}return null}addDefinitionFromShape(t,e,s={}){return t.addDefinition(t.createElement("path",Object.assign({d:t.getPathDescriptionFromShape(e)},s)))}getLayerFromID(t){return this.layers.find((e=>0!==e.filter((e=>e.id===t)).length))}removeFromLayers(t,e){for(let s=0;s<t.length;s++)t[s]=t[s].filter((t=>t.id!==e));return t.reduce(((t,e)=>(e.length&&t.push(e),t)),[])}createLayer(t){return{color:this.state.colors.state[t],effect:this.state.effects[t],layers:[],id:t}}addLayerToID(t,e,s){t.forEach((t=>{const i=t.find((t=>t.id===e));i&&(i.layers.some((t=>t[0].id===s))||i.layers.push([this.createLayer(s)]))}))}isActiveLayer(t){return"divider"!==t||this.shapeMap.get(t).state.active.value}getLayers(t){const e=new Qt;t.forEach((t=>{const s=this.state.links[t].linkedTo.value;this.shapeMap.get(s)?s&&this.state.links[t].active.value?this.shapeMap.get(t)&&this.shapeMap.get(s)&&e.add(t,s):this.shapeMap.get(t)&&e.add(t):(this.state.links[t].active.set(!1),e.add(t))}));const s=[];return e.layers.forEach((t=>{const e=[];[...t.values()].forEach((t=>{this.shapeMap.get(t)&&e.push(this.createLayer(t))})),e.length&&s.push(e)})),s}sortLayers(t){return t.sort(((t,e)=>Math.max(...t.map((t=>this.ids.indexOf(t.id))))-Math.max(...e.map((t=>this.ids.indexOf(t.id)))))),t.forEach((t=>{t.sort(((t,e)=>this.ids.indexOf(t.id)-this.ids.indexOf(e.id)))})),t}renderLayers(t,e,s,i){s.forEach(((s,a)=>{const n=s.reduce(((t,e)=>{const s=this.shapeMap.get(e.id);let i=null;return s.getEffectBox?(i=s.getEffectBox(),i.isEmpty()&&(i=s.getBoundingBox())):i=s.getBoundingBox(),i.isEmpty()?t:t.add(i)}),new h.A),o=t.addColor(s[0].color.color,{aspectRatio:n.w/n.h}),r=s[0].effect,l=s.reduce(((e,s)=>{const a=this.shapeMap.get(s.id),n=a.hasStroke?{strokeWidth:t.fixNumber(a.worldStrokeWidth),stroke:"#fff"}:{fill:"#fff",stroke:"#fff"},o=i.get(s.id);if(o){const s=t.createElementFromDefinition(o,n);e.push(s)}return e}),[]);if(l.length){const a=t.addChild(e,t.createElement("g",{mask:t.addMask({fill:"#000",fillBox:n,elements:l})}));t.addChild(a,t.createElement("rect",{x:t.fixNumber(n.x),y:t.fixNumber(n.y),width:t.fixNumber(n.w),height:t.fixNumber(n.h),fill:o})),!this.isMonotone&&r&&r.state.type.draw(t,{x:n.x,y:n.y,width:n.w,height:n.h,cx:n.x+n.w/2,cy:n.y+n.h/2,parent:a,useMask:!1,originalColor:s[0].color}),s[0].layers?.length&&this.renderLayers(t,a,s[0].layers,i)}}))}cancelRendering(){Dt.A.removeAll(this),this.isCancelled=!0}async startRendering(t={}){Dt.A.removeAll(this),this.cancelOnRedraw=Boolean(t.cancelOnRedraw),this.startTime=Date.now()}async addRenderTask(t){if(this.isCancelled&&this.cancelOnRedraw)throw new B("canceled draw");return Date.now()-this.startTime>1/r.UI.MIN_FPS*1e3&&await Dt.A.wait(this),t()}async createShapes(){const t=[["shapeName",this.state.elements.name],["shapeSlogan",this.state.elements.slogan],["shapeDivider",this.state.elements.divider]];for(const e of t)this[e[0]]=await e[1].createShape()}},se=class extends A.A{activate(t){t.state.type.state.hole=new w.A({active:(new M.A).randomize(.1).setLabel("enable").enableInteraction(),position:new T.A(.65,.99,{interval:.001}).randomizeBetween(.85,.95).setLabel("size").enableInteraction()}),t.state.saved||(t.state.hasStroke||t.state.hasAspectRatio)&&t.state.type.state.hole.active.set(!1)}modify(t){const e=t.state.type;if(!e.state.hole.active.value)return;let s,i;null===e.contentBox?(s=e.state.width,i=e.state.height):(s=e.contentBox.w,i=e.contentBox.h);const a=Math.min(s,i),n=Math.sqrt(a**2+a**2)/2*e.state.hole.position.value;e.addCircle(0,0,n,!0),e.contentBox=h.A.insideCircle(0,0,n)}},ie=class extends A.A{activate(t){t.state.type.state.ring=new w.A({active:(new M.A).randomize(.25).setLabel("enable").enableInteraction(),position:new T.A(.65,.99).randomizeBetween(.85,.95).setLabel("ring position").enableInteraction(),width:new T.A(.01,.25,{interval:.001}).randomizeBetween(.02,.05).setLabel("width").enableInteraction()}),t.state.saved||(t.state.hasStroke||t.state.hasAspectRatio)&&t.state.type.state.ring.active.set(!1)}modify(t){const e=t.state.type;if(!e.state.ring.active.value)return;const s=e.state.width,i=e.state.height,a=Math.min(s,i),n=Math.sqrt(a**2+a**2)/2,o=n*e.state.ring.position.value,r=o-n*e.state.ring.width.value;e.addCircle(0,0,o,!0),e.addCircle(0,0,r,!1),e.contentBox=h.A.insideCircle(0,0,r)}};const ae=class extends Pt{constructor(...t){var e,s,i,a;super(...t),e=this,i=null,(s="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s="component"))?a:a+"")in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i}createPath({width:t=100,height:e=100}){this.reset(),this.path=new at,this.state.width=t,this.state.height=e,this.component.applyModifiers()}},ne=class extends v.A{constructor(t){if(super(Object.assign({type:new ae,hasStroke:!1,hasAspectRatio:!1,saved:null},t)),this.state.saved){const t=[["ring",ie],["hole",se]].reduce(((t,e)=>(this.state.saved.type[e[0]]&&t.push(e[1]),t)),[]);this.addModifiers(t)}else this.addModifiers([ie,se]);this.state.type.component=this}createShape(){return this.state.type}};function oe(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const re=class{constructor(){oe(this,"GRADIENTS",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),oe(this,"F2",.5*(Math.sqrt(3)-1)),oe(this,"G2",(3-Math.sqrt(3))/6),oe(this,"G22",null),oe(this,"permutations",null),oe(this,"rng",Math),oe(this,"numOctaves",1),oe(this,"persistence",.5),oe(this,"octaveFrequency",null),oe(this,"octavePersistence",null),oe(this,"maxPersistence",null),this.G22=2*this.G2-1,this.setPermutations(),this.setOctaves()}setOctaves(t=1,e=.5){this.numOctaves=t,this.persistence=e,this.octaveFrequency=[],this.octavePersistence=[],this.maxPersistence=0;for(let t=0;t<this.numOctaves;t++){const e=Math.pow(2,t),s=Math.pow(this.persistence,t);this.maxPersistence+=s,this.octaveFrequency.push(e),this.octavePersistence.push(s)}this.maxPersistence=1/this.maxPersistence}dot2(t,e,s){return t[0]*e+t[1]*s}setPermutations(){const t=[];for(let e=0;e<256;e++)t[e]=Math.floor(256*this.rng.random());this.permutations=[];for(let e=0;e<512;e++)this.permutations[e]=t[255&e]}noise2d(t,e){const s=(t+e)*this.F2,i=Math.floor(t+s),a=Math.floor(e+s),n=(i+a)*this.G2,o=t-(i-n),r=e-(a-n);let h,l;o>r?(h=1,l=0):(h=0,l=1);const c=o-h+this.G2,d=r-l+this.G2,u=o+this.G22,p=r+this.G22,m=255&i,g=255&a;let f,y,v,b=.5-o*o-r*r;if(b<0)f=0;else{b*=b;const t=this.permutations[m+this.permutations[g]]%12;f=b*b*this.dot2(this.GRADIENTS[t],o,r)}let x=.5-c*c-d*d;if(x<0)y=0;else{x*=x;const t=this.permutations[m+h+this.permutations[g+l]]%12;y=x*x*this.dot2(this.GRADIENTS[t],c,d)}let w=.5-u*u-p*p;if(w<0)v=0;else{w*=w;const t=this.permutations[m+1+this.permutations[g+1]]%12;v=w*w*this.dot2(this.GRADIENTS[t],u,p)}return 70*(f+y+v)}noise(t,e){let s,i,a=0;for(let n=0;n<this.numOctaves;n++)s=this.octaveFrequency[n],i=this.octavePersistence[n],a+=i*this.noise2d(s*t,s*e);return.5*(a*this.maxPersistence+1)}setRng(t){this.rng=t,this.setPermutations()}setRandomValuesOfRng(t){this.rng=new class{constructor(t){this.values=t,this.index=-1}random(){return this.index=(this.index+1)%this.values.length,this.values[this.index]}reset(){this.index=-1}}(t.slice()),this.setPermutations()}resetRNG(){this.rng.reset()}};function he(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const le=(0,l.Lr)(3),ce=class extends Pt{constructor(t){super(Object.assign({rotation:new F.A(0,360,{interval:5}).randomize().setRealValueOnLabel().enableInteraction().setOrder(0).setLabel("rotation"),variation:new T.A(0,1).randomizeBetween(.25,.5).enableInteraction().setOrder(3).setLabel("variation"),detail:new T.A(0,1).randomizeBetweenOptions([.01,.25,.5]).enableInteraction().setOrder(3).setLabel("detail"),random:new O((()=>{this.initRandomValues()})).enableInteraction().setOrder(4).setLabel("randomize"),cornerType:new ot.A(1),randomValuesForRadius:new P},t)),he(this,"points",null),he(this,"simplexNoise",null),this.state.saved||(this.initRandomValues(),this.state.hasStroke.set(!1))}initRandomValues(){this.state.randomValuesForRadius.clear();for(let t=0;t<256;t++){const t=le(Math.random());this.state.randomValuesForRadius.add(1===t?1-`1e-${r.t4.PRECISION}`:t)}this.initNoise()}initNoise(){this.state.randomValuesForRadius.value.length||this.initRandomValues(),this.simplexNoise=new re,this.simplexNoise.setRandomValuesOfRng(this.state.randomValuesForRadius.value.map(Number))}createPath({width:t,height:e}){this.reset(),this.initNoise();const s=this.state.detail.value,i=z.A.deg2rad(this.state.rotation.value),a=Math.floor(5+s**2*1019),n=Math.min(t,e)/2;let o=Number.MAX_VALUE,r=-Number.MAX_VALUE;this.points=[],this.simplexNoise.setOctaves(16-Math.floor(8*s),.5+.25*s),this.simplexNoise.resetRNG();for(let t=0;t<a;t++){const e=t/a*Math.PI*2,h=.4+.1*s,l=this.simplexNoise.noise(Math.cos(e)*h,Math.sin(e)*h),c=(1+this.state.variation.value*l)*n;o=Math.min(o,c),r=Math.max(r,c),this.points.push(new Z.A(Math.cos(e+i)*c,Math.sin(e+i)*c))}0===this.state.cornerType.value?this.path=this.getLinearPath():this.path=this.getSmoothPath();const l=Math.cos(Math.PI/a),c=o*l,d=r*l;this.symbolBox=new h.A(-d,-d,2*d,2*d),this.contentBox=h.A.insideCircle(0,0,c-this.getStrokeOffset()/4)}getLinearPath(){const t=this.points.map(((t,e)=>[0===e?"M":"L",t.x,t.y]));return t.push("Z"),new at(t)}getSmoothPath(){const t=this.points.length,e=[],s=[];for(let i=0;i<=t;i++){const a=this.points[i%t],n=this.points[(i+1)%t],o=new Z.A(a.x+.5*(n.x-a.x),a.y+.5*(n.y-a.y));s.push(o),0===i?e.push(["M",o.x,o.y]):e.push(["Q",a.x,a.y,o.x,o.y])}return e.push("Z"),new at(e)}};function de(t,e,s){if(t<=0||e<=0)return{w:0,h:0};const i=Math.max(t,e),a=Math.min(t,e),n=Math.abs(Math.sin(s)),o=Math.abs(Math.cos(s));let r=0,h=0;if(a<=2*n*o*i||Math.abs(n-o)<1e-10){const s=.5*a;t>=e?(r=s/n,h=s/o):(r=s/o,h=s/n)}else{const s=o*o-n*n;r=(t*o-e*n)/s,h=(e*o-t*n)/s}return{w:r,h}}const ue=class extends Pt{constructor(t){super(Object.assign({rotation:new F.A(0,360,{interval:5}).randomizeBetweenOptions([0,180]).setRealValueOnLabel().setOrder(0).setLabel("rotation").enableInteraction(),aspectRatio:new T.A(0,1,{interval:.05}).set(0).enableInteraction().setOrder(1).setLabel("form")},t)),.5!==this.state.aspectRatio.value&&this.state.rotation.set(0),this.state.saved||this.state.hasTextInside||this.state.aspectRatio.set(0)}createPath({width:t,height:e}){this.reset();const s=this.state.rotation.value,i=z.A.deg2rad(s),a=1-.75*this.state.aspectRatio.value,n=Math.min(t,e)/2,o=Math.cos(i)*n,r=Math.sin(i)*n;this.path=new at([["M",o,r],["A",n,n*a,s,1,0,-o,-r],["A",n,n*a,s,1,0,o,r],["Z"]]);const l=de(t,e*a,i),c=this.getStrokeOffset()/2,d=Math.min(t,e*a)/2,u=h.A.insideCircle(0,0,d-c/2),p=h.A.insideEllipse(0,0,l.w/2-c,l.h/2-c);this.contentBox=u.w*u.h>p.w*p.h?u:p}};function pe(t){const e=[],s=new Z.A;for(let i=0;i<t.length;i++){/h/i.test(t[i][0])?e.push(["L",t[i][1],s.y]):/v/i.test(t[i][0])?e.push(["L",s.x,t[i][1]]):e.push(t[i]);const a=e[i].length;a>2&&s.set(e[i][a-2],e[i][a-1])}return e}function me(t,e,s,{singleRadius:i=!1}={}){const a=Y(t),n=[];let o=e;if(i){const t=[];a.forEach((e=>{tt(pe(e),((e,s,i,a)=>{t.push(function(t,e,s){const i=t.x-e.x,a=t.y-e.y,n=t.x-s.x,o=t.y-s.y,r=(Math.atan2(a,i)-Math.atan2(o,n))/2,h=Math.abs(Math.tan(r)),l=ge(i,a),c=ge(n,o);return Math.min(l,c)/2*h}(s,i,a))}))})),o=Math.min(e,Math.min(...t))}return a.forEach((t=>{const e=pe(t),i=[],a=e[0];tt(e,((t,e,a,n,r)=>{const h=s(o,e,a,n,r);i.push(...h)}),(t=>{i.push(t)})),/m/i.test(a[0])&&!/m/i.test(i[0][0])&&i.unshift(a),n.push(...i)})),n}function ge(t,e){return Math.sqrt(t*t+e*e)}const fe=class extends Pt{constructor(t){super(Object.assign({cornerType:new E.A([0,1,2,3]).randomizeBetweenOptions([0,1,3]).enableInteraction().setLabel("corners",["round","curved","cut off","super","flower"]),cornerRadius:new T.A(0,1).randomizeBetweenOptions([0,.05,.125,.25,.5,.75,1]).enableInteraction().setLabel("corner size")},t))}applyCorners(){const t=this.state.cornerRadius.value,e=this.state.hasStroke.value;let s=null;if(2===this.state.cornerType.value){const e=[];if(tt(this.path.data,((t,s,i,a)=>{const n=Math.abs(z.A.getAngleBetweenPoints(i,s,a));n&&e.push(n)})),this.minAngle=Math.min(...e)||0,!t)return;this.minAngle=Math.PI-(Math.PI/2-this.minAngle/2)}switch(this.state.cornerType.value){case 0:s=this.path.getMaxRadius()*t,this.path.data=function(t,e){const s=new Z.A,i=new Z.A;return me(t,e,((t,e,a,n,o)=>{const r=z.A.getAngleBetweenPoints(a,e,n)/2,h=et(a,e,n)?1:-1,l=t/Math.tan(r)*h,c=Math.atan2(e.y-a.y,e.x-a.x),d=Math.atan2(e.y-n.y,e.x-n.x);return s.set(e.x+Math.cos(c)*l,e.y+Math.sin(c)*l),i.set(e.x+Math.cos(d)*l,e.y+Math.sin(d)*l),[[0===o?"M":"L",s.x,s.y],["A",t,t,0,0,1===h?1:0,i.x,i.y]]}))}(this.path.data,s);break;case 1:if(s=this.path.getMaxCurveRadius()*t,e&&s<5)return;this.path.data=function(t,e){const s=new Z.A,i=new Z.A,a=me(t,e,((t,e,a,n,o)=>{const r=z.A.getAngleBetweenPoints(a,e,n)/2,h=-Math.abs(t/Math.sin(r)),l=et(a,e,n)?1:-1,c=Math.atan2(e.y-a.y,e.x-a.x)+r;return s.set(e.x+Math.cos(c)*(h+t),e.y+Math.sin(c)*(h+t)),i.set(s.x+Math.cos(c+Math.PI/2*l)*-t,s.y+Math.sin(c+Math.PI/2*l)*-t),[0===o?["C",0,0,i.x,i.y,s.x,s.y]:["S",i.x,i.y,s.x,s.y]]}));return a[0][1]=s.x,a[0][2]=s.y,a[1][1]=s.x+(s.x-i.x),a[1][2]=s.y+(s.y-i.y),a}(this.path.data,s);break;case 2:s=this.path.getMaxRadius()*t,this.path.data=function(t,e){const s=new Z.A,i=new Z.A;return me(t,e,((t,e,a,n,o)=>{const r=z.A.getAngleBetweenPoints(a,e,n)/2,h=-(Math.abs(t/Math.sin(r))-t)/Math.cos(r),l=Math.atan2(e.y-a.y,e.x-a.x),c=Math.atan2(e.y-n.y,e.x-n.x);return s.set(e.x+Math.cos(l)*h,e.y+Math.sin(l)*h),i.set(e.x+Math.cos(c)*h,e.y+Math.sin(c)*h),[[0===o?"M":"L",s.x,s.y],["L",i.x,i.y]]}))}(this.path.data,s);break;case 3:s=this.path.getMaxRadius()*t,this.path.data=function(t,e,s=.25){const i=new Z.A,a=new Z.A,n=new Z.A,o=new Z.A;return me(t,e,((t,e,r,h,l)=>{const c=z.A.getAngleBetweenPoints(r,e,h)/2,d=et(r,e,h)?1:-1,u=t/Math.tan(c)*d,p=Math.atan2(e.y-r.y,e.x-r.x),m=Math.atan2(e.y-h.y,e.x-h.x);return i.set(e.x+Math.cos(p)*u,e.y+Math.sin(p)*u),a.set(e.x+Math.cos(m)*u,e.y+Math.sin(m)*u),n.set(e.x+Math.cos(p)*u*s,e.y+Math.sin(p)*u*s),o.set(e.x+Math.cos(m)*u*s,e.y+Math.sin(m)*u*s),[[0===l?"M":"L",i.x,i.y],["C",n.x,n.y,o.x,o.y,a.x,a.y]]}))}(this.path.data,s);break;case 4:s=this.path.getMaxCurveRadius()*t,this.path.data=function(t,e){const s=new Z.A,i=new Z.A,a=new Z.A,n=new Z.A,o=me(t,e,((t,e,o,r)=>{const h=z.A.getAngleBetweenPoints(o,e,r)/2,l=Math.atan2(e.y-o.y,e.x-o.x)+h,c=Math.abs(t/Math.sin(h));n.copy(a),s.set(e.x+Math.cos(l)*-(c-t),e.y+Math.sin(l)*-(c-t));const d=et(o,e,r)?1:0;return i.set(s.x+Math.cos(l-Math.PI/2)*t*d,s.y+Math.sin(l-Math.PI/2)*t*d),a.set(s.x+Math.cos(l+Math.PI/2)*t*d,s.y+Math.sin(l+Math.PI/2)*t*d),[["C",n.x,n.y,i.x,i.y,s.x,s.y]]}));return o[0][1]=s.x,o[0][2]=s.y,o[1][1]=a.x,o[1][2]=a.y,o}(this.path.data,s)}}};const ye=class extends fe{constructor(t){var e,s,i,a;super(Object.assign({rotation:new F.A(0,360,{interval:5}).weightedRandomizeBetweenOptions([0,45],[8,1]).setRealValueOnLabel().setOrder(0).setLabel("rotation").enableInteraction(),aspectRatio:new T.A(0,1,{interval:.05}).weightedRandomizeBetweenOptions([0,.5],[8,1]).enableInteraction().setOrder(1).setLabel("form")},t)),e=this,i=null,(s="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s="points"))?a:a+"")in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i,.5!==this.state.aspectRatio.value&&this.state.rotation.set(0),this.state.saved||(this.state.hasTextInside?this.state.rotation.set(0):this.state.aspectRatio.set(0))}createPath({width:t,height:e}){this.reset(),this.points=[];const s=z.A.deg2rad(this.state.rotation.value),i=1-.75*this.state.aspectRatio.value,a=Math.min(t,e*i)/2,n=t/2,o=e/2*i,l=de(t,e*i,s);this.setMaxStrokeWidth((n**2+o**2)**.5*2*r.t4.MAX_STROKE_WIDTH);const c=this.state.hasStroke.value?this.maxStroke*(this.state.strokeOffset.value/2):0,d=h.A.insideCircle(0,0,a-c/2),u=h.A.insideEllipse(0,0,l.w/2-c/2,l.h/2-c/2);this.contentBox=d.w*d.h>u.w*u.h?d:u,this.path=new at(`M${-n},${-o} L${n},${-o} L${n},${o} L${-n},${o}Z`),this.path.rotate(s),this.applyCorners()}};function ve(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const be=class extends fe{constructor(t){super(Object.assign({rotation:new F.A(0,360,{interval:5}).set(0).setRealValueOnLabel().setOrder(0).setLabel("rotation").enableInteraction(),numPoints:new F.A(4,50).randomizeBetweenOptions([5,6,8,16,32]).setRealValueOnLabel().enableInteraction().setOrder(1).setLabel("spikes"),innerRadiusFactor:new T.A(.05,1).randomizeBetween(.1,.5).enableInteraction().setOrder(2).setLabel("inset")},t)),ve(this,"points",null),ve(this,"symbolBox",null),0!==this.state.innerRadiusFactor.value&&(this.state.cornerType.add(4),this.state.cornerType.randomizeBetweenOptions([0,1,3,4])),this.state.saved||this.state.hasStroke.set(!1)}createPath({width:t,height:e}){this.reset();const s=.5*(1-this.state.innerRadiusFactor.value)+.5;this.points=[];const i=z.A.deg2rad(this.state.rotation.value-(4===this.state.numPoints.value?45:90)),a=Math.min(t,e)/2,n=0!==this.state.innerRadiusFactor.value,o=n?2*this.state.numPoints.value:this.state.numPoints.value;let l=1;n&&(l=Math.cos(2*Math.PI/o));for(let a=0;a<o;a++){const n=a%2==0?1:s*l,r=a/o*Math.PI*2+i,h=new Z.A(Math.cos(r)*t/2*n,Math.sin(r)*e/2*n);this.points.push(h)}const c=-z.A.getAngleBetweenPoints(this.points[this.points.length-1],this.points[0],this.points[1]),d=z.A.getAngleBetweenPoints(this.points[0],this.points[1],this.points[2]),u=Math.cos(Math.PI/o),p=a*s*(0===this.state.innerRadiusFactor.value?u:l);this.setMaxStrokeWidth(Math.sqrt(t**2+e**2)*r.t4.MAX_STROKE_WIDTH);const m=this.state.hasStroke.value,g=2===this.state.cornerType.value&&0===this.state.cornerRadius.value,f=m?this.maxStroke*(this.state.strokeWidth.value+this.state.strokeOffset.value/2):0,y=m&&g?1/Math.sin(c/2):1,v=m&&g&&n?1/Math.sin(d/2):1;this.state.numPoints.value>3?this.symbolBox=new h.A(-t/2,-e/2,t,e).pad(-f*(y-1)/2):this.equalBoundarySpace=1-(1-2**.5/2),this.path=new at(`${this.points.map(((t,e)=>`${0===e?"M":"L"}${t.x}, ${t.y}`))}Z`),this.applyCorners(),this.contentBox=h.A.insideCircle(0,0,p-this.getStrokeOffset()/4*v)}},xe=class extends be{constructor(t){super(Object.assign({innerRadiusFactor:new ot.A(0),numPoints:new ot.A(3)},t))}},we=class extends be{constructor(t){super(Object.assign({numPoints:new F.A(5,8).set(6).enableInteraction().setRealValueOnLabel().setLabel("sides"),innerRadiusFactor:new ot.A(0)},t)),this.state.cornerType.randomizeBetweenOptions([0,1]),this.state.cornerRadius.randomizeBetweenOptions([0,.05,.125,.25,.5])}},Se=class extends fe{constructor(t){super(Object.assign({rotation:new F.A(0,360,{interval:5}).randomizeBetweenOptions([0,180]).setRealValueOnLabel().setOrder(0).setLabel("rotation").enableInteraction(),cornerType:new ot.A(0),cornerRadius:new ot.A(0),doubleDrop:(new M.A).setLabel("double drop").setOrder(1).enableInteraction(),dropFactor:new T.A(0,1).randomizeBetween(.15,.35).enableInteraction().setOrder(2).setLabel("drop")},t))}createPath({width:t,height:e}){this.reset();const s=z.A.deg2rad(this.state.rotation.value),i=Math.min(t,e)/2,a=this.state.doubleDrop.value,n=(1.2+2*this.state.dropFactor.value)*i,o=new Z.A(Math.cos(s-Math.PI/2)*n,Math.sin(s-Math.PI/2)*n),r=new Z.A(Math.cos(s)*i,Math.sin(s)*i),l=new Z.A(Math.cos(s+Math.PI)*i,Math.sin(s+Math.PI)*i),c=a?i/Math.sqrt(2)*(1+this.state.dropFactor.value):i/Math.sqrt(2),d=new Z.A(r.x+Math.cos(s-Math.PI/2)*c,r.y+Math.sin(s-Math.PI/2)*c),u=new Z.A(l.x+Math.cos(s-Math.PI/2)*c,l.y+Math.sin(s-Math.PI/2)*c);if(a){const t=new Z.A(r.x+Math.cos(s+Math.PI/2)*c,r.y+Math.sin(s+Math.PI/2)*c),e=new Z.A(l.x+Math.cos(s+Math.PI/2)*c,l.y+Math.sin(s+Math.PI/2)*c),i=new Z.A(Math.cos(s+Math.PI/2)*n,Math.sin(s+Math.PI/2)*n);this.path=new at([`M${o.x},${o.y}`,`Q${d.x},${d.y},${r.x},${r.y}`,`Q${t.x},${t.y},${i.x},${i.y}`,`Q${e.x},${e.y},${l.x},${l.y}`,`Q${u.x},${u.y},${o.x},${o.y}`,"Z"].join(" "))}else this.path=new at([`M${o.x},${o.y}`,`Q${d.x},${d.y},${r.x},${r.y}`,`A${i},${i} 0 1 1 ${l.x},${l.y}`,`Q${u.x},${u.y},${o.x},${o.y}`,"Z"].join(" "));this.contentBox=h.A.insideCircle(0,0,i-this.getStrokeOffset()/4)}};const Ae=class extends fe{constructor(t){var e,s,i,a;super(Object.assign({rotation:new F.A(0,360,{interval:5}).randomizeBetweenOptions([0,180]).setRealValueOnLabel().setOrder(0).setLabel("rotation").enableInteraction(),size:new T.A(0,1).randomize().enableInteraction().setOrder(1).setLabel("form"),position:new T.A(0,1).set(1).enableInteraction().setOrder(2).setLabel("inset")},t)),e=this,i=null,(s="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s="points"))?a:a+"")in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i,t.saved||(this.state.cornerType.randomizeBetweenOptions([0,2]),this.state.cornerRadius.randomizeBetweenOptions([0,.05,.125,.25]))}createPath({width:t,height:e}){this.reset(),this.points=[];const s=.25*(1-this.state.size.value)*t,i=.25*this.state.size.value*e,a=.5*this.state.position.value*(e-2*i);let n,o;this.points=[new Z.A(t-s,i+a),new Z.A(t/2,e-i),new Z.A(s,i+a)],a>0?(this.points.unshift(new Z.A(t/2,i)),n=z.A.getAngleBetweenPoints(this.points[0],this.points[1],this.points[2])/2,o=z.A.getAngleBetweenPoints(this.points[3],this.points[0],this.points[1])/2):(n=z.A.getAngleBetweenPoints(this.points[2],this.points[0],this.points[1])/2,o=Math.PI/2);let r=new Z.A(t/2,i+a+(t/2-s)*-Math.tan(n-(Math.PI/2-o)));const l=Math.abs(Math.sin(o)*(r.y-i)),c=new Q;c.rotate(z.A.deg2rad(this.state.rotation.value)),this.points=this.points.map((t=>c.apply(t))),r=c.apply(r),this.state.hasStroke.value&&2===this.state.cornerType.value&&0===this.state.cornerRadius.value&&1===this.state.position.value&&this.points.push(this.points[0].clone()),this.path=new at(`${this.points.map(((t,e)=>`${0===e?"M":"L"}${t.x}, ${t.y}`))}Z`),this.applyCorners(),this.contentBox=h.A.insideCircle(r.x,r.y,l-this.getStrokeOffset()/4)}};var ke=s(7703);const Be=class extends A.A{constructor(...t){var e,s,i,a;super(...t),e=this,i=[{name:"circle",type:ue},{name:"rectangle",type:ye},{name:"triangle",type:xe},{name:"ngon",type:we},{name:"star",type:be},{name:"kite",type:Ae},{name:"drop",type:Se},{name:"blob",type:ce}],(s="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s="types"))?a:a+"")in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i}modify(t){const e=t.state.saved?t.state.saved.model:null;let s=e&&this.types.find((t=>t.name===e))?e:this.types[Math.floor(Math.random()*this.types.length)].name;if(!t.state.saved)if(t.state.hasTextInside){const t=["circle","rectangle","ngon","star","blob","kite"];t.includes(s)||(s=(0,ke.A)(t,[40,8,16,1,2,1]))}else if(t.state.hasTextBelow){const t=["circle","rectangle","ngon","star","blob","kite"];t.includes(s)||(s=(0,ke.A)(t,[24,2,12,1,2,1]))}else{const t=["circle","rectangle","ngon"];t.includes(s)||(s=(0,ke.A)(t,[12,2,4]))}const i=new(0,this.types.find((t=>t.name===s)).type)({saved:t.state.saved,hasTextInside:t.state.hasTextInside});i.component=t,t.state.model.set(s),t.state.type=i,t.state.models=this.types.map((t=>t.name))}},Ce=class extends v.A{constructor(t){super(Object.assign({model:new S.A,type:null,models:null,saved:null},t)),this.addModifiers([Be]),this.applyModifiers()}createShape(){return this.state.type}};function Me(t,e){const s=(t.x+e.x)/2,i=(t.y+e.y)/2,a=Ie(s,i,t.x,t.y),n=Ie(s,i,e.x,e.y);return{x:s,y:i,r:Math.max(a,n)}}function Te(t,e){return null!==t&&Ie(e.x,e.y,t.x,t.y)<=t.r}function Ee(t,e,s,i,a,n){return(s-t)*(n-e)-(i-e)*(a-t)}function Ie(t,e,s,i){return((s-t)**2+(i-e)**2)**.5}const Ne=class extends It{constructor(t){super(t),void 0===this.state.shapes&&(this.state.shapes=[]),this.state.shapes.forEach((t=>{this.addShape(t)}))}add(t){this.state.shapes.includes(t)||(this.state.shapes.push(t),this.addShape(t))}addShape(t){return t.parent=this,this}empty(){this.state.shapes.length=0}initializeGroupBox(){this.boundingBox||(this.boundingBox=new h.A,this.boundingBox.join(...this.state.shapes.map((t=>t.getBoundingBox()))),this.trimBox=new h.A,this.trimBox.join(...this.state.shapes.map((t=>t.getTrimBox?t.getTrimBox():t.getBoundingBox()))),this.trimBox.set(this.trimBox.x-this.boundingBox.x,this.trimBox.y-this.boundingBox.y,this.trimBox.w,this.trimBox.h),this.state.shapes.forEach((t=>{t.position.x-=this.boundingBox.x,t.position.y-=this.boundingBox.y})),this.position.set(this.boundingBox.x,this.boundingBox.y),this.boundingBox.set(0,0,this.boundingBox.w,this.boundingBox.h))}update(){this.reset(),this.initializeGroupBox()}getBoundingBox(){return this.initializeGroupBox(),this.updateTransform(),this.worldBoundingBox}getEnclosedCircle(){const t=[];if(this.state.shapes.forEach((e=>{e.width&&e.height&&t.push(new Z.A(e.worldPosition.x,e.worldPosition.y),new Z.A(e.worldPosition.x+e.width,e.worldPosition.y),new Z.A(e.worldPosition.x+e.width,e.worldPosition.y+e.height),new Z.A(e.worldPosition.x,e.worldPosition.y+e.height))})),t.length){const e=function(t){let e=null;return t.forEach(((s,i)=>{null!==e&&Te(e,s)||(e=function(t,e){let s={x:e.x,y:e.y,r:0};return t.forEach(((i,a)=>{Te(s,i)||(s=0===s.r?Me(e,i):function(t,e,s){const i=Me(e,s);let a=null,n=null;if(t.forEach((t=>{if(Te(i,t))return;const o=Ee(e.x,e.y,s.x,s.y,t.x,t.y),r=function(t,e,s){const i=(Math.min(t.x,e.x,s.x)+Math.max(t.x,e.x,s.x))/2,a=(Math.min(t.y,e.y,s.y)+Math.max(t.y,e.y,s.y))/2,n=t.x-i,o=t.y-a,r=e.x-i,h=e.y-a,l=s.x-i,c=s.y-a,d=2*(n*(h-c)+r*(c-o)+l*(o-h));if(0===d)return null;const u=i+((n*n+o*o)*(h-c)+(r*r+h*h)*(c-o)+(l*l+c*c)*(o-h))/d,p=a+((n*n+o*o)*(l-r)+(r*r+h*h)*(n-l)+(l*l+c*c)*(r-n))/d,m=Ie(u,p,t.x,t.y),g=Ie(u,p,e.x,e.y),f=Ie(u,p,s.x,s.y);return{x:u,y:p,r:Math.max(m,g,f)}}(e,s,t);null!==r&&(o>0&&(null===a||Ee(e.x,e.y,s.x,s.y,r.x,r.y)>Ee(e.x,e.y,s.x,s.y,a.x,a.y))?a=r:o<0&&(null===n||Ee(e.x,e.y,s.x,s.y,r.x,r.y)<Ee(e.x,e.y,s.x,s.y,n.x,n.y))&&(n=r))})),null===a&&null===n)return i;if(null===a&&null!==n)return n;if(null!==a&&null===n)return a;if(null!==a&&null!==n)return a.r<=n.r?a:n;throw new Error("error computing circle")}(t.slice(0,a+1),e,i))})),s}(t.slice(0,i+1),s))})),e}(t);return e}return null}};function Pe(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Oe=class extends ee{constructor(t){super(Object.assign({sizeFactor:new T.A(0,1).randomizeBetween(.65,.75).enableInteraction(),elements:new w.A({nameShadow:null,name:null,symbol:null,symbolContent:null,icon:null,letter:null,slogan:null})},t)),Pe(this,"shapeIcon",null),Pe(this,"shapeLetter",null),Pe(this,"shapeSymbol",null),Pe(this,"shapeSymbolContent",null),Pe(this,"shapeGroup",null),Pe(this,"hasIcon",!1),Pe(this,"hasLetter",!1),Pe(this,"hasText",!1),Pe(this,"hasSlogan",!1),Pe(this,"hasStroke",!1),Pe(this,"hasRoundStrokes",!1),Pe(this,"hasTextInsideSymbol",!1),Pe(this,"hasSymbol",!0),Pe(this,"ids",["background","symbol","symbolContent","divider","nameShadow","name","slogan","icon"])}initializeEffects(){this.state.effects=this.getEffects(this.state,this.ids)}createElements(){super.createElements();const t=this.state.elements;t.symbol=new Ce({saved:Yt(this.state.saved,["elements","symbol"],null),hasTextBelow:0===this.textPosition}),t.symbolContent=new ne({saved:Yt(this.state.saved,["elements","symbolContent"],null),hasStroke:t.symbol.state.type.state.hasStroke.value,hasAspectRatio:t.symbol.state.type.state.aspectRatio&&t.symbol.state.type.state.aspectRatio.value>0}),this.hasIcon||(t.letter=new jt({curve:new ot.A(0),font:this.state.fonts.state.symbol,text:new S.A(this.state.symbolText).enableInteraction(),sizeFactor:new T.A(0,1).set(.5).setLabel("size").enableInteraction(),lining:new T.A(1,4,{interval:.01}).set(1).enableInteraction().setLabel("lining"),hasBoxedText:(new M.A).setLabel("box").enableInteraction()})),(!this.state.saved||this.state.saved&&this.state.saved.links)&&"blob"===t.symbol.state.model.value&&(t.symbolContent.state.type.state.ring.active.set(!1),t.symbolContent.state.type.state.hole.active.set(!1)),this.state.links=this.getLinks(this.state,this.ids),this.updateLinks(),this.shapeGroup=new Ne}updateLinks(){const t=this.state.colors.state,e=this.state.elements,s=e.symbolContent.state.type.state.ring.active.value||e.symbolContent.state.type.state.hole.active.value||e.symbolContent.state.hasStroke,i=Math.random()<.75,a=s?"symbolContent":i?null:"symbol",n=!(t.symbol.color===t.name.color)&&Math.random()<.5;["icon"].forEach((e=>{t[e].copyAllFrom(this.state.colors.state.symbolContent)})),this.updateAllLinks(this.state,this.ids,{symbol:{links:["name","divider","slogan"],default:"name"},symbolContent:{links:["symbol"],default:"symbol",linkedTo:i?null:"symbol"},icon:{links:["symbol","symbolContent","name","divider","slogan"],default:"symbol",linkedTo:a},name:{links:["symbol","divider","slogan"],default:"symbol",linkedTo:n?"symbol":null},divider:{links:["symbol","name","slogan"],default:"name",linkedTo:null},slogan:{links:["symbol","name","divider"],default:"symbol",linkedTo:n?"symbol":null}})}async createShapes(){const t=this.state.elements;await super.createShapes(),this.hasIcon?this.shapeIcon=await t.icon.createShape():this.shapeLetter=await t.letter.createShape(),this.shapeNameShadow=await t.nameShadow.createShape(),this.shapeSymbol=t.symbol.createShape(),this.shapeSymbolContent=t.symbolContent.createShape(),this.shapeMap=new Map([["background",this.shapeBackground],["symbol",this.shapeSymbol],["symbolContent",this.shapeSymbolContent],["icon",this.hasIcon?this.shapeIcon:this.shapeLetter],["nameShadow",this.shapeNameShadow],["name",this.shapeName],["divider",this.shapeDivider],["slogan",this.shapeSlogan]])}createPaths(t){const e=this.state.width,s=this.state.height;this.alignText(),this.shapeSymbol.createPath({width:e/4,height:s/4}),this.hasNameShadow&&this.shapeNameShadow.createElement({sourceShape:this.shapeName,svg:t});const i=this.shapeSymbol.getContentBox();this.shapeSymbolContent.createPath({width:i.w,height:i.h});let a=i;this.shapeSymbolContent.hasContent?(this.shapeGroup.add(this.shapeSymbolContent),this.shapeSymbolContent.position.set(i.cx-this.shapeSymbolContent.width/2,i.cy-this.shapeSymbolContent.height/2),a=this.shapeSymbolContent.getContentBox()):this.hasStroke&&this.shapeGroup.add(this.shapeSymbolContent),this.hasIcon?(this.shapeIcon.createElement({forceInBox:!0,width:a.w,height:a.h,padding:new Tt.A(.3*(1-Math.sqrt(this.shapeIcon.state.sizeFactor.value))*Math.min(this.shapeSymbol.contentBox.w,this.shapeSymbol.contentBox.h)),svg:t}),this.shapeIcon.position.translate(a.x+(a.w-this.shapeIcon.width)/2,a.y+(a.h-this.shapeIcon.height)/2)):this.hasLetter&&(this.shapeLetter.createPath({forceInBox:!0,width:a.w,height:a.h,padding:new Tt.A(.3*(1-Math.sqrt(this.shapeLetter.state.sizeFactor.value))*Math.min(this.shapeSymbol.contentBox.w,this.shapeSymbol.contentBox.h)),size:64}),this.shapeLetter.position.set(a.x+(a.w-this.shapeLetter.width)/2,a.y+(a.h-this.shapeLetter.height)/2));const n=Math.sqrt(this.shapeSymbol.width*this.shapeSymbol.height)*this.getSizeFactor(this.state.sizeFactor.value);this.shapeName.createPath({size:n}),this.shapeSlogan.createPath({size:n*this.shapeSlogan.state.sizeFactor.value}),this.hasDivider&&this.shapeDivider.createPath({width:2*Math.max(this.hasText?this.shapeName.width:0,this.hasSlogan?this.shapeSlogan.width:0),height:Math.max(this.hasText?this.shapeName.worldSize:0,this.hasSlogan?this.shapeSlogan.worldSize:0)}),this.positionShapes(this.shapeSymbol),this.shapeGroup.update();const o=(.5*this.state.size.value+.5)*this.getOptimalSize(),h=r.t4.CONTENT_PADDING,l=Math.min((e-h.horizontal*e)/this.shapeGroup.width,(s-h.vertical*s)/this.shapeGroup.height)*o;this.shapeGroup.position.set(-this.shapeGroup.width/2,-this.shapeGroup.height/2),this.shapeGroup.scale.set(l,l),this.shapeGroup.position.set((e-this.shapeGroup.width)/2,(s-this.shapeGroup.height)/2),this.initContentDimensions(t,this.shapeGroup)}initializeOptions({isBig:t=!0,isMonotone:e=!1,hasBackground:s=!0}={}){this.hasBackground=s,this.isMonotone=e,this.hasLetter=!this.hasIcon&&Boolean(this.shapeLetter.state.text.value),this.hasText=Boolean(this.shapeName.state.text.value)&&t,this.hasSlogan=Boolean(this.shapeSlogan.state.text.value)&&t,this.hasStroke=this.shapeSymbol.state.hasStroke.value,this.hasRoundStrokes=void 0===this.shapeSymbol.state.cornerType||2!==this.shapeSymbol.state.cornerType.value,this.hasDivider=this.hasText&&this.shapeDivider.state.active.value,this.hasNameShadow=this.hasText&&this.shapeNameShadow.state.active.value&&(this.shapeNameShadow.state.size.value||this.shapeNameShadow.state.offset.value),this.state.colors.update({hasNameShadow:this.hasNameShadow,recreatedFromSavedState:this.recreatedFromSavedState,isMonotone:e}),t||(this.shapeName.resetText(),this.shapeSlogan.resetText()),this.layers=this.getLayers(this.ids.filter((t=>"background"!==t)))}setElements(t){const e=new Map,s=this.shapeSymbolContent.hasContent,i=this.isMonotone||this.isLinked(this.layers,"symbol","symbolContent"),a=this.shapeSymbolContent.state.hole&&this.shapeSymbolContent.state.hole.active.value,n=this.shapeSymbolContent.state.ring&&this.shapeSymbolContent.state.ring.active.value,o=new Set,h=new Set;["symbolContent","icon"].forEach((t=>{const e=this.isLinked(this.layers,"symbol",t),s=this.isLinked(this.layers,"symbolContent",t);this.isMonotone||e||s&&!(a||n||this.hasStroke)?o.add(t):s&&h.add(t)}));let l=this.layers.slice();const c=[],d=[],u=t=>o.has(t)||h.has(t),p=s=>{u(s)&&(l=this.removeFromLayers(l,s),o.has(s)?c.push(t.createElementFromDefinition(e.get(s))):h.has(s)&&d.push(t.createElementFromDefinition(e.get(s))))};let m=null,g=null,f=null;if(this.hasSymbol&&(m=this.addDefinitionFromShape(t,this.shapeSymbol,{strokeLinecap:this.hasRoundStrokes?"round":"square",strokeLinejoin:this.hasRoundStrokes?"round":"miter",strokeMiterlimit:r.t4.STROKE_MITER_LIMIT})),s||this.hasStroke){if(f=t.createElement("g"),s&&(g=t.addChild(f,t.createElement("path",{d:t.getPathDescriptionFromShape(this.shapeSymbolContent),fill:u("symbolContent")?"#000":"#fff"}))),this.hasStroke){const e=t.addChild(f,t.createElementFromDefinition(m,{fill:"none",stroke:u("symbolContent")?"#000":"#fff",strokeWidth:t.fixNumber(this.shapeSymbol.worldStrokeOffset/2)}));s?(this.shapeSymbolContent.boundingBox.pad(-Math.max(this.shapeSymbol.boundingBox.w-this.shapeSymbolContent.boundingBox.w,this.shapeSymbol.boundingBox.h-this.shapeSymbolContent.boundingBox.h)/2+this.shapeSymbol.worldStrokeWidth/4),this.shapeSymbolContent.effectBox.pad(-Math.max(this.shapeSymbol.effectBox.w-this.shapeSymbolContent.effectBox.w,this.shapeSymbol.effectBox.h-this.shapeSymbolContent.effectBox.h)/2)):(g=e,this.shapeSymbolContent.boundingBox=this.shapeSymbol.boundingBox.clone().pad(this.shapeSymbol.worldStrokeWidth/4),this.shapeSymbolContent.effectBox=this.shapeSymbol.effectBox.clone())}e.set("symbolContent",t.addDefinition(f)),u("symbolContent")?p("symbolContent"):(l=this.removeFromLayers(l,"symbolContent"),this.addLayerToID(l,"symbol","symbolContent"))}const y=(t=>{let e="#fff";return u(t)&&(o.has(t)?e=a&&i?"#fff":"#000":h.has(t)&&(e=a?i?"#fff":"#000":"#fff")),e})("icon");if(this.hasIcon?(e.set("icon",t.addDefinition(this.shapeIcon.getElement({fillSolid:y,fillTransparent:"#fff"===y?"#000":"#fff"}))),p("icon")):this.hasLetter&&(e.set("icon",this.addDefinitionFromShape(t,this.shapeLetter,{fill:y})),p("icon")),this.sortLayers(l),this.hasSymbol){const s=t.createElement("g"),i=t.createElementFromDefinition(m,{strokeWidth:t.fixNumber(this.shapeSymbol.worldStrokeOffset/2+this.shapeSymbol.worldStrokeWidth)});t.addChild(s,i),c.length&&t.setAttributes(s,{mask:t.addMask({fill:"#fff",fillBox:this.shapeSymbol.getEffectBox(),elements:c})}),e.set("symbol",t.addDefinition(s))}g&&d.length&&d.forEach((e=>{t.addChild(f,e)}));let v=null;if(this.hasText&&e.set("name",this.addDefinitionFromShape(t,this.shapeName)),this.hasNameShadow&&(this.isMonotone&&(l=this.removeFromLayers(l,"name"),v=t.addMask({fill:"#fff",fillBox:this.shapeName.worldBoundingBox,elements:[t.createElementFromDefinition(e.get("name"),{fill:"#000"})]})),e.set("nameShadow",t.addDefinition(this.shapeNameShadow.getElement({sourceID:e.get("name"),color:"#fff",svg:t}),null===v?{}:{mask:v}))),this.hasDivider){this.shapeDivider.getBoundingBox();const s=this.shapeDivider.hasStroke,i=Math.max(this.shapeName.gapWidth*this.shapeName.worldSize,s?this.shapeDivider.worldStrokeWidth/2:this.shapeDivider.height/2);let a=null;!this.hasNameShadow&&this.shapeDivider.y<=this.shapeName.worldTypographicBoundingBox.y+this.shapeName.worldTypographicBoundingBox.h+i/2&&(a=t.addMask({fill:"#fff",fillBox:this.shapeDivider.worldBoundingBox,elements:[t.createElementFromDefinition(e.get("name"),{fill:"#000",stroke:"#000",strokeWidth:t.fixNumber(i),strokeLinecap:"round",strokeLinejoin:"round"})]})),e.set("divider",this.addDefinitionFromShape(t,this.shapeDivider,{strokeLinecap:s?this.getStrokeCap(this.shapeDivider):null,strokeLinejoin:s?this.getStrokeJoin(this.shapeDivider):null,strokeMiterlimit:r.t4.STROKE_MITER_LIMIT,mask:a}))}this.hasSlogan&&e.set("slogan",this.addDefinitionFromShape(t,this.shapeSlogan)),this.renderLayers(t,t.svg,l,e)}async draw(t,e){try{await this.addRenderTask((()=>{this.initializeOptions(e)})),this.hasBackground&&await this.addRenderTask((()=>this.setBackground(t))),await this.addRenderTask((()=>{this.shapeGroup.empty(),this.shapeGroup.add(this.shapeSymbol),this.hasIcon?this.shapeGroup.add(this.shapeIcon):this.hasLetter&&this.shapeGroup.add(this.shapeLetter),this.hasText&&this.shapeGroup.add(this.shapeName),this.hasDivider&&this.shapeGroup.add(this.shapeDivider),this.hasSlogan&&this.shapeGroup.add(this.shapeSlogan),this.shapeGroup.reset()})),await this.addRenderTask((()=>this.createPaths(t))),await this.addRenderTask((()=>this.setElements(t))),r.t4.DRAW_BOUNDING_BOXES&&await this.addRenderTask((()=>this.drawBoundingBoxes(t)))}catch(t){if(t instanceof B)return!1;throw t}return!0}};function $e(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Le=class extends ee{constructor(t){super(Object.assign({sizeFactor:new T.A(0,1).randomizeBetween(.65,.75).enableInteraction(),contentSize:new T.A(0,1).set(.85).enableInteraction(),elements:new w.A({nameShadow:null,name:null,symbol:null,symbolContent:null,icon:null,slogan:null})},t)),$e(this,"shapeIcon",null),$e(this,"shapeSymbol",null),$e(this,"shapeSymbolContent",null),$e(this,"shapeGroup",null),$e(this,"shapeContentGroup",null),$e(this,"hasIcon",!1),$e(this,"hasText",!1),$e(this,"hasSlogan",!1),$e(this,"hasStroke",!1),$e(this,"hasRoundStrokes",!1),$e(this,"hasTextInsideSymbol",!0),$e(this,"hasSymbol",!0),$e(this,"hasSloganInCircle",!1),$e(this,"ids",["background","symbol","symbolContent","divider","nameShadow","name","slogan","icon"])}initializeEffects(){this.state.effects=this.getEffects(this.state,this.ids)}createElements(){super.createElements();const t=this.state.elements;t.symbol=new Ce({saved:Yt(this.state.saved,["elements","symbol"],null),hasTextInside:!0}),t.symbolContent=new ne({saved:Yt(this.state.saved,["elements","symbolContent"],null),hasStroke:t.symbol.state.type.state.hasStroke.value,hasAspectRatio:t.symbol.state.type.state.aspectRatio&&t.symbol.state.type.state.aspectRatio.value>0}),(!this.state.saved||this.state.saved&&this.state.saved.variation)&&("blob"===t.symbol.state.model.value&&(t.symbolContent.state.type.state.ring.active.set(!1),t.symbolContent.state.type.state.hole.active.set(!1)),t.slogan.state.isCircular.value&&(t.slogan.state.sizeFactor.set(Math.min(t.slogan.state.sizeFactor.value,.35)),t.divider.state.type.state.active.set(!1),this.state.contentSize.set(.75))),this.state.links=this.getLinks(this.state,this.ids),this.updateLinks(),this.shapeGroup=new Ne,this.shapeContentGroup=new Ne}updateLinks(){const t=this.state.elements,e=e=>this.state.saved&&this.state.saved.elements&&this.state.saved.elements.symbolContent?this.state.saved.elements.symbolContent.type[e].active:t.symbolContent.state.type.state[e].active.value,s=this.state.colors.state,i=e("hole"),a=e("ring")||i||t.symbolContent.state.hasStroke,n=Math.random()<.75,o=a?"symbolContent":n?"name":"symbol";["icon","name","divider","slogan"].forEach((t=>{s[t].copyAllFrom(this.state.colors.state.symbolContent)})),this.updateAllLinks(this.state,this.ids,{symbolContent:{links:["symbol"],default:"symbol",linkedTo:n?null:"symbol"},icon:{links:["symbol","symbolContent","name","divider","slogan"],default:"symbol",linkedTo:o},name:{links:["symbol","symbolContent","icon","divider","slogan"],default:"symbol",linkedTo:n&&!a?null:o},divider:{links:["symbol","symbolContent","icon","name","slogan"],default:"name",linkedTo:"name"},slogan:{links:["symbol","symbolContent","icon","name","divider"],default:"symbol",linkedTo:o}})}async createShapes(){const t=this.state.elements;await super.createShapes(),this.hasIcon&&(this.shapeIcon=await t.icon.createShape()),this.shapeNameShadow=await t.nameShadow.createShape(),this.shapeSymbol=t.symbol.createShape(),this.shapeSymbolContent=t.symbolContent.createShape(),this.shapeMap=new Map([["background",this.shapeBackground],["symbol",this.shapeSymbol],["symbolContent",this.shapeSymbolContent],["icon",this.shapeIcon],["nameShadow",this.shapeNameShadow],["name",this.shapeName],["divider",this.shapeDivider],["slogan",this.shapeSlogan]])}createPaths(t){const e=this.state.width,s=this.state.height;this.alignText(),this.shapeSymbol.createPath({width:e,height:s}),this.hasNameShadow&&this.shapeNameShadow.createElement({sourceShape:this.shapeName,svg:t});const i=this.shapeSymbol.getContentBox();this.shapeSymbolContent.createPath({width:i.w,height:i.h});let a=i;this.shapeSymbolContent.hasContent?(this.shapeGroup.add(this.shapeSymbolContent),this.shapeSymbolContent.position.set(i.cx-this.shapeSymbolContent.width/2,i.cy-this.shapeSymbolContent.height/2),a=this.shapeSymbolContent.getContentBox()):this.hasStroke&&this.shapeGroup.add(this.shapeSymbolContent);const n=(Math.min(a.w,a.h)**2*2)**.5*.5,o=this.shapeSlogan.state.margin.value*n*.15;a.pad(.025*Math.min(a.w,a.h)),this.hasIcon&&this.shapeIcon.createElement({svg:t});const h=this.hasIcon?this.shapeIcon.boundingBox:null,l=this.hasIcon?Math.sqrt(h.w*h.h)*this.getSizeFactor(this.shapeIcon.state.sizeFactor.value):Math.sqrt(a.w*a.h);this.shapeName.createPath({size:l}),this.hasSloganInCircle||this.shapeSlogan.createPath({size:this.hasSloganInCircle?l:l*this.shapeSlogan.state.sizeFactor.value}),this.hasDivider&&this.shapeDivider.createPath({width:2*Math.max(this.hasText?this.shapeName.width:0,this.hasSlogan?this.shapeSlogan.width:0),height:Math.max(this.hasText?this.shapeName.worldSize:0,this.hasSlogan?this.shapeSlogan.worldSize:0)}),this.positionShapes(this.shapeIcon),this.shapeContentGroup.update();let c=Math.min(a.w/this.shapeContentGroup.width,a.h/this.shapeContentGroup.height)*(1-.35*(1-this.state.contentSize.value));if(!this.hasIcon||this.hasText||this.hasSlogan||(c*=.65+.35*this.state.sizeFactor.value),this.hasSloganInCircle){this.shapeSlogan.createPath({worldCurvePosition:new Z.A(a.cx,a.cy),worldCurveRadius:n-o});const t=n-o-this.shapeSlogan.worldLineHeight,e=(a.w**2+a.h**2)**.5*.5;Math.sin(this.shapeSlogan.curveAngle)*(n-o-2*this.shapeSlogan.worldLineHeight)-this.shapeContentGroup.height/2*c<0&&(c*=t/e)}if(this.shapeContentGroup.position.set(-this.shapeContentGroup.width/2,-this.shapeContentGroup.height/2),this.shapeContentGroup.scale.set(c,c),this.shapeContentGroup.position.set(a.x+a.w/2-this.shapeContentGroup.width/2,a.y+a.h/2-this.shapeContentGroup.height/2),this.hasIcon&&(this.hasText||this.hasSlogan)){const t=this.shapeContentGroup.getEnclosedCircle();if(t){const e=a.y+a.h/2-t.y*c,s=2*t.r*c-this.shapeContentGroup.height,i=e-this.shapeContentGroup.position.y;this.shapeContentGroup.position.y+=i*(Math.abs(i)/s)**.5}}this.shapeGroup.update();const d=(.5*this.state.size.value+.5)*this.getOptimalSize(),u=r.t4.CONTENT_PADDING,p=Math.min((e-u.horizontal*e)/this.shapeGroup.width,(s-u.vertical*s)/this.shapeGroup.height)*d;this.shapeGroup.position.set(-this.shapeGroup.width/2,-this.shapeGroup.height/2),this.shapeGroup.scale.set(p,p),this.shapeGroup.position.set((e-this.shapeGroup.width)/2,(s-this.shapeGroup.height)/2),this.initContentDimensions(t,this.shapeGroup)}initializeOptions({isBig:t=!0,isMonotone:e=!1,hasBackground:s=!0}={}){this.hasIcon||(this.ids=this.ids.filter((t=>"icon"!==t))),this.hasBackground=s,this.isMonotone=e,this.hasText=t?Boolean(this.shapeName.state.text.value):!this.hasIcon,this.hasSlogan=Boolean(this.shapeSlogan.state.text.value)&&t,this.hasStroke=this.shapeSymbol.state.hasStroke.value,this.hasRoundStrokes=void 0===this.shapeSymbol.state.cornerType||2!==this.shapeSymbol.state.cornerType.value,this.hasSloganInCircle=this.shapeSlogan.state.isCircular.value,this.hasDivider=this.hasText&&this.shapeDivider.state.active.value,this.hasNameShadow=this.hasText&&this.shapeNameShadow.state.active.value&&(this.shapeNameShadow.state.size.value||this.shapeNameShadow.state.offset.value),this.state.colors.update({hasNameShadow:this.hasNameShadow,recreatedFromSavedState:this.recreatedFromSavedState,isMonotone:e}),t||(this.shapeName.resetText(),this.shapeSlogan.resetText()),this.layers=this.getLayers(this.ids.filter((t=>"background"!==t))),this.hasText||(this.layers=this.removeFromLayers(this.layers,"name")),this.hasSlogan||(this.layers=this.removeFromLayers(this.layers,"slogan"))}setElements(t){const e=new Map,s=this.shapeSymbolContent.hasContent,i=this.isMonotone||this.isLinked(this.layers,"symbol","symbolContent"),a=this.shapeSymbolContent.state.hole&&this.shapeSymbolContent.state.hole.active.value,n=this.shapeSymbolContent.state.ring&&this.shapeSymbolContent.state.ring.active.value,o=new Set,h=new Set;["symbolContent","icon","name","divider","slogan"].forEach((t=>{const e=this.isLinked(this.layers,"symbol",t),s=this.isLinked(this.layers,"symbolContent",t);this.isMonotone||e||s&&!(a||n||this.hasStroke)?o.add(t):s&&h.add(t)}));let l=this.layers.slice();const c=[],d=[],u=t=>o.has(t)||h.has(t),p=(s,i)=>{u(s)&&(l=this.removeFromLayers(l,s),o.has(s)?c.push(t.createElementFromDefinition(e.get(s),i)):h.has(s)&&d.push(t.createElementFromDefinition(e.get(s),i)))},m=t=>{let e="#fff";return u(t)&&(o.has(t)?e=a&&i?"#fff":"#000":h.has(t)&&(e=a?i?"#fff":"#000":"#fff")),e};let g=null,f=null,y=null;if(this.hasSymbol&&(g=this.addDefinitionFromShape(t,this.shapeSymbol,{strokeLinecap:this.hasRoundStrokes?"round":"square",strokeLinejoin:this.hasRoundStrokes?"round":"miter",strokeMiterlimit:r.t4.STROKE_MITER_LIMIT})),s||this.hasStroke){if(y=t.createElement("g"),s&&(f=t.addChild(y,t.createElement("path",{d:t.getPathDescriptionFromShape(this.shapeSymbolContent),fill:u("symbolContent")?"#000":"#fff"}))),this.hasStroke){const e=t.addChild(y,t.createElementFromDefinition(g,{fill:"none",stroke:u("symbolContent")?"#000":"#fff",strokeWidth:t.fixNumber(this.shapeSymbol.worldStrokeOffset/2)}));s?(this.shapeSymbolContent.boundingBox.pad(-Math.max(this.shapeSymbol.boundingBox.w-this.shapeSymbolContent.boundingBox.w,this.shapeSymbol.boundingBox.h-this.shapeSymbolContent.boundingBox.h)/2+this.shapeSymbol.worldStrokeWidth/4),this.shapeSymbolContent.effectBox.pad(-Math.max(this.shapeSymbol.effectBox.w-this.shapeSymbolContent.effectBox.w,this.shapeSymbol.effectBox.h-this.shapeSymbolContent.effectBox.h)/2)):(f=e,this.shapeSymbolContent.boundingBox=this.shapeSymbol.boundingBox.clone().pad(this.shapeSymbol.worldStrokeWidth/4),this.shapeSymbolContent.effectBox=this.shapeSymbol.effectBox.clone())}e.set("symbolContent",t.addDefinition(y)),u("symbolContent")?p("symbolContent"):(l=this.removeFromLayers(l,"symbolContent"),this.addLayerToID(l,"symbol","symbolContent"))}if(this.hasIcon){const s=m("icon");e.set("icon",t.addDefinition(this.shapeIcon.getElement({fillSolid:s,fillTransparent:"#fff"===s?"#000":"#fff"}))),p("icon")}const v=u("name"),b=m("name"),x=v&&this.hasNameShadow?"#fff"===b?"#000":"#fff":b;if(this.hasText&&e.set("name",this.addDefinitionFromShape(t,this.shapeName)),this.hasNameShadow&&(e.set("nameShadow",t.addDefinition(this.shapeNameShadow.getElement({sourceID:e.get("name"),color:v?"#000"===x?"#fff":"#000":b,svg:t}))),v)&&(l=this.removeFromLayers(l,"nameShadow"),(h.has("name")?d:c).push(t.createElementFromDefinition(e.get("nameShadow")))),this.hasText&&p("name",{fill:x}),this.hasSlogan&&(e.set("slogan",this.addDefinitionFromShape(t,this.shapeSlogan,{fill:m("slogan")})),p("slogan")),this.hasDivider){this.shapeDivider.getBoundingBox();const s=this.shapeDivider.hasStroke,i=Math.max(this.shapeName.gapWidth*this.shapeName.worldSize,s?this.shapeDivider.worldStrokeWidth/2:this.shapeDivider.height/2);let a=null;!this.hasNameShadow&&this.shapeDivider.y<=this.shapeName.worldTypographicBoundingBox.y+this.shapeName.worldTypographicBoundingBox.h+i/2&&(a=t.addMask({fill:"#fff",fillBox:this.shapeDivider.worldBoundingBox,elements:[t.createElementFromDefinition(e.get("name"),{fill:"#000",stroke:"#000",strokeWidth:t.fixNumber(i),strokeLinecap:"round",strokeLinejoin:"round"})]}));const n=m("divider");e.set("divider",this.addDefinitionFromShape(t,this.shapeDivider,{strokeWidth:s?t.fixNumber(this.shapeDivider.worldStrokeWidth):null,strokeLinecap:s?this.getStrokeCap(this.shapeDivider):null,strokeLinejoin:s?this.getStrokeJoin(this.shapeDivider):null,strokeMiterlimit:r.t4.STROKE_MITER_LIMIT,mask:a,fill:s?"none":n,stroke:s?n:"none"})),p("divider")}if(this.sortLayers(l),this.hasSymbol){const s=t.createElement("g"),i=t.createElementFromDefinition(g,{strokeWidth:t.fixNumber(this.shapeSymbol.worldStrokeOffset/2+this.shapeSymbol.worldStrokeWidth)});t.addChild(s,i),c.length&&t.setAttributes(s,{mask:t.addMask({fill:"#fff",fillBox:this.shapeSymbol.getEffectBox(),elements:c})}),e.set("symbol",t.addDefinition(s))}f&&d.length&&d.forEach((e=>{t.addChild(y,e)})),this.renderLayers(t,t.svg,l,e)}async draw(t,e){try{await this.addRenderTask((()=>{this.initializeOptions(e)})),this.hasBackground&&await this.addRenderTask((()=>this.setBackground(t))),await this.addRenderTask((()=>{this.shapeGroup.empty(),this.shapeContentGroup.empty(),this.shapeGroup.add(this.shapeSymbol),this.shapeGroup.add(this.shapeContentGroup),this.hasIcon&&this.shapeContentGroup.add(this.shapeIcon),this.hasText&&this.shapeContentGroup.add(this.shapeName),this.hasDivider&&this.shapeContentGroup.add(this.shapeDivider),this.hasSlogan&&(this.hasSloganInCircle?this.shapeGroup.add(this.shapeSlogan):this.shapeContentGroup.add(this.shapeSlogan)),this.shapeGroup.reset(),this.shapeContentGroup.reset()})),await this.addRenderTask((()=>this.createPaths(t))),await this.addRenderTask((()=>this.setElements(t))),r.t4.DRAW_BOUNDING_BOXES&&await this.addRenderTask((()=>this.drawBoundingBoxes(t)))}catch(t){if(t instanceof B)return!1;throw t}return!0}};function De(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const je=class extends ee{constructor(t){super(Object.assign({sizeFactor:new T.A(0,1).randomizeBetween(.65,.75).enableInteraction(),elements:new w.A({nameShadow:null,name:null,icon:null,slogan:null})},t)),De(this,"shapeIcon",null),De(this,"shapeGroup",null),De(this,"hasIcon",!1),De(this,"hasText",!1),De(this,"hasSlogan",!1),De(this,"hasTextInsideSymbol",!1),De(this,"hasSymbol",!1),De(this,"ids",["background","divider","nameShadow","name","slogan"])}initializeEffects(){this.hasIcon&&(this.ids=["background","symbol","divider","nameShadow","name","slogan"]),this.state.effects=this.getEffects(this.state,this.ids)}createElements(){super.createElements(),this.state.links=this.getLinks(this.state,this.ids),this.updateLinks(),this.shapeGroup=new Ne}updateLinks(){const t=this.state.colors.state,e=t.symbol.value.value>.95&&t.symbol.saturation.value<.05,s=!(t.symbol.color===t.name.color)&&!e&&Math.random()<.5;this.updateAllLinks(this.state,this.ids,Object.assign({name:{links:this.hasIcon?["symbol","divider","slogan"]:["divider","slogan"],default:this.hasIcon?"symbol":"slogan",linkedTo:s?"symbol":null},divider:{links:this.hasIcon?["symbol","name","slogan"]:["name","slogan"],default:"name",linkedTo:null},slogan:{links:this.hasIcon?["symbol","name","divider"]:["name","divider"],default:"name",linkedTo:s?this.hasIcon?"symbol":"name":null}},this.hasIcon?{symbol:{links:["name","divider","slogan"],default:"name"}}:null))}async createShapes(){const t=this.state.elements;await super.createShapes(),this.hasIcon&&(this.shapeIcon=await t.icon.createShape()),this.shapeNameShadow=await t.nameShadow.createShape();const e=[["background",this.shapeBackground],["nameShadow",this.shapeNameShadow],["name",this.shapeName],["divider",this.shapeDivider],["slogan",this.shapeSlogan]];this.hasIcon&&e.push(["symbol",this.shapeIcon]),this.shapeMap=new Map(e)}createPaths(t){const e=this.state.width,s=this.state.height;this.alignText(),this.hasIcon&&this.shapeIcon.createElement({svg:t}),this.hasNameShadow&&this.shapeNameShadow.createElement({sourceShape:this.shapeName,svg:t});const i=this.hasIcon?Math.sqrt(this.shapeIcon.originalBoundingBox.w*this.shapeIcon.originalBoundingBox.h)*this.getSizeFactor(this.state.sizeFactor.value):Math.sqrt(e*s);this.shapeName.createPath({size:i}),this.shapeSlogan.createPath({size:i*this.shapeSlogan.state.sizeFactor.value}),this.hasDivider&&this.shapeDivider.createPath({width:2*Math.max(this.hasText?this.shapeName.width:0,this.hasSlogan?this.shapeSlogan.width:0),height:Math.max(this.hasText?this.shapeName.worldSize:0,this.hasSlogan?this.shapeSlogan.worldSize:0)}),this.positionShapes(this.shapeIcon),this.shapeGroup.update();const a=(.5*this.state.size.value+.5)*this.getOptimalSize(),n=r.t4.CONTENT_PADDING,o=Math.min((e-n.horizontal*e)/this.shapeGroup.width,(s-n.vertical*s)/this.shapeGroup.height)*a;this.shapeGroup.position.set(-this.shapeGroup.width/2,-this.shapeGroup.height/2),this.shapeGroup.scale.set(o,o),this.shapeGroup.position.set((e-this.shapeGroup.width)/2,(s-this.shapeGroup.height)/2),this.initContentDimensions(t,this.shapeGroup)}initializeOptions({isBig:t=!0,isMonotone:e=!1,hasBackground:s=!0}={}){this.hasBackground=s,this.isMonotone=e,this.hasText=t?Boolean(this.shapeName.state.text.value):!this.hasIcon,this.hasSlogan=Boolean(this.shapeSlogan.state.text.value)&&t,this.hasDivider=this.hasText&&this.shapeDivider.state.active.value,this.hasNameShadow=this.hasText&&this.shapeNameShadow.state.active.value&&(this.shapeNameShadow.state.size.value||this.shapeNameShadow.state.offset.value),this.state.colors.update({hasNameShadow:this.hasNameShadow,recreatedFromSavedState:this.recreatedFromSavedState,isMonotone:e}),t||(this.shapeName.resetText(),this.shapeSlogan.resetText()),this.layers=this.getLayers(this.ids.filter((t=>"background"!==t)))}setElements(t){const e=new Map;let s=this.layers.slice();this.hasIcon&&e.set("symbol",t.addDefinition(this.shapeIcon.getElement({fillSolid:"#fff",fillTransparent:"#000"})));let i=null;if(this.hasText&&e.set("name",this.addDefinitionFromShape(t,this.shapeName)),this.hasNameShadow&&(this.isMonotone&&(s=this.removeFromLayers(s,"name"),i=t.addMask({fill:"#fff",fillBox:this.shapeName.worldBoundingBox,elements:[t.createElementFromDefinition(e.get("name"),{fill:"#000"})]})),e.set("nameShadow",t.addDefinition(this.shapeNameShadow.getElement({sourceID:e.get("name"),color:"#fff",svg:t}),null===i?{}:{mask:i}))),this.hasDivider){this.shapeDivider.getBoundingBox();const s=this.shapeDivider.hasStroke,i=Math.max(this.shapeName.gapWidth*this.shapeName.worldSize,s?this.shapeDivider.worldStrokeWidth/2:this.shapeDivider.height/2);let a=null;!this.hasNameShadow&&this.shapeDivider.y<=this.shapeName.worldTypographicBoundingBox.y+this.shapeName.worldTypographicBoundingBox.h+i/2&&(a=t.addMask({fill:"#fff",fillBox:this.shapeDivider.worldBoundingBox,elements:[t.createElementFromDefinition(e.get("name"),{fill:"#000",stroke:"#000",strokeWidth:t.fixNumber(i),strokeLinecap:"round",strokeLinejoin:"round"})]})),e.set("divider",this.addDefinitionFromShape(t,this.shapeDivider,{strokeLinecap:s?this.getStrokeCap(this.shapeDivider):null,strokeLinejoin:s?this.getStrokeJoin(this.shapeDivider):null,strokeMiterlimit:r.t4.STROKE_MITER_LIMIT,mask:a}))}this.hasSlogan&&e.set("slogan",this.addDefinitionFromShape(t,this.shapeSlogan)),this.sortLayers(s),this.renderLayers(t,t.svg,s,e)}async draw(t,e){try{await this.addRenderTask((()=>{this.initializeOptions(e)})),this.hasBackground&&await this.addRenderTask((()=>this.setBackground(t))),await this.addRenderTask((()=>{this.shapeGroup.empty(),this.shapeGroup.reset(),this.hasIcon&&this.shapeGroup.add(this.shapeIcon),this.hasText&&this.shapeGroup.add(this.shapeName),this.hasDivider&&this.shapeGroup.add(this.shapeDivider),this.hasSlogan&&this.shapeGroup.add(this.shapeSlogan)})),await this.addRenderTask((()=>this.createPaths(t))),await this.addRenderTask((()=>this.setElements(t))),r.t4.DRAW_BOUNDING_BOXES&&await this.addRenderTask((()=>this.drawBoundingBoxes(t)))}catch(t){if(t instanceof B)return!1;throw t}return!0}};const ze=class extends A.A{constructor(...t){var e,s,i,a;super(...t),e=this,i=[{name:"text",type:je},{name:"textWithIcon",type:je,hasIcon:!0},{name:"textWithIconHorizontal",type:je,hasIcon:!0,textPosition:1},{name:"textWithMonogram",type:Oe},{name:"textWithMonogramHorizontal",type:Oe,textPosition:1},{name:"textWithSymbol",type:Oe,hasIcon:!0},{name:"textWithSymbolHorizontal",type:Oe,hasIcon:!0,textPosition:1},{name:"textInsideSymbol",type:Le},{name:"textWithIconInsideSymbol",type:Le,hasIcon:!0}],(s="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s="types"))?a:a+"")in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i}modify(t){const e=t.state.saved?t.state.saved.model:null,s=(0,ke.A)(Object.keys(this.types),[2,16,8,4,2,16,8,8,4]),i=e&&this.types.find((t=>t.name===e))?e:this.types[s].name,a=this.types.find((t=>t.name===i)),n=a.type;t.state.type=new n(t.state),a.textPosition&&(t.state.type.textPosition=a.textPosition),t.state.saved||(1===t.state.type.textPosition&&t.state.type.state.sizeFactor.randomizeBetween(.6,.75),t.state.symbolText.toLowerCase()===t.state.symbolText.toUpperCase()&&(t.state.type.hasIcon=!0)),t.state.type.hasIcon=a.hasIcon,t.state.type.initializeEffects(),t.state.model.set(i),t.state.models=this.types.map((t=>t.name)),t.state.type.state.colors.initialize(t.state.type)}},Fe=class extends A.A{modify(t){if(Math.random()<.85)return;const e=!!t.state.type.hasTextInsideSymbol&&Math.random()<.25,s=t.state.type.hasSymbol?"symbol":"name",i=t.state.type.state.effects[e?s:"background"].state,a=t.state.type.state.colors.state[e?s:"background"];if(!a.gradient.active.value){if(e){if(/polkadot|dots/i.test(i.model.value))return}else if(/shine/i.test(i.model.value))return;a.saturation.value>.15&&i.type.state.active.set(!0)}}};function Re(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const _e=class extends v.A{constructor(t){super(Object.assign({width:r.t4.CONTENT_WIDTH,height:r.t4.CONTENT_HEIGHT,model:new S.A,type:null,models:null,id:null,saved:null,hue:null,iconSVG:null,iconTerm:null,iconID:null,variation:null},t)),Re(this,"path",null),Re(this,"type",null),this.addModifiers([ze,Fe])}async create(){if(this.state.saved)if(this.state.variation){switch(Object.keys(this.state.saved.colors.scheme).forEach((t=>{["hue","saturation","value"].forEach((e=>{delete this.state.saved.colors[t][e]}))})),this.state.variation){case"keep-icon":Object.keys(this.state.saved.elements).forEach((t=>{"icon"!==t&&delete this.state.saved.elements[t]})),delete this.state.saved.fonts,delete this.state.saved.links,delete this.state.saved.model,delete this.state.saved.colors,delete this.state.saved.effects;break;case"layout":Object.keys(this.state.saved.elements).forEach((t=>{/icon|nameShadow/i.test(t)||delete this.state.saved.elements[t]})),delete this.state.saved.links,delete this.state.saved.model;break;case"font":delete this.state.saved.fonts,["name","slogan","letter"].forEach((t=>{this.state.saved.elements[t]&&delete this.state.saved.elements[t].font}));break;case"color":delete this.state.saved.colors,delete this.state.saved.effects,delete this.state.saved.links}new ze({saved:this.state.saved}).modify(this),this.state.type.recreatedFromSavedState=!/(color|layout|keep-icon)/.test(this.state.variation),this.state.type.createElements(),this.loadState(this.state.type.state,this.state.saved)}else this.state.id?(new ze({saved:this.state.saved}).modify(this),this.state.type.recreatedFromSavedState=!0,this.state.type.createElements(),this.loadState(this.state.type.state,this.state.saved)):(this.applyModifiers(),this.state.type.recreatedFromSavedState=!0,this.state.type.createElements(),this.loadState(this.state.type.state,this.state.saved));else this.applyModifiers(),this.state.type.recreatedFromSavedState=!1,this.state.type.createElements();await Dt.A.wait(),await this.state.type.createShapes(),this.removeSavedStateOnAllObjects(this.state.type.state)}getState({texts:t=!1}={}){const e={version:"1.0.9",state:this.saveState({},this.state.type.state)};return t&&(e.text=this.state.text,e.sloganText=this.state.sloganText,e.symbolText=this.state.symbolText),e}saveState(t,e,s=new WeakSet){return Object.keys(e).forEach((i=>{const a=e[i];if(!s.has(a))if(a instanceof Object&&s.add(a),a instanceof b.A)a.isIgnoredOnSave||(t[i]=a.value);else if(a instanceof x.A){const e=this.saveState({},a.state,s);Object.keys(e).length&&(t[i]=e)}else if(a instanceof w.A){const e=this.saveState({},a,s);Object.keys(e).length&&(t[i]=e)}})),t}loadState(t,e){t&&Object.keys(e).forEach((s=>{const i=e[s];if(t[s]instanceof b.A)t[s].isIgnoredOnSave||t[s].set(i);else if("object"==typeof i){const e=t[s]instanceof x.A?t[s].state:t[s];this.loadState(e,i)}}))}removeSavedStateOnAllObjects(t){Object.keys(t).forEach((e=>{const s=t[e];"saved"===e&&delete t[e],s instanceof x.A?this.removeSavedStateOnAllObjects(s.state):s instanceof w.A&&this.removeSavedStateOnAllObjects(s)}))}async draw(t,e){const s=this.state.type;return e?.skipStart||(s.isCancelled=!1,await s.startRendering(e)),!s.isCancelled&&s.draw(t,e)}};var Ge=s(2492),We=(s(8221),s(4223)),Ue=s(3824),He=s(7451),Ve=s(6801);function qe(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Xe=class{constructor(t,{creator:e=null,translations:s={}}){qe(this,"creator",null),qe(this,"container",null),qe(this,"isAnimating",!1),qe(this,"savedState",null),qe(this,"savedStateBeforeStructureChange",null),qe(this,"lastState",{}),qe(this,"logoStates",[]),qe(this,"logoStateIndex",0),qe(this,"isFirstTapOnShape",!0),qe(this,"translations",{}),this.creator=e,this.translations=s,this.container=(0,Ge.A)(t)[0],(0,Ge.A)(".js-logo-previous").on("click",(()=>this.onPrevious())),(0,Ge.A)(".js-logo-next").on("click",(()=>this.onNext()))}async onSave(){(0,Ge.A)(this.container).addClass("is-saving");let t=null;return await Promise.all([new Promise((t=>{window.setTimeout((()=>t()),1e3*He.UI.MINIMUM_API_CALL_WAIT_TIME)})),(0,We.A)(`${He.Km.DOMAIN}/api/save`,{state:JSON.stringify(this.creator.logo.getState()),id:this.creator.logoID}).then((e=>{t=e,Ue.A.display({type:"success",message:this.translations.successSaveLogo,isInBody:!0})})).catch((e=>{e&&"TOO_FAST"===e.reason?Ue.A.display({type:"error",message:this.translations.infoSaveLogoTooFast,isInBody:!0}):Ue.A.display({type:"error",message:this.translations.errorSaveLogo,isInBody:!0}),t=e}))]),(0,Ge.A)(this.container).removeClass("is-saving"),t}onPrevious(){if(0===this.logoStateIndex)return;this.logoStates[this.logoStateIndex]={id:this.creator.logoID,state:JSON.stringify(this.creator.logo.getState())},this.logoStateIndex--;const t=this.logoStates[this.logoStateIndex];this.creator.create({id:t.id,savedState:JSON.parse(t.state)})}onNext(){if(this.logoStates[this.logoStateIndex]={id:this.creator.logoID,state:JSON.stringify(this.creator.logo.getState())},this.logoStateIndex++,this.logoStateIndex<this.logoStates.length){const t=this.logoStates[this.logoStateIndex];return void this.creator.create({id:t.id,savedState:JSON.parse(t.state)})}const t=this.creator.logo.getState(),e=t.state.elements;e.icon&&(this.lastState.icon=e.icon),this.lastState.text=e.name.text,this.lastState.sloganText=e.slogan.text,e.letter&&(this.lastState.symbolText=e.letter.text),this.creator.create({id:this.creator.logoID,text:this.lastState.text,sloganText:this.lastState.sloganText,symbolText:this.lastState.symbolText,savedState:{state:{elements:{icon:this.lastState.icon}},version:t.version}})}saveStateBeforeStructureChange(){this.savedStateBeforeStructureChange=this.saveObject({},this.creator.logo)}dismissStructureChange(){this.creator.savedStateBeforeStructureChange=null,this.savedStateBeforeStructureChange=null,this.isFirstTapOnShape=!0}saveState(){this.savedState=this.saveObject({},this.creator.logo)}saveObject(t,e,s=new WeakSet){return Object.keys(e).forEach((i=>{const a=e[i];s.has(a)||(a instanceof Object&&s.add(a),a instanceof b.A?t[i]=a.clone():(a instanceof x.A||a instanceof w.A)&&(t[i]=this.saveObject({},a,s)))})),t}async restoreState(){this.savedStateBeforeStructureChange?(await this.creator.recreate({state:this.creator.savedStateBeforeStructureChange}),this.restoreObject(this.creator.logo,this.savedStateBeforeStructureChange),this.creator.draw()):(this.restoreObject(this.creator.logo,this.savedState),this.creator.draw()),this.isFirstTapOnShape=!0,this.savedState=null,this.savedStateBeforeStructureChange=null,this.creator.savedStateBeforeStructureChange=null}restoreObject(t,e){Object.keys(e).forEach((s=>{const i=e[s];i instanceof b.A?i instanceof E.A?t[s].set(i.index):t[s].set(i.value):"object"==typeof i&&this.restoreObject(t[s],i)}))}deactivate(){this.screens.forEach((t=>{t.tabs&&t.tabs.forEach((t=>{t.attributes&&t.attributes.forEach((t=>{t.control&&t.control.deactivate&&t.control.deactivate()}))}))}))}enableTab(t,e,s=!0){this.screens.forEach((i=>{i.screen.name===t&&i.tabs&&i.tabs.forEach((t=>{t.tab.name===e&&(0,Ge.A)(t.item).toggleClass("disabled",!s)}))}))}enableAttribute(t,e=!0){this.screens.forEach((s=>{s.tabs&&s.tabs.forEach((s=>{s.attributes&&s.attributes.forEach((s=>{this.findAttribute(s)===t&&(0,Ge.A)(s.item).toggleClass("disabled",!e)}))}))}))}findAttribute(t){let e=null;if(t.attribute){const s=t.attribute.data;e=s?s.hsv?s.hsv:s.bool?s.bool:s.attribute:t.attribute.attribute}return e}enableAllAttributesExcept(t,e=!0){this.screens.forEach((s=>{s.tabs&&s.tabs.forEach((s=>{s.attributes&&s.attributes.some((e=>t.includes(this.findAttribute(e))))&&s.attributes.forEach((s=>{t.includes(this.findAttribute(s))||(0,Ge.A)(s.item).toggleClass("disabled",!e)}))}))}))}checkScrollStatus(t,e=0,s=!1){if(!t||!t.length)return;s&&(t[0].scrollLeft=0);const i=t[0].scrollWidth>t[0].clientWidth;t.toggleClass("scrollable",i);let a=[];switch(e){case 0:a=[this.buttonPrevious1[0],this.buttonNext1[0]],(0,Ge.A)([this.buttonPrevious2[0],this.buttonNext2[0]]).removeClass("active"),(0,Ge.A)([this.buttonPrevious3[0],this.buttonNext3[0]]).removeClass("active");break;case 1:a=[this.buttonPrevious1[0],this.buttonNext1[0]];break;case 2:a=[this.buttonPrevious2[0],this.buttonNext2[0]];break;case 3:a=[this.buttonPrevious3[0],this.buttonNext3[0]]}(0,Ge.A)(a).toggleClass("active",i).off("click"),i&&((0,Ge.A)(a[0]).off().on("click",(e=>{e.stopPropagation(),new Ve.A({scroll:t[0].scrollLeft}).to({scroll:Math.max(0,t[0].scrollLeft-200)},.35).onUpdate((e=>{t[0].scrollLeft=e.scroll})).easing(r.Ux.IN_OUT).start()})),(0,Ge.A)(a[1]).off().on("click",(e=>{e.stopPropagation(),new Ve.A({scroll:t[0].scrollLeft}).to({scroll:Math.min(t[0].clientWidth,t[0].scrollLeft+200)},.35).onUpdate((e=>{t[0].scrollLeft=e.scroll})).easing(r.Ux.IN_OUT).start()})))}activateItem(t=null){this.isFirstTapOnShape&&(this.dismissStructureChange(),this.saveState(),this.isFirstTapOnShape=!1);let e=null,s=null;this.screens.forEach((i=>{i.screen.item!==t&&i.screen.name!==t||(e=i),i.tabs.forEach((a=>{a.tab.item!==t&&a.tab.name!==t||(e=i,s=a)})),i.deactivate({skipAnimation:!0})})),e&&!s&&(s=e.tabs[0]),this.screens.forEach((t=>{t===e&&(t.activate({skipAnimation:!0,skipSaveState:!0}),t.tabs.forEach((t=>{t===s&&t.activate()})))})),this.onResize(!0)}onResize(t=!1){this.checkScrollStatus(this.items,0,t),this.screens.forEach((e=>{e.isActive&&(this.checkScrollStatus(e.items,1,t),e.tabs&&e.tabs.forEach((e=>{e.isActive&&this.checkScrollStatus(e.items,2,t),e.attributes&&e.attributes.forEach((e=>{if(e.control.onUpdateCallback){const t=e&&e.attribute&&e.attribute.data&&e.attribute.data.attribute?e.attribute.data.attribute.value:e.attribute.value;e.control.onUpdateCallback(t)}e.isActive&&this.checkScrollStatus(e.control.isScrollable?(0,Ge.A)(e.control.div):null,3,t)}))})))}))}};var Ke=s(111);function Ze(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Ye=class{constructor({attribute:t=null,creator:e=null}={}){Ze(this,"div",null),Ze(this,"creator",null),Ze(this,"attribute",null),Ze(this,"control",null),this.creator=e,this.attribute=t.attribute;const s=(0,Ge.A)("<div>").addClass("c-button-text");this.control=(0,Ge.A)("<div>").addClass("c-button-text__button").text("randomize").appendTo(s),this.div=s[0]}activate(){this.control.on("click",(()=>this.onUpdate()))}deactivate(){this.control.off("click")}onUpdate(){this.attribute.randomize(),this.updateState()}updateState(){this.creator.draw()}};var Qe=s(9038),Je=s(5647),ts=s(3319),es=s(7912),ss=s(1212),is=s(6890);function as(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const ns=class{constructor({data:t=null,creator:e=null}={}){as(this,"div",null),as(this,"creator",null),as(this,"$content",null),as(this,"$button",null),as(this,"$text",null),as(this,"$categories",null),as(this,"$fontList",null),as(this,"$close",null),as(this,"state",null),as(this,"stylesheet",null),as(this,"fonts",[]),as(this,"categories",[]),as(this,"category",null),as(this,"slider",null),as(this,"weight",null),as(this,"weightSetIndex",null),as(this,"skipUpdateList",!1),this.creator=e,this.state=t.state,this.weightSets={"sans-serif":[{name:"light",weights:[0,1,2]},{name:"regular",weights:[3]},{name:"bold",weights:[4,5,6,7,8]}],serif:[{name:"light",weights:[0,1,2]},{name:"regular",weights:[3]},{name:"bold",weights:[4,5,6,7,8]}]},this.stylesheet=(0,Ge.A)(".js-font-styles")[0],this.stylesheet||(this.stylesheet=(0,Ge.A)("<style>").addClass("js-font-styles").appendTo(document.head)[0]);const s=(0,Ge.A)("<div>").addClass("c-button-text");this.$content=(0,Ge.A)(".js-font-selector"),this.$categories=(0,Ge.A)(".js-font-selector__categories"),this.$weight=(0,Ge.A)(".js-font-selector__weight"),this.$close=(0,Ge.A)(".js-font-selector__close"),this.$button=(0,Ge.A)("<div>").text("select").addClass("c-button-text__button").appendTo(s),this.$text=(0,Ge.A)("<span>").text(`${this.state.font.family.value} / ${this.state.font.variant.value}`).addClass("c-button-text__text").appendTo(s),this.div=s[0]}activate(){this.$button.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.show()})),this.$close.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.deactivate(),this.removeContent(),this.hide()}))}deactivate(){[this.$button,this.$fontList,this.$categories,this.$close].forEach((t=>{t&&t.off()})),this.option&&this.option.deactivate&&this.option.deactivate()}onUpdate(){}updateOptions(){this.$weight.empty();const t=this.weightSets[this.category];if(this.weightSets[this.category]){const e="regular"===this.weight?4:Number(this.weight)/100,s=t.findIndex((t=>t.weights.includes(e-1)));-1!==s&&(this.option=new is.A({attribute:{attribute:new E.A(Object.keys(t).map(Number)).setValue(s).setLabel("style",t.map((t=>t.name))),onUpdate:t=>{this.$fontList&&(this.weightSetIndex=t,this.skipUpdateList||this.updateList(),Je.A.closeMenu())}}}),(0,Ge.A)(this.option.div).appendTo(this.$weight),this.option.activate())}else this.option=null}updateList({isFocusingOnFont:t=!1}={}){(0,Ge.A)(".js-overlay-scrollable")[0].scrollTop=0;let e=null;const s=document.createDocumentFragment(),i=y((0,ts.A)(this.state.text.value)," ,AZ,az");let a=null;this.fonts.filter((t=>{const e=this.weightSets[this.category];let s=!0;if(e){const i="regular"===t.weight?4:Number(t.weight)/100;s=e.findIndex((t=>t.weights.includes(i-1)))===this.weightSetIndex}return t.category===this.category&&s})).sort(((t,e)=>`${t.family}${t.style}${t.weight}`.localeCompare(`${e.family}${e.style}${e.weight}`))).forEach((t=>{const n=(0,Ge.A)("<div>").addClass("b-font-selector__font").data("category",t.category).data("family",t.family).data("variant",t.variant).appendTo(s),o=(0,Ge.A)("<div>").addClass("b-font-selector__font-inner").appendTo(n);(0,Ge.A)("<div>").addClass("b-font-selector__name").text(t.family).appendTo(o),(0,Ge.A)("<div>").addClass("b-font-selector__text").text((0,ts.A)(this.state.text.value)).css({fontFamily:t.family,fontStyle:t.style,fontWeight:t.weight}).appendTo(o),t.family===this.state.font.family.value&&t.variant===this.state.font.variant.value&&(e=n[0],n.addClass("active"));const h=this.getFontURL(t.file,i),l=`@font-face {font-family: "${t.family}"; font-weight: ${t.weight}; font-style: ${t.style}; src: url(${h});}`,c=this.stylesheet.sheet;if(r.fV.LOADED_FONTS.includes(l))n.addClass("loaded").css({transitionDelay:0,transition:"none"});else{const t=()=>{c.insertRule(l,c.cssRules.length),n.addClass("loaded"),r.fV.LOADED_FONTS.push(l)};fetch(h).then((()=>{t()})).catch((e=>{a=e,t()}))}})),a&&ss.A.captureError(a),this.$fontList.empty()[0].appendChild(s),t&&e&&((0,Ge.A)(".js-overlay-scrollable")[0].scrollTop=Math.floor(e.offsetTop-window.innerHeight/2))}getFontURL(t,e=!1){return e?`${r.oB.FONT_PATH_MIN}${t}`:`${r.oB.FONT_PATH}${t}`}async show(){(0,Ge.A)(".js-font-selector-content").addClass("active"),this.$content.addClass("active"),this.$categories.off().on("click",(t=>this.onCategoryClick(t))),this.$fontList=(0,Ge.A)(".js-font-selector__fonts"),this.$fontList.off().on("click",(t=>this.onFontClick(t))),this.fonts=[];const t=(0,ts.A)(this.state.text.value);if(r.oB.FONTS.items.forEach((e=>{e.variants.forEach((s=>{if(y(t,e.glyphs,s)){const t={category:e.category,family:e.family,file:e.files[s],style:-1===s.indexOf("italic")?"normal":"italic",weight:s.replace("italic",""),variant:s};this.categories.includes(e.category)||this.categories.push(e.category),this.fonts.push(t),t.family===this.state.font.family.value&&t.variant===this.state.font.variant.value&&(this.category=e.category,this.weight=t.weight)}}))})),!this.category||!this.weight){const t=r.oB.FONTS.items.find((t=>"Open Sans"===t.family));this.category=t.category,this.weight="regular"}if(this.$categories.empty(),this.categories.forEach((t=>{const e=(0,Ge.A)("<div>").addClass("b-navigation__item b-font-selector__category").data("category",t).appendTo(this.$categories[0]).text(t);t===this.category&&e.addClass("active")})),!this.fonts.length)throw new Error("no font match");this.skipUpdateList=!0,this.updateOptions(),Je.A.setNavigation(this.$content,this.$content.find(".js-modal-navigation")),await es.A.show(),this.updateList({isFocusingOnFont:!0}),this.skipUpdateList=!1}onFontClick(t){this.$fontList.off("click");let e=t.target;for(;e&&!(0,Ge.A)(e).data("family");)e=e.parentNode;this.activateFont({family:(0,Ge.A)(e).data("family"),variant:(0,Ge.A)(e).data("variant")})}onCategoryClick(t){let e=t.target;for(;e&&!(0,Ge.A)(e).data("category");)e=e.parentNode;this.category=(0,Ge.A)(e).data("category"),this.categories.forEach(((t,e)=>{const s=this.$categories.children().get(e);s.toggleClass("active",s.data("category")===this.category)})),this.weight="regular",this.updateList(),this.updateOptions(),Je.A.closeMenu()}removeContent(){if(this.option&&this.option.div){const t=(0,Ge.A)(this.option.div);t&&t.length&&t.remove()}this.$fontList&&this.$fontList.length&&this.$fontList.empty()}async hide(){this.$content.removeClass("active"),await es.A.hide(),(0,Ge.A)(".js-variation-selector-content").removeClass("active"),Je.A.unsetNavigation()}async activateFont(t){this.creator.saveStateBeforeStructureChange((()=>{this.state.font.family.set(t.family),this.state.font.variant.set(t.variant)})),this.creator.recreate({showSameAttribute:!0}),this.removeContent(),await this.hide()}};var os=s(1999);function rs(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const hs=class{constructor({data:t=null,creator:e=null}={}){rs(this,"div",null),rs(this,"creator",null),rs(this,"input",null),rs(this,"hsv",null),rs(this,"attribute",null),rs(this,"linked",[]),rs(this,"linkedIndex",null),rs(this,"id",null),rs(this,"$swatch",null),rs(this,"$name",null),rs(this,"$linked",null),rs(this,"$links",null),rs(this,"switch",null),rs(this,"boolAttribute",null),rs(this,"links",null),rs(this,"useLinks",null),this.creator=e,this.hsv=t.hsv,this.attribute=t.attribute,this.id=t.id,this.useLinks=void 0===t.useLinks||t.useLinks;const s=this.creator.logo.state.type,i=(0,Ge.A)("<div>").addClass("c-hex"),a=(0,Ge.A)("<div>").addClass("c-hex__wrap").appendTo(i);if(this.$swatch=(0,Ge.A)("<div>").addClass("c-hex__swatch").appendTo(a),this.useLinks&&(this.links=s.state.links,this.linked=this.links[this.id].links.options.filter((t=>s.ids.includes(t))),this.links[this.id].links.value&&!this.linked.includes(this.links[this.id].links.value)&&(this.links[this.id].links.set(0),this.links[this.id].linkedTo.set("")),this.links[this.id].linkedTo.value&&!this.linked.includes(this.links[this.id].linkedTo.value)&&this.links[this.id].linkedTo.set(this.linked[0]),this.linked&&this.linked.length>0)){let i=this.links[this.id].linkedTo.value;i&&s.ids.includes(i)||(i=this.links[this.id].links.value),this.boolAttribute=new M.A,this.switch=new Ke.A({creator:e,attribute:{attribute:this.boolAttribute,onUpdate:()=>{this.onSwitchUpdate(this.boolAttribute.value),t.onBoolUpdate&&t.onBoolUpdate(this.boolAttribute.value)},onClick:t=>{this.creator.saveStateBeforeStructureChange((()=>{this.links[this.id].active.set(t),this.links[this.id].linkedTo.set(i)})),this.creator.recreate({showSameAttribute:!0})}},hasLabels:!1}),(0,Ge.A)(this.switch.div).appendTo(a),this.$linked=(0,Ge.A)("<div>").addClass("c-hex__linked").appendTo(a),(0,Ge.A)("<div>").addClass("c-hex__text").text("link to:").appendTo(this.$linked);const o=[];this.linked.forEach(((t,e)=>{const s=t===i;s&&(this.linkedIndex=e);const a=(0,Ge.A)("<div>").addClass("c-hex__link").toggleClass("active",s).appendTo(this.$linked);o.push(a[0]);let h=(0,n.A)(t);r.tS[h]&&(h=r.tS[h]),(0,Ge.A)("<div>").addClass("icon").addClass(`icon-${h}`).appendTo(a)})),this.$links=(0,Ge.A)(o),this.$name=(0,Ge.A)("<div>").addClass("c-hex__text").appendTo(this.$linked)}this.div=i[0]}onSwitchUpdate(t){this.useLinks&&(this.$linked.toggleClass("active",t),t?this.enableLink():this.disableLink())}activate(){this.switch&&(this.links[this.id].active.value&&(this.linkedIndex=this.linked.findIndex((t=>t===this.links[this.id].linkedTo.value)),-1===this.linkedIndex&&(this.linkedIndex=null),null!==this.linkedIndex&&(this.boolAttribute.set(!0),this.link(this.linkedIndex))),this.switch.activate()),this.$swatch.on("click",(()=>{this.creator.picker.swatchColors?.length||this.creator.picker.setSwatchColors(Object.values(this.creator.logo.state.type.state.colors.state).reduce(((t,e)=>{const s=e?.color?.original;return s&&!t.includes(s)&&t.push(s),t}),[])),this.creator.picker.show(this.getHex(),(t=>{if(!this.creator.picker.hasBeenDragged){const t=this.$swatch.offset();this.creator.picker.position(t.left,t.top-this.creator.picker.$picker.height()+this.$swatch.height())}this.setHex(t),this.onUpdate()}))})),this.onUpdate(),(0,os.A)()}enableLink(){this.useLinks&&(this.$links.each(((t,e)=>{(0,Ge.A)(t).on("click",(()=>{this.linkedIndex!==e&&(this.creator.saveStateBeforeStructureChange((()=>{this.links[this.id].linkedTo.set(this.linked[e]),this.link(e)})),this.creator.recreate({showSameAttribute:!0}))}))})),null!==this.linkedIndex&&this.link(this.linkedIndex))}disableLink(){this.useLinks&&this.$links.off()}link(t){if(!this.useLinks)return;this.linkedIndex=t,this.$links.each(((e,s)=>{(0,Ge.A)(e).toggleClass("active",t===s)}));let e=(0,n.A)(this.linked[t]);r.R9[e]&&(e=r.R9[e]),this.$name.text(e)}deactivate(){this.$links&&this.$links.each((t=>{(0,Ge.A)(t).off("click")})),this.switch&&this.switch.deactivate&&this.switch.deactivate(),this.$swatch.off("click"),this.creator.picker.hide()}async onUpdate(){const t=this.getHex();let e=this.id;this.useLinks&&this.links[e].active.value&&(e=this.links[e].linkedTo.value||this.id);const s=this.creator.logo.state.type.getLayerFromID(e)?this.creator.logo.state.type.getLayerFromID(e)[0].id:e;this.creator.logo.state.type.state.colors.state.scheme[s].set(t),this.$swatch.css({backgroundColor:t}),this.creator.draw()}setColor(t,e=this.hsv){this.copyAttributes(e,t),this.copyAttributes(e.gradient,t.gradient)}getHex(t=this.hsv){return I.A.hsv2hex(t.hue.value,t.saturation.value,t.value.value)}setHex(t,e=this.hsv){if(!t||!/^#?(([a-f\d]){3}|([a-f\d]){6})$/i.test(t))return;const s=I.A.hex2hsv(t);e.hue.set(s[0]),e.saturation.set(s[1]),e.value.set(s[2])}};var ls=s(7410),cs=s(6646);function ds(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const us=class{constructor({data:t=null,creator:e=null}={}){ds(this,"div",null),ds(this,"creator",null),ds(this,"shape",null),ds(this,"models",[]),ds(this,"$values",[]),ds(this,"isScrollable",!0),ds(this,"onUpdateCallback",null),this.creator=e,this.shape=t.shape,this.onUpdateCallback=t.onUpdate,this.models=void 0!==t.models?t.models:this.shape.models;const s=t.classPrefix||"",i=(0,Ge.A)("<div>").addClass("c-shape");this.models.forEach(((t,e)=>{const a=(0,Ge.A)("<div>").addClass("c-shape__value").appendTo(i);(0,Ge.A)("<div>").addClass("icon").addClass(`icon-${s?`${s}-`:""}${(0,n.A)(t)}`).appendTo(a),this.$values.push(a)})),this.div=i[0]}activate(){this.$values.forEach(((t,e)=>{t.on("click",(()=>this.onUpdate(e)))})),this.update(this.models.findIndex((t=>t===this.shape.model.value)))}deactivate(){this.$values.forEach((t=>t.off("click")))}onUpdate(t){this.update(t),this.creator.saveStateBeforeStructureChange((()=>{this.shape.model.set(this.models[t]),this.onUpdateCallback&&this.onUpdateCallback(this.models[t])})),this.creator.recreate({showSameAttribute:!0})}update(t){this.$values.forEach(((e,s)=>{e.toggleClass("active",s===t)}))}};var ps=s(307);function ms(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const gs=class{constructor({attribute:t=null,creator:e=null}={}){ms(this,"div",null),ms(this,"creator",null),ms(this,"attribute",null),ms(this,"input",null),ms(this,"onUpdateCallback",null),this.creator=e,this.attribute=t.attribute,this.onUpdateCallback=t.onUpdate;const s=(0,Ge.A)("<div>").addClass("c-text");this.input=(0,Ge.A)("<input>").addClass("c-text__value").attributes({type:"text",id:`input-${(0,o.A)()}`,name:`input-${(0,o.A)()}`,maxlength:r.UI.MAX_TEXT_LENGTH}).appendTo(s),this.input[0].value=this.attribute.value,this.div=s[0]}activate(){this.input.on("input",(()=>this.onUpdate())),this.input[0].value=this.attribute.value,this.onUpdate()}deactivate(){this.input.off("input")}onUpdate(){this.attribute.set(this.input[0].value),this.onUpdateCallback&&this.onUpdateCallback(this.attribute.value),this.creator.draw()}};function fs(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const ys=class{constructor(t,e,s){fs(this,"index",0),fs(this,"controls",[]),fs(this,"item",null),fs(this,"content",null),fs(this,"isActive",!1),this.parent=t,this.attribute=e,this.index=s,this.creator=this.parent.parent.parent.creator;const i=e.icon||e.name.replace(/ /g,"-");this.item=(0,Ge.A)("<div>").text(e.name).addClass(`b-control__attribute-item icon-${i}`).appendTo(t.items),this.content=(0,Ge.A)("<div>").addClass("b-control__attribute-content").appendTo(t.contents),this.control=e.attribute?this.addControl(e):this.addDataControl(e.type,e.data),this.control&&this.control.div&&this.content[0].appendChild(this.control.div),this.item.on("click",(t=>{t.stopPropagation(),(0,Ge.A)(this.item).hasClass("disabled")||this.activate()}))}addDataControl(t,e){let s=null;switch(t){case"font":s=new ns({creator:this.creator,data:e});break;case"icon":s=new ls.A({creator:this.creator,data:e});break;case"hex":s=new hs({creator:this.creator,data:e});break;case"shape":s=new us({creator:this.creator,data:e});break;case"optionIcon":s=new ps.A({creator:this.creator,data:e});break;case"boolSlider":s=new Qe.A({creator:this.creator,data:e});break;default:throw new Error("invalid control type")}return s}addControl(t){const e=t.attribute;let s=null;return e instanceof T.A||e instanceof F.A?s=new cs.A({creator:this.creator,attribute:t}):e instanceof E.A?s=new is.A({creator:this.creator,attribute:t}):e instanceof S.A?s=new gs({creator:this.creator,attribute:t}):e instanceof M.A?s=new Ke.A({creator:this.creator,attribute:t}):e instanceof O&&(s=new Ye({creator:this.creator,attribute:t})),s}activate(){this.isActive||(this.isActive=!0,this.item.addClass("active"),this.content.addClass("active"),this.parent.attributes.forEach(((t,e)=>{e!==this.index&&t.deactivate&&t.deactivate()})),this.control&&this.control.activate(),this.parent.parent.parent.onResize())}deactivate(){this.isActive&&(this.isActive=!1,this.item.removeClass("active"),this.content.removeClass("active"),this.control&&this.control.deactivate&&this.control.deactivate(),this.parent.parent.parent.onResize())}};function vs(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const bs=class{constructor(t,e,s){vs(this,"attributes",[]),vs(this,"index",0),vs(this,"item",null),vs(this,"content",null),vs(this,"items",null),vs(this,"contents",null),vs(this,"isActive",!1),this.parent=t,this.tab=e,this.index=s;const i=e.name,a=e.icon||i.replace(/ /g,"-");this.item=(0,Ge.A)("<div>").text(i).addClass(`b-control__tab-item icon-${a}`).appendTo(t.items),this.content=(0,Ge.A)("<div>").addClass("b-control__tab-content").appendTo(t.contents),this.items=(0,Ge.A)("<div>").addClass("b-control__attribute-items").appendTo(this.content),this.contents=(0,Ge.A)("<div>").addClass("b-control__attribute-contents").appendTo(this.content),this.item.on("click",(t=>{t.stopPropagation(),(0,Ge.A)(this.item).hasClass("disabled")||(this.tab.shapeType?this.parent.parent.creator.shapeSelector.selectType(this.tab.shapeType):this.parent.parent.creator.shapeSelector.selectType(this.parent.screen.shapeType),this.activate())})),e.contents.forEach(((t,e)=>{this.attributes.push(new ys(this,t,e))}))}activate(){if(this.isActive)return;const t=this.parent.tabs.findIndex((t=>t.isActive));-1===t||this.parent.tabs[t].attributes.findIndex((t=>t.isActive)),this.isActive=!0,this.item.addClass("active"),this.content.addClass("active"),this.items.addClass("active"),this.contents.addClass("active"),this.parent.tabs.forEach(((t,e)=>{e!==this.index&&t.deactivate()}));let e=null;e=this.attributes[0],e&&e.activate(),this.parent.parent.onResize()}deactivate(){this.isActive&&(this.isActive=!1,this.item.removeClass("active"),this.content.removeClass("active"),this.items.removeClass("active"),this.contents.removeClass("active"),this.attributes.forEach((t=>{t.deactivate&&t.deactivate()})),this.parent.parent.onResize())}};function xs(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const ws=class{constructor(t,e,s){xs(this,"tabs",[]),xs(this,"index",0),xs(this,"item",null),xs(this,"content",null),xs(this,"isActive",!1),xs(this,"tween",null),xs(this,"isAnimating",!1),this.parent=t,this.screen=e,this.index=s;const i=e.name,a=e.icon||i.replace(/ /g,"-");this.item=(0,Ge.A)("<div>").text(i).addClass(`b-control__screen-item icon-${a}`).appendTo(t.items),this.content=(0,Ge.A)("<div>").addClass("b-control__screen-content").appendTo(t.contents),this.items=(0,Ge.A)("<div>").addClass("b-control__tab-items").appendTo(this.content),this.contents=(0,Ge.A)("<div>").addClass("b-control__tab-contents").appendTo(this.content),this.item.on("click",(t=>{t.stopPropagation(),this.isAnimating||(this.parent.creator.shapeSelector.selectType(this.screen.shapeType),this.activate())})),this.label=(0,Ge.A)("<div>").addClass(`b-control__screen-label icon-${a}`).text(i).appendTo(this.items[0]),e.contents.forEach(((t,e)=>{this.tabs.push(new bs(this,t,e))}))}activate({skipAnimation:t=!1,skipSaveState:e=!1}={}){this.isActive=!0,this.isAnimating=!0,this.parent.onResize();const s=this.tabs.findIndex((t=>t.isActive));let i=-1===s?0:s;for(;i<this.tabs.length&&this.tabs[i].item.hasClass("disabled");)i++;this.tabs[i].activate(),e||this.parent.saveState(),this.tween=new Ve.A((t=>{this.parent.items.css({opacity:1-t.value,transform:`translate3d(0, ${-.5*t.value}rem, 0)`}),this.parent.saveButtons.div.css({opacity:1-t.value,transform:`translate3d(0, ${-.5*t.value}rem, 0)`}),this.parent.contents.css({opacity:t.value,transform:`translate3d(0, ${.5*(1-t.value)}rem, 0)`}),this.parent.buttons.div.css({opacity:t.value,transform:`translate3d(0, ${.5*(1-t.value)}rem, 0)`})}),t?0:.35).easing(r.Ux.OUT).onStart((()=>{this.item.addClass("active"),this.content.addClass("active"),this.items.addClass("active"),this.contents.addClass("active"),this.parent.contents.addClass("active"),this.parent.buttons.div.addClass("active"),this.parent.onResize()})).onComplete((()=>{this.isAnimating=!1,this.parent.items.removeClass("active"),this.parent.saveButtons.div.removeClass("active"),this.parent.creator.inputManager.resize()})).start()}deactivate({skipAnimation:t=!1}={}){this.isActive&&(this.isActive=!1,this.isAnimating=!0,this.tween=new Ve.A((t=>{this.parent.items.css({opacity:t.value,transform:`translate3d(0, ${-.5*(1-t.value)}rem, 0)`}),this.parent.saveButtons.div.css({opacity:t.value,transform:`translate3d(0, ${-.5*(1-t.value)}rem, 0)`}),this.parent.contents.css({opacity:1-t.value,transform:`translate3d(0, ${.5*t.value}rem, 0)`}),this.parent.buttons.div.css({opacity:1-t.value,transform:`translate3d(0, ${.5*t.value}rem, 0)`})}),t?0:.35).easing(r.Ux.OUT).onStart((()=>{this.parent.items.addClass("active")})).onComplete((()=>{this.isAnimating=!1,this.item.removeClass("active"),this.content.removeClass("active"),this.parent.saveButtons.div.addClass("active"),this.parent.buttons.div.removeClass("active"),this.parent.contents.removeClass("active"),this.parent.onResize(),this.tabs.forEach((t=>{t.deactivate()}))})).start())}};const Ss=class{constructor(t,e){var s,i,a,n;s=this,a=null,(i="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i="parent"))?n:n+"")in s?Object.defineProperty(s,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[i]=a,this.parent=t;const o=(0,Ge.A)("<div>").addClass("b-control__buttons");(0,Ge.A)("<div>").html(t.translations.cancel||"cancel").addClass("b-control__button--cancel").on("click",(t=>this.onCancel(t))).appendTo(o),(0,Ge.A)("<div>").html(t.translations.ok||"ok").addClass("b-control__button--confirm").on("click",(t=>this.onConfirm(t))).appendTo(o),this.div=o,o.appendTo(e)}onCancel(t){t.stopPropagation(),this.isAnimating||(this.parent.restoreState(),this.dismiss())}onConfirm(t){t.stopPropagation(),this.isAnimating||(this.parent.dismissStructureChange(),this.dismiss())}dismiss(){this.parent.creator.shapeSelector.hideSelected(),this.parent.screens.forEach((t=>{t.isActive&&t.deactivate()}))}};var As=s(3626),ks=s(7664);function Bs(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Cs=class{constructor(t,e){Bs(this,"parent",null),Bs(this,"isSaving",!1),Bs(this,"div",null),Bs(this,"$buttonSave",null),Bs(this,"$buttonVariations",null),this.parent=t,this.div=(0,Ge.A)("<div>").addClass("b-control__save-buttons").addClass("active"),this.$buttonVariations=(0,Ge.A)("<div>").addClass("b-control__button--secondary").html(t.translations.logoVariations||"logo variations").on("click",(()=>{this.parent.creator.variations.activate(),this.parent.creator.variations.show()})),(0,Ge.A)(".js-logo-controls").hasClass("is-logged-in")?this.$buttonSave=(0,Ge.A)("<div>").addClass("b-control__button--confirm").html(t.translations.saveLogo||"save logo").on("click",(async()=>{if(!this.isSaving){this.isSaving=!0;try{await this.parent.onSave()}catch(t){ss.A.captureError(t,{})}this.isSaving=!1}})):(this.$buttonSave=(0,Ge.A)("<div>").html(t.translations.registerAndSave||"register and save").addClass("b-control__button--confirm js-show-modal").data("modal","js-modal-register"),(0,Ge.A)(".js-modal-register").find(".js-submit-register").off().on("click",(async t=>{if(t.preventDefault(),t.stopPropagation(),!this.isSaving){this.isSaving=!0;try{const t=JSON.stringify(this.parent.creator.logo.getState());await(0,We.A)(`${He.Km.DOMAIN}/api/register`,{...(0,As.A)((0,Ge.A)(".js-register-form")[0]),savedLogoState:t},{error:"error registering your account",isInBody:!1,useServerError:!0,onSuccess:async()=>{await ks.A.trackRegister()}})}catch(t){}this.isSaving=!1}})),(0,Ge.A)(".js-modal-register").find(".js-submit-login").off().on("click",(async t=>{if(t.preventDefault(),t.stopPropagation(),!this.isSaving){this.isSaving=!0;try{const t=JSON.stringify(this.parent.creator.logo.getState());await(0,We.A)(`${He.Km.DOMAIN}/api/account/login`,{...(0,As.A)((0,Ge.A)(".js-login-form")[0]),savedLogoState:t},{error:"error logging in",isInBody:!1,useServerError:!0})}catch(t){}this.isSaving=!1}}))),this.$buttonVariations&&this.$buttonVariations.appendTo(this.div),this.$buttonSave&&((0,Ge.A)("<div>").addClass("b-control__loading-icon").appendTo(this.div),this.$buttonSave.appendTo(this.div)),this.div.appendTo(e)}};var Ms=s(7739);function Ts(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Es=class extends Xe{constructor(...t){super(...t),Ts(this,"screens",[]),Ts(this,"items",null),Ts(this,"contents",null),Ts(this,"buttons",null)}getInteractiveAttributes(t,{keys:e=null,ignore:s=[],onUpdate:i=null}={}){const a=[];return e?e.forEach((e=>{const s=t[e];s instanceof b.A&&s.isInteractive&&a.push({name:s.label,icon:s.icon,onUpdate:i?()=>i(e):null,attribute:s})})):Object.keys(t).forEach((e=>{const n=t[e];n instanceof b.A&&n.isInteractive&&!s.includes(e)&&a.push({name:n.label||e,icon:n.icon,onUpdate:i?()=>i(e):null,attribute:n})})),a.sort(((t,e)=>t.attribute.order-e.attribute.order)),a}getTextSettings(t){const e=[{name:"edit",attribute:t.text,onUpdate:e=>{if(void 0===e)return;const s=e&&(e.match(/(?:\\\||[^|])+/g)||[]).length>1;this.enableAttribute(t.lining,s),this.enableAttribute(t.hasBoxedText,s)}},{name:"font",type:"font",data:{state:t}}];return e.push(...this.getInteractiveAttributes(t,{ignore:["text","font"]})),e}getStructureSettings(){const t=this.creator.logo.state.type,e=[{name:"type",type:"shape",data:{shape:this.creator.logo.state,classPrefix:"structure"}},{name:"size",attribute:t.state.size}];return t.hasTextInsideSymbol&&e.push({name:"content size",attribute:t.state.contentSize}),{name:"layout",contents:[{name:"layout",contents:e}]}}getSymbolSettings(){const t=this.creator.logo.state.type,e=t.state.elements.symbol.state.type.state,s=[{name:"type",type:"shape",data:{shape:t.state.elements.symbol.state,classPrefix:"shape"}}];t.hasTextInsideSymbol||s.push({name:"size",attribute:t.state.sizeFactor}),s.push(...this.getInteractiveAttributes(e,{ignore:["cornerType","cornerRadius","hasStroke","strokeWidth","strokeOffset"]}));const i=[{name:"fill",contents:this.getFillSettings("symbol",!0)},{name:"effect",contents:this.getEffectSettings("symbol")}];i.push({name:"shape",contents:s});const a=[];return e.cornerType&&e.cornerType.isInteractive&&a.push({name:"corners",type:"optionIcon",data:{attribute:e.cornerType,classPrefix:"corners"}},{name:"corner size",attribute:e.cornerRadius}),a.length&&i.push({name:"outline",contents:a}),{name:"symbol",type:"symbol",shapeType:"symbol",contents:i}}getSymbolContentSettings(){const t=this.creator.logo.state.type,e=t.state.elements.symbol.state.type.state,s=t.state.elements.symbolContent.state.type.state,i=()=>{const t=e.hasStroke.value||s.ring.active.value||s.hole.active.value;this.enableTab("cut-out","fill",t),this.enableTab("cut-out","effect",t)},a=[{name:"line",icon:"stroke",type:"boolSlider",data:{bool:e.hasStroke,slider:e.strokeOffset,onBoolUpdate:t=>{this.enableAttribute(e.strokeWidth,t),i()}}},{name:"line position",icon:"stroke-offset",attribute:e.strokeWidth},{name:"ring",type:"boolSlider",data:{bool:s.ring.active,slider:s.ring.width,onBoolUpdate:t=>{this.enableAttribute(s.ring.position,t),i()}}}];a.push(...this.getInteractiveAttributes(s.ring,{ignore:["active","width"]})),a.push({name:"hole",type:"boolSlider",data:{bool:s.hole.active,slider:s.hole.position,onBoolUpdate:()=>{i()}}});const n=[];return n.push({name:"fill",contents:this.getFillSettings("symbolContent",!0)}),n.push({name:"effect",contents:this.getEffectSettings("symbolContent")}),n.push({name:"shapes",contents:a}),{name:"cut-out",item:"symbolContent",shapeType:"symbolContent",contents:n}}getGradientSettings(t){return[{name:"gradient",type:"boolSlider",data:{bool:t.gradient.active,slider:t.gradient.range,onBoolUpdate:e=>{this.enableAllAttributesExcept([t,t.gradient.active,t.gradient.range],e)}}},{name:"type",type:"optionIcon",data:{attribute:t.gradient.type,classPrefix:"gradient",onUpdate:e=>{this.enableAttribute(t.gradient.radius,t.gradient.active.value&&1===e)}}}].concat(this.getInteractiveAttributes(t.gradient,{ignore:["active","range","type"]}))}getBackgroundSettings(){return this.creator.logo.state.type,{name:"background",shapeType:"background",contents:[{name:"fill",contents:this.getFillSettings("background",!0)},{name:"effect",contents:this.getEffectSettings("background")}]}}getIconSettings(){const t=this.creator.logo.state.type,e=t.state.elements.icon,s=[];return s.push({name:"icon",icon:"shape",contents:[{name:"replace icon",icon:"icon",type:"icon",data:{state:e.state}},{name:"size",attribute:t.hasSymbol?e.state.sizeFactor:t.state.sizeFactor},{name:"rotation",attribute:e.state.rotation},{name:"flip",attribute:e.state.isFlipped}]}),t.hasSymbol?s.push({name:"fill",contents:this.getFillSettings("icon",!0)},{name:"effect",contents:this.getEffectSettings("icon")}):s.push({name:"fill",contents:this.getFillSettings("symbol",!0)},{name:"effect",contents:this.getEffectSettings("symbol")}),{name:"icon",shapeType:"icon",contents:s}}getDividerSettings(){const t=this.creator.logo.state.type,e=t.state.elements.divider.state.type.state,s=[];return s.push({name:"line",icon:"divider",item:"divider",contents:[{name:"length",type:"boolSlider",data:{bool:e.active,slider:e.width,onBoolUpdate:t=>{this.enableAllAttributesExcept([e.active,e.width],t)}}},{name:"type",type:"shape",data:{shape:t.state.elements.divider.state,classPrefix:"divider"}}].concat(this.getInteractiveAttributes(e,{ignore:["active","width","hasStroke"]}))}),s.push({name:"fill",contents:this.getFillSettings("divider",!0)}),s.push({name:"effect",contents:this.getEffectSettings("divider")}),{name:"divider",shapeType:"divider",contents:s}}getNameSettings(){const t=this.creator.logo.state.type,e=[],s=this.getTextSettings(t.state.elements.name.state);return e.push({name:"text",icon:"typography",contents:s}),e.push({name:"fill",contents:this.getFillSettings("name",!0)}),e.push({name:"effect",contents:this.getEffectSettings("name")}),e.push({name:"shadow",contents:this.getShadowSettings("nameShadow")}),(t.hasIcon||t.hasLetter)&&s.splice(2,0,{name:"size",attribute:t.hasTextInsideSymbol?t.state.elements.icon.state.sizeFactor:t.state.sizeFactor,transform:t=>1-t}),{name:"name",shapeType:"name",contents:e}}getSloganSettings(){const t=this.creator.logo.state.type,e=[];return e.push({name:"text",icon:"typography",contents:this.getTextSettings(t.state.elements.slogan.state)}),e.push({name:"fill",contents:this.getFillSettings("slogan",!0)}),e.push({name:"effect",contents:this.getEffectSettings("slogan")}),{name:"slogan",shapeType:"slogan",contents:e}}getMonogramSettings(){const t=this.creator.logo.state.type;return{name:"monogram",shapeType:"monogram",contents:[{name:"text",icon:"typography",contents:this.getTextSettings(t.state.elements.letter.state)},{name:"fill",contents:this.getFillSettings("icon",!0)},{name:"effect",contents:this.getEffectSettings("icon")}]}}getFillSettings(t,e){const s=this.creator.logo.state.type,i=s.state.colors.state,a=s.getLayerFromID(t),n=a?a[0].color:i[t],o={name:"color",type:"hex",icon:"hue",data:{hsv:n,attribute:n,id:t}};return e?[o].concat(this.getGradientSettings(n)):[o]}getEffectSettings(t){const e=this.creator.logo.state.type,s=e.state.effects,i=e.getLayerFromID(t),a=i?i[0].effect.state:s[t].state,n=a.type.state;return[{name:"strength",type:"boolSlider",data:{bool:n.active,slider:n.strength,onBoolUpdate:t=>{this.enableAllAttributesExcept([n.active,n.strength],t)}}},{name:"type",type:"shape",data:{shape:a,classPrefix:"effect"}}].concat(this.getInteractiveAttributes(n,{ignore:["active","strength"]}))}getShadowSettings(t){const e=this.creator.logo.state.type,s=e.state.elements[t].state,i=s.type.state,a=e.state.colors.state[t],n={name:"color",type:"hex",icon:"hue",data:{hsv:a,attribute:a,id:t,useLinks:!1}};return[{name:"size",type:"boolSlider",data:{bool:i.active,slider:i.size,onBoolUpdate:t=>{this.enableAllAttributesExcept([i.active,i.size],t),this.enableTab("name","shadow fill",t),this.enableTab("name","shadow effect",t)}}},{name:"type",type:"shape",data:{shape:s,classPrefix:"shadow"}}].concat(this.getInteractiveAttributes(i,{ignore:["active","size"]})).concat(n)}update({showSameAttribute:t=!1}={}){const e=this.creator.logo.state.type;let s=null;if(t){const t=this.screens.find((t=>t.isActive)),e=t.tabs.find((t=>t.isActive)),i=e.attributes.find((t=>t.isActive));s=[t.index,e.index,i.index]}this.structure=[this.getStructureSettings(),this.getBackgroundSettings()],e.state.elements.symbol&&(this.structure.push(this.getSymbolSettings()),this.structure.push(this.getSymbolContentSettings())),e.hasIcon&&this.structure.push(this.getIconSettings()),this.structure.push(this.getNameSettings(),this.getDividerSettings(),this.getSloganSettings()),e.state.elements.letter&&!e.hasIcon&&this.structure.push(this.getMonogramSettings()),this.screens=[],(0,Ge.A)(this.container).empty(),this.addControls({path:s})}addControls({path:t=null}={}){const e=document.createDocumentFragment(),s=(0,Ge.A)("<div>").addClass("b-control").appendTo(e);if(this.items=(0,Ge.A)("<div>").addClass("b-control__screen-items").addClass("active").css({opacity:1,transform:"none"}).appendTo(s),this.buttonPrevious1=(0,Ge.A)("<div>").addClass("b-control__scroll-left1").appendTo(s),this.buttonNext1=(0,Ge.A)("<div>").addClass("b-control__scroll-right1").appendTo(s),this.buttonPrevious2=(0,Ge.A)("<div>").addClass("b-control__scroll-left2").appendTo(s),this.buttonNext2=(0,Ge.A)("<div>").addClass("b-control__scroll-right2").appendTo(s),this.buttonPrevious3=(0,Ge.A)("<div>").addClass("b-control__scroll-left3").appendTo(s),this.buttonNext3=(0,Ge.A)("<div>").addClass("b-control__scroll-right3").appendTo(s),this.contents=(0,Ge.A)("<div>").addClass("b-control__screen-contents").addClass("active").appendTo(s),this.buttons=new Ss(this,s),this.saveButtons=new Cs(this,s),this.structure.forEach(((t,e)=>{const s=new ws(this,t,e);this.screens.push(s)})),this.container.appendChild(e),t){const e=this.screens[t[0]],s=e.tabs[t[1]],i=s.attributes[t[2]];e.activate({skipAnimation:!0}),s.activate(),i.activate()}Ms.A.addModals(),this.onResize(!0)}};function Is(t={},e={}){return Object.keys(e).forEach((s=>{e[s]instanceof Object&&t[s]?t[s]=Is(t[s],e[s]):t[s]=e[s]})),t}function Ns(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Ps=class{constructor({creator:t=null}={}){Ns(this,"controls",null),Ns(this,"svg",null),Ns(this,"inputManager",null),Ns(this,"elements",[]),Ns(this,"group",null),Ns(this,"tween",null),Ns(this,"tweenDash",null),Ns(this,"previousShape",0),Ns(this,"dashLength",0),Ns(this,"padding",10),Ns(this,"selectedType",null),Ns(this,"selectedElements",[]),this.creator=t,this.controls=t.controls,this.inputManager=t.inputManager,this.tween=new Ve.A({opacity:0}).onUpdate((t=>{this.group&&this.svg&&this.svg.setAttributes(this.group,{opacity:t.opacity})})).easing(r.Ux.OUT)}onTweenDash(t){this.selectedElements.length&&this.selectedElements.forEach(((e,s)=>{this.svg&&this.svg.setAttributes(e,{"stroke-dashoffset":t.value*this.dashLength*2+s*this.dashLength})}))}onLeave(){this.tween.to({opacity:0},.35).start()}onEnter(){this.tween.to({opacity:1},.35).start()}onMove(t){const e=t.relativePoint.xNormalized*Number(this.svg.viewBox[2])+Number(this.svg.viewBox[0]),s=t.relativePoint.yNormalized*Number(this.svg.viewBox[3])+Number(this.svg.viewBox[1]),i=this.creator.logo.state.type.getShapeUnderPosition(e,s,this.padding,this.isActive);this.setSelectionOnShape(i,this.elements),i!==this.previousShape&&this.tween.from({opacity:0}).to({opacity:1},.35).restart(),this.previousShape=i}setSelectionOnShape(t,e){let s,i,a,n;0!==t&&this.svg&&(t?(s=t.worldBoundingBox.x-this.padding,i=t.worldBoundingBox.y-this.padding,a=t.worldBoundingBox.w+2*this.padding,n=t.worldBoundingBox.h+2*this.padding):(s=Number(this.svg.viewBox[0])+this.padding,i=Number(this.svg.viewBox[1])+this.padding,a=Number(this.svg.viewBox[2])-2*this.padding,n=Number(this.svg.viewBox[3])-2*this.padding),e.forEach((t=>{this.svg.setAttributes(t,{x:this.svg.fixFloat(s),y:this.svg.fixFloat(i),width:this.svg.fixFloat(a),height:this.svg.fixFloat(n)})})))}hasOverlay(){return(0,Ge.A)("body").hasClass("has-overlay")}onTap(t){if(this.hasOverlay())return;this.onMove(t),this.showSelected(),this.onLeave(),this.setSelectionOnShape(this.previousShape,this.selectedElements);const e=this.shapeToType(this.previousShape);this.selectedType=e,this.controls.activateItem(e)}shapeToType(t){if(null===t)return"background";const e=this.getMap().find((e=>e[0]===t));return e?e[1]:null}typeToShape(t){if("background"===t)return null;const e=this.getMap().find((e=>e[1]===t));return e?e[0]:0}isActive(t){if(null===t)return!0;let e=Boolean(t);return t&&(t.state.active?e=t.state.active.value:t.state.text&&(e=Boolean(t.state.text.value))),e}getMap(){const t=this.creator.logo.state.type;return[[t.shapeSymbol,"symbol"],[t.shapeSymbolContent,"symbolContent"],[t.shapeLetter,"monogram"],[t.shapeIcon,"icon"],[t.shapeName,"name"],[t.shapeSlogan,"slogan"],[t.shapeDivider,"divider"]].filter((t=>this.isActive(t[0])))}draw(t){this.inputManager.unmap(this.map),this.map=this.inputManager.map({element:t.svg,onMove:t=>this.onMove(t),onEnter:t=>this.onEnter(t),onLeave:t=>this.onLeave(t),onTap:t=>this.onTap(t)},this),t.svg.style.cursor="pointer",this.svg=t,this.group=t.add("g",{opacity:0}),this.selectedGroup=t.add("g",{opacity:0});const e=Number(t.viewBox[2])/this.creator.container.clientWidth;this.dashLength=3*e,this.elements=[];for(let s=0;s<2;s++)this.elements.push(t.addChild(this.group,t.createElement("rect",{fill:"none",stroke:0===s?"#fff":"#000","stroke-dasharray":t.fixFloat(2*this.dashLength),"stroke-dashoffset":t.fixFloat(s*this.dashLength*2),"stroke-width":t.fixFloat(e)}))),this.selectedElements.push(t.addChild(this.selectedGroup,t.createElement("rect",{fill:"none",stroke:0===s?"#fff":"#000","stroke-dasharray":t.fixFloat(this.dashLength),"stroke-dashoffset":t.fixFloat(s*this.dashLength),"stroke-width":t.fixFloat(e)})));this.selectType(this.selectedType)}selectType(t){if(t){const e=this.typeToShape(t);this.selectedType=t,(e&&e.worldBoundingBox.w&&e.worldBoundingBox.h||null===e)&&(this.setSelectionOnShape(e,this.selectedElements),this.showSelected())}}showSelected(){this.svg&&this.svg.setAttributes(this.selectedGroup,{opacity:1})}hideSelected(){this.selectedType=null,this.svg&&this.svg.setAttributes(this.selectedGroup,{opacity:0})}resize(){this.draw()}};var Os=s(3851),$s=s(6296),Ls=s(9625);function Ds(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const js=class{constructor(t,{controls:e=null,inputManager:s=null,useCanvas:i=!1,translations:a={},enableMockups:n=!1}={}){Ds(this,"controls",null),Ds(this,"container",null),Ds(this,"frameID",null),Ds(this,"useCanvas",!1),Ds(this,"isCreating",!1),Ds(this,"isCreated",!1),Ds(this,"inputManager",null),Ds(this,"id",null),Ds(this,"logo",null),Ds(this,"logoMockup",null),Ds(this,"enableMockups",!1),Ds(this,"mockupsComplete",!1),Ds(this,"logoID",null),Ds(this,"image",null),Ds(this,"savedStateBeforeStructureChange",null),Ds(this,"width",r.t4.CONTENT_WIDTH),Ds(this,"height",r.t4.CONTENT_HEIGHT),Ds(this,"shapeSelector",null),Ds(this,"onResizeListener",null),Ds(this,"isDestroyed",!1),Ds(this,"variations",null),Ds(this,"canvas",null),Ds(this,"context",null),Ds(this,"$logoContainer",null),Ds(this,"$mockups",null);const o=document.getElementById(t);this.container=o,this.id=t,this.inputManager=s,this.useCanvas=i,this.enableMockups=n,this.$mockups=(0,Ge.A)(".js-mockup"),this.useCanvas?(this.canvas=(0,Ge.A)("<canvas>")[0],this.image=(0,Ge.A)("<img>").on("load",(()=>{this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(this.image,0,0),this.hideLoading()})).on("error",(t=>{ss.A.captureError(t)}))[0],o.appendChild(this.canvas)):this.$logoContainer=(0,Ge.A)("<div>").appendTo(o),e&&((0,Ge.A)("body").hasClass("has-controls")||(0,Ge.A)("body").addClass("has-controls"),this.controls=new Es(e,{creator:this,translations:a}),this.shapeSelector=new Ps({creator:this}),this.picker=new $s.A({creator:this})),Ge.A.ready((()=>{Os.A.trigger(),this.onResizeListener=(0,Ls.A)((()=>this.onResize()),.5),(0,Ge.A)(window).on("resize",this.onResizeListener)}))}getSVG(t,e,s=null){const i=new(s||(this.useCanvas?f:u))({precision:r.t4.PRECISION});if(this.useCanvas){const s=window.devicePixelRatio||1;i.setAttributes(i.svg,{width:t*s,height:e*s})}return i.setDimensions(t,e),i}showLoading(){(0,Ge.A)(this.container).removeClass("loaded")}hideLoading(){(0,Ge.A)(this.container).addClass("loaded")}getSymbolText(t=""){return t.replace(/\band\b/gi,"&").split(" ").map((t=>t.replace(/^(l|d)'([aeoui])/,"$2").replace(/^the$/,"").charAt(0))).join("").toUpperCase()||"?"}async create({id:t=null,savedState:e=null,text:s=null,sloganText:i=null,symbolText:n=null,showSameAttribute:o=!1,hue:h=null,iconSVG:l=null,iconID:c=null,iconTerm:d=null,variation:u=null}={}){if(this.isCreating)return!1;this.showLoading(),this.logoID=t,this.isCreating=!0,window.cancelAnimationFrame(this.frameID),this.logoMockup&&Dt.A.removeAll(this.logoMockup),this.logoMockup=null,this.isCreated=!1;let p=null,m=null,g=null,f=null;e&&a()(e.version,"1.0.x")&&(p=e.state,p.variation=u,e.text&&(m=e.text),e.sloganText&&(f=e.sloganText),e.symbolText&&(g=e.symbolText));const y=!s&&!i;He.Km.IS_PRODUCTION_ENVIRONMENT||He.Km.IS_STAGING_ENVIRONMENT,m=s||"My Brand New Logo",g=n||(m?this.getSymbolText(m):""),f=y?"":i,this.logo=new _e({text:m,symbolText:g,sloganText:f,hue:"random"===h?null:h,saved:p,id:t,iconSVG:l,iconID:c,iconTerm:d,variation:u}),this.onResize();let v=0,b=null;for(;!this.isCreated&&v<r.UI.MAX_LOGO_CREATION_ERRORS&&!this.isDestroyed;)try{await this.logo.create(),this.isCreated=!0,b=this.getSVG(this.width,this.height),await this.logo.draw(b),this.controls&&this.controls.update({showSameAttribute:o})}catch(t){v++,this.isCreated=!1}return b&&(this.render(b),this.enableMockups&&this.drawMockups()),this.isCreated||(0,Ge.A)(this.container).addClass("error"),this.isCreating=!1,this.hideLoading(),this.logo}draw(t={}){this.mockupsComplete=!1,window.cancelAnimationFrame(this.frameID),this.isDestroyed||!this.isCreated||this.isCreating||(this.logo?.state?.type?.cancelRendering(),this.logoMockup?.state?.type?.cancelRendering(),this.logoMockup&&Dt.A.removeAll(this.logoMockup),this.frameID=window.requestAnimationFrame((async()=>{if(!this.isCreated)return;const e=this.getSVG(this.width,this.height),s=await this.logo.draw(e,{cancelOnRedraw:!0,...t});s&&(this.render(e),s&&this.enableMockups&&(this.mockupsComplete=!0,await this.drawMockups()))})))}render(t){if(!this.isDestroyed)if(this.useCanvas){const e=encodeURIComponent(t.getText());this.image.src=`data:image/svg+xml;charset=utf-8,${e}`}else this.$logoContainer.empty().append(t.svg),this.shapeSelector&&this.shapeSelector.draw(t)}async drawMockups(){if(await Dt.A.wait(this.logoMockup),this.logoMockup)try{this.logoMockup.loadState(this.logoMockup.state.type.state,this.logo.getState().state)}catch(t){}else this.logoMockup=new _e({saved:this.logo.getState().state}),await this.logoMockup.create();for(const t of this.$mockups.elements){if(await Dt.A.wait(this.logoMockup),this.isDestroyed)return;const e=(0,Ge.A)(t),s=this.getSVG(r.t4.CONTENT_WIDTH,r.t4.CONTENT_HEIGHT,f),i=e.data("is-black")||e.data("is-white");await this.logoMockup.draw(s,{cancelOnRedraw:!0,hasBackground:!(e.data("is-transparent")||i),isMonotone:i}),this.renderMockup(s,e)}}renderMockup(t,e){if(this.isDestroyed||!e?.length)return;const s=e.find(".js-mockup-background"),i=e.find(".js-mockup-image");if(!i?.length)return;s.css({"background-color":this.logoMockup.state.type.state.colors.state.background.color.original});const a=t.getTextWithPlaceholders(),n=1/(Number(e.data("content-scale"))||1),o={x:(r.t4.CONTENT_WIDTH-r.t4.CONTENT_WIDTH*n)/2,y:(r.t4.CONTENT_HEIGHT-r.t4.CONTENT_HEIGHT*n)/2,w:r.t4.CONTENT_WIDTH*n,h:r.t4.CONTENT_HEIGHT*n},h=Math.max(o.w/r.t4.CONTENT_WIDTH,o.h/r.t4.CONTENT_HEIGHT),l={WIDTH:r.t4.CONTENT_WIDTH,HEIGHT:r.t4.CONTENT_HEIGHT,VIEWBOX_X:t.fixNumber(o.x),VIEWBOX_Y:t.fixNumber(o.y),VIEWBOX_WIDTH:t.fixNumber(o.w),VIEWBOX_HEIGHT:t.fixNumber(o.h),BACKGROUND_X:t.fixNumber(o.x),BACKGROUND_Y:t.fixNumber(o.y),BACKGROUND_WIDTH:t.fixNumber(o.w),BACKGROUND_HEIGHT:t.fixNumber(o.h),ASPECT_RATIO:1,BACKGROUND_EFFECT_SCALE:`${t.fixFloat(h)}`,BACKGROUND_PATTERN_SCALE:`${t.fixFloat(1/n)}`,MONOTONE_COLOR:e.data("is-black")?"#000":"#fff"};let c=a;Object.keys(l).forEach((t=>{const e=l[t],s=new RegExp(`{{${t}}}`,"g");c=c.replace(s,e)})),i.empty().html(c)}saveStateBeforeStructureChange(t){this.savedStateBeforeStructureChange||(this.savedStateBeforeStructureChange=this.logo.getState(),this.mergedSavedStates=this.logo.getState(),this.controls.saveStateBeforeStructureChange()),t(),this.mergedSavedStates=Is(this.mergedSavedStates,this.logo.getState())}shapeSupportsText(t,e){const s=t.state.font.family.value,i=t.state.font.variant.value,a=r.oB.FONTS.items.find((t=>t.family===s));return a?a.glyphs instanceof Array&&!a.glyphs[i]?(ss.A.captureError("font variant not found",{data:{family:s,variant:i}}),!1):y(e,a.glyphs,i):(ss.A.captureError("font family not found",{data:{family:s}}),!1)}validateTexts({name:t=null,slogan:e=null,monogram:s=null}={}){return!(this.logo.state.type.shapeName&&!this.shapeSupportsText(this.logo.state.type.shapeName,t)||this.logo.state.type.shapeSlogan&&!this.shapeSupportsText(this.logo.state.type.shapeSlogan,e)||this.logo.state.type.shapeLetter&&!this.shapeSupportsText(this.logo.state.type.shapeLetter,s))}async recreate({showSameAttribute:t=!1,state:e=(this.savedStateBeforeStructureChange?this.mergedSavedStates:this.logo.getState()),sloganText:s=null}={}){this.controls&&this.controls.deactivate(),await Dt.A.wait(this);const i={id:this.logoID,savedState:e,text:e.state.elements.name.text,showSameAttribute:t};s&&(i.sloganText=s),await this.create(i)}async onResize(){if(this.isDestroyed)return;const t=document.getElementById(this.id),e=Math.floor(t.offsetWidth),s=Math.floor(t.offsetHeight);if(this.inputManager&&this.inputManager.onResize(),!(0===e&&0===s||e===this.width&&s===this.height)){if(Dt.A.removeAll(this),this.logoMockup&&Dt.A.removeAll(this.logoMockup),this.width=e,this.height=s,this.useCanvas){this.showLoading();const t=window.devicePixelRatio||1;this.canvas.width=e*t||1,this.canvas.height=s*t||1,this.context=this.canvas.getContext("2d")}this.controls&&this.controls.onResize(),this.draw()}}destroy(){this.isDestroyed=!0,this.canvas&&(this.canvas=null),this.context&&(this.context=null),this.image&&((0,Ge.A)(this.image).off(),this.image=null),this.container&&(this.container=null),(0,Ge.A)(window).off("resize",this.onResizeListener),this.onResizeListener=null,this.logo=null}}},7410:(t,e,s)=>{"use strict";s.d(e,{A:()=>p});var i=s(7451),a=s(2783),n=s(2492),o=s(6801),r=s(7912),h=s(7301),l=s(1212),c=s(4223),d=s(6334);function u(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:i+"")in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const p=class{constructor({data:t=null,creator:e=null,callback:s=null,term:i=null}={}){u(this,"div",null),u(this,"creator",null),u(this,"$content",null),u(this,"$button",null),u(this,"$text",null),u(this,"$term",null),u(this,"$iconList",null),u(this,"$load",null),u(this,"$loading",null),u(this,"$cancel",null),u(this,"$controls",null),u(this,"state",null),u(this,"term",null),u(this,"previousTerm",null),u(this,"isLoading",!1),u(this,"page",1),u(this,"iconsPerPage",98),u(this,"callback",null),u(this,"keywordAutoCompleter",void 0),this.creator=e,this.state=t&&t.state,this.callback=s;const o=(0,n.A)("<div>").addClass("c-button-text");this.$content=(0,n.A)(".js-icon-selector"),this.$button=(0,n.A)("<div>").text("select icon").addClass("c-button-text__button").appendTo(o),this.$text=(0,n.A)("<span>").addClass("c-button-text__text").appendTo(o),this.state?this.$text.text(this.state.term.value):i&&this.$text.text(i);const r=(0,n.A)(".js-keyword-label"),l=(0,h.A)(a.oY).map((t=>`"${t.replace("_"," ")}"`));r.text(`${r.data("text")} ${l.splice(0,2).join(", ")} or ${l[0]}`),this.$controls=(0,n.A)(".js-icon-selector__controls"),this.$submit=(0,n.A)(".js-icon-selector__submit"),this.$cancel=(0,n.A)(".js-icon-selector__cancel"),this.$iconList=(0,n.A)(".js-icon-selector__icons"),this.$loading=(0,n.A)(".js-icon-selector__loading-icon"),this.$load=(0,n.A)(".js-icon-selector__load"),this.$term=(0,n.A)(".js-icon-selector__input"),this.div=o[0]}activate(){this.term=this.$term[0].value,this.page=Number(this.$content.data("page"))||1,this.$button.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.show()})),this.$content.on("keydown",(t=>{13===t.keyCode&&this.loadIcons()})),this.$iconList.on("click",(t=>this.onIconListClick(t))),this.$submit.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.loadIcons()})),this.$cancel.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.hide()})),this.$load.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.$load.hasClass("active")&&(this.$controls.removeClass("interactive"),this.loadPage())})),this.keywordAutoCompleter=new d.A({input:this.$term[0],fetch:async(t,e)=>{let s;try{const e=await fetch(`${i.Km.DOMAIN}/api/icons/autocomplete/${encodeURIComponent(t)}`,{method:"GET"});s=await e.json()}catch(t){}s?.data&&e(s.data)},onSelect:t=>{this.$term[0].value=t},onHighlight:t=>{this.$term[0].value=t},render:(t,e)=>{let s=t;var i;const a=new RegExp(`${i=e,i.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}`,"i").exec(s);return s=s.replace(a,`<span class="highlight">${a}</span>`),(0,n.A)("<div>").addClass("b-user-input__autocomplete-result").html(s)[0]},minLength:3,disableAutoSelect:!0,debounce:1,className:"b-user-input__autocomplete"}),this.onUpdate()}loadIcons(){this.term=this.$term[0].value,this.term!==this.previousTerm&&(this.clear(),this.term&&(this.$controls.removeClass("active"),this.$content.removeClass("interactive"),this.previousTerm=this.term,this.loadPage()))}deactivate(){[this.$content,this.$button,this.$cancel,this.$submit,this.$load,this.$iconList].forEach((t=>{t&&t.off()}))}onUpdate(){this.creator&&this.creator.draw()}async show(){(0,n.A)(".js-icon-selector-content").addClass("active"),this.$content.addClass("active"),await r.A.show(),this.$content.hasClass("active")&&this.$term[0].focus()}clear(){this.$iconList.empty(),this.page=1}async loadPage(){this.isLoading||(this.isLoading=!0,await Promise.all([o.A.delay(i.UI.MINIMUM_API_CALL_WAIT_TIME),(async()=>{try{const t=await(0,c.A)(`${i.Km.DOMAIN}/api/icons`,{iconsPerPage:this.iconsPerPage,page:this.page,term:this.term});t.error?l.A.captureError(`failed: ${t.error}`):t.data&&this.addIcons(t.data)}catch(t){}})()]),this.$content.addClass("interactive"),this.$controls.addClass("interactive"),this.isLoading=!1,this.page++,this.$content.data("page",this.page))}addIcons(t){const e=document.createDocumentFragment(),s=t.sort(((t,e)=>(e.collections?e.collections.length:0)-(t.collections?t.collections.length:0)));for(let t=0;t<s.length;t++){const i=(0,n.A)("<li>").addClass("b-icon-selector__icon").data("url",s[t].icon_url).data("id",s[t].id).data("term",s[t].term).appendTo(e),a=(0,n.A)("<div>").appendTo(i),o=(0,n.A)("<div>").addClass("b-icon-selector__icon-image loading").appendTo(a),r=new Image;(0,n.A)(r).on("error",(()=>{o.addClass("error")})).on("load",(()=>{o.addClass("loaded").css({"background-image":`url(${r.src})`})})),r.src=s[t].thumbnail_url}this.$iconList[0].appendChild(e),s.length===this.iconsPerPage&&this.$controls.addClass("active"),this.$load.toggleClass("active",s.length===this.iconsPerPage)}onIconListClick(t){try{let e=t.target;for(;e&&e.nodeName&&"li"!==e.nodeName.toLowerCase();)e=e.parentNode;if(!e)return;const s=(0,n.A)(e);this.activateIcon({url:s.data("url"),id:s.data("id"),term:s.data("term")}),this.$iconList.off()}catch(t){l.A.captureError(t)}}hide(){this.$content.removeClass("active"),r.A.hide().then((()=>{(0,n.A)(".js-icon-selector-content").removeClass("active")}))}async activateIcon({url:t=null,id:e=null,term:s=null}={}){this.creator&&this.creator.showLoading();const i=await fetch(t),a=await i.text();this.creator&&(this.creator.saveStateBeforeStructureChange((()=>{this.state.data.set(a),this.state.id.set(e),this.state.term.set(s)})),this.creator.recreate({showSameAttribute:!0})),this.callback&&this.callback({svg:a,id:e,term:s}),this.hide()}}},3319:(t,e,s)=>{"use strict";s.d(e,{A:()=>i});const i=t=>"string"==typeof t?(t.match(/(?:\\\||[^|])+/g)||[]).reduce(((t,e)=>t.concat(e.replace(/\\\|/g,"|"))),[]).join(" "):""},4759:(t,e,s)=>{var i={"./star1.svg":2493,"./star2.svg":3374,"./star3.svg":8127,"./star4.svg":5920};function a(t){var e=n(t);return s(e)}function n(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=n,t.exports=a,a.id=4759},2493:(t,e,s)=>{"use strict";t.exports=s.p+"images/9a5774bc1f321b32.svg"},3374:(t,e,s)=>{"use strict";t.exports=s.p+"images/cd9bbdeff89bc885.svg"},8127:(t,e,s)=>{"use strict";t.exports=s.p+"images/ce84bb07f34be2b1.svg"},5920:(t,e,s)=>{"use strict";t.exports=s.p+"images/f661432634fd4219.svg"},7676:()=>{}}]);