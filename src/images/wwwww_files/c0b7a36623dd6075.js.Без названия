"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[721],{5296:(t,e,a)=>{a.d(e,{A:()=>i});var s=a(5796);const i=class extends s.A{constructor(t){super(),this.value=t}clone(){const t=new this.constructor(this.value);return super.cloneVariables(t),t}}},8711:(t,e,a)=>{a.d(e,{A:()=>i});var s=a(5796);const i=class extends s.A{constructor(t=""){super(),this.value=t}clone(){const t=(new this.constructor).set(this.value);return super.cloneVariables(t),t}set(t=""){return this.value=String(t),this}}},1930:(t,e,a)=>{a.d(e,{A:()=>o});var s=a(6404),i=a(3517);function r(t,e,a){var s;return(e="symbol"==typeof(s=function(t,e){if("object"!=typeof t||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var s=a.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?s:s+"")in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const o=class extends i.A{constructor(...t){super(...t),r(this,"keywords",new Set),r(this,"modifiers",[])}clearModifiers(){this.modifiers.length=0}addModifiers(t){t.forEach((t=>this.addModifier(this.modifiers,t))),this.modifiers=this.modifiers.filter((t=>Math.random()<=t.state.chance)),this.modifiers.forEach((t=>{t.state.force.forEach((t=>{this.modifiers=this.modifiers.filter((e=>e.constructor!==t.constructor)),this.addModifier(this.modifiers,t).state.chance=1}))})),this.modifiers.forEach((t=>{t.activate&&t.activate(this)}))}addModifier(t,e){let a;if(e instanceof s.A)a=e;else if(e instanceof Array){let t=e[0];t instanceof Array&&(t=t[Math.floor(Math.random()*t.length)]),a=new t(e[1])}else a=new e;return t.push(a),a}addKeyword(t){this.keywords.add(t)}removeKeyword(t){this.keywords.delete(t)}removeKeywords(){this.keywords.clear()}hasModifier(t){return this.modifiers.find((e=>e instanceof t))}applyModifiers(t=(()=>!0)){this.modifiers.filter(t).forEach((t=>{t.ignore(this)||t.modify(this)}))}create(){}}},6404:(t,e,a)=>{a.d(e,{A:()=>i});var s=a(6324);const i=class{constructor(t={}){var e,a,i,r;e=this,a="state",i=new s.A({chance:1,force:[],forcedModifiers:[],saved:null}),(a="symbol"==typeof(r=function(t,e){if("object"!=typeof t||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var s=a.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(a))?r:r+"")in e?Object.defineProperty(e,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[a]=i,Object.assign(this.state,t)}activate(t){}modify(t){}ignore(){return!1}}},6324:(t,e,a)=>{a.d(e,{A:()=>r});var s=a(5796),i=a(3517);const r=class{constructor(t=null){t&&Object.keys(t).forEach((e=>{this[e]=t[e]}))}clone(){const t=new this.constructor;return Object.keys(this).forEach((e=>{const a=this[e];a instanceof this.constructor?t[e]=a.clone():a instanceof i.A?(t[e]=new a.constructor,t[e].state=a.state.clone()):a instanceof s.A?t[e]=a.clone():t[e]=a})),t}copyAllFrom(t){return Object.keys(t).forEach((e=>{const a=t[e];a instanceof this.constructor?this[e].copyAllFrom(a):a instanceof i.A?this[e].state.copyAllFrom(a.state):a instanceof s.A?this[e].set(a.value):this[e]=a})),this}}},3517:(t,e,a)=>{a.d(e,{A:()=>i});var s=a(6324);const i=class{constructor(t={}){var e,a,i,r;e=this,a="state",i=new s.A,(a="symbol"==typeof(r=function(t,e){if("object"!=typeof t||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var s=a.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(a))?r:r+"")in e?Object.defineProperty(e,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[a]=i,Object.assign(this.state,t)}clone(){return new this.constructor(this.state.clone())}}},721:(t,e,a)=>{a.d(e,{K:()=>S,A:()=>C});var s=a(6324),i=a(1930),r=a(832),o=a(8711),n=a(928),h=a(2292),l=a(3696);const d=class extends s.A{constructor(){super({color:"#000",hue:new n.A(0,1).setOrder(0).setLabel("hue").enableInteraction(),saturation:new n.A(0,1).setOrder(1).setLabel("saturation").enableInteraction(),value:new n.A(0,1).setOrder(2).setLabel("brightness").enableInteraction(),gradient:new s.A({active:(new r.A).enableInteraction(),range:new n.A(0,1).randomizeBetween(.35,.65).setLabel("strength").setOrder(1).enableInteraction(),style:new l.A([0,1,2,3]).randomize().enableInteraction().setOrder(2).setLabel("style",["light","deep","rainbow","intense"]),type:new l.A([0,1]).setLabel("type",["linear","radial"]).setOrder(0).randomize().enableInteraction(),radius:new n.A(0,1).randomizeBetweenOptions([.75,1]).setLabel("size").setOrder(4).enableInteraction(),reverse:new r.A,angle:new h.A(0,360,{interval:5}).randomizeBetweenOptions([225,270,315]).setRealValueOnLabel().setLabel("rotation").setOrder(3).enableInteraction()})})}};var c=a(6404),u=a(6419);const m=class extends c.A{constructor(t){super(Object.assign({randomValue:new n.A(0,1).randomize(),randomBool:(new r.A).randomize()},t))}activate(t){let e=[0,1,2,3,4,5,6,7],a=[32,8,1,1,4,2,2,16];"black"===t.state.hue.value&&(e=[7],a=[1]),t.state.colorScheme||(t.state.colorScheme=new l.A(e).weightedRandomize(a).ignoreOnSave())}modify(t){if(t.state.colorScheme&&(this.state.randomValue.set(.5),this.state.randomBool.set(!1)),t.savedColorScheme)return void Object.keys(t.savedColorScheme).forEach((e=>{const a=t.savedColorScheme[e],s=u.A.hex2hsv(a),i=t.state[e];i.hue.set(s[0]),i.saturation.set(s[1]),i.value.set(s[2]),i.color=a,t.state.scheme[e].set(a)}));const e=t.state.hue.value;let a=e,s=null,i=null,r=null,o=null,n=null,h=null,l=null,d=null;switch(t.state.colorScheme.value){case 0:a=this.constrain(this.add(e,30+150*this.state.randomValue.value)),s=[a,5,95],i=[e,85,60],r=[a,10,30],l="#fff",o=r.slice(),n=l;break;case 1:i=[e,70,55],r=u.A.hcl2derivative(i,[45+30*this.state.randomValue.value,-10,20],1),s=[r[0],2,90],l="#fff",o=r.slice(),n=l;break;case 2:s=[e,65,80],i=u.A.hcl2derivative(s,[60+60*this.state.randomValue.value,-45,95],1),r=i.slice(),l=u.A.hcl2derivative(s,[-60*this.state.randomValue.value-60,-50,-65],1),o=r.slice(),n=l.slice();break;case 3:i=[e,80,70],s=u.A.hcl2derivative(i,[-30-60*this.state.randomValue.value,-140,95],1),r=u.A.hcl2derivative(i,[-30-60*this.state.randomValue.value,0,-95],1),l=r.slice(),o=r.slice(),n=l.slice();break;case 4:s=[e,80,60],i="#fff",r="#fff",l=u.A.hcl2derivative(s,[30+30*this.state.randomValue.value,-15,40],1),o=l.slice(),n=i;break;case 5:i=[e,85,70],s=u.A.hcl2derivative(i,[60+60*this.state.randomValue.value,-60,85],1),r=u.A.hcl2derivative(i,[-30-30*this.state.randomValue.value,-65,-35],1),l=r.slice(),o=r.slice(),n=l.slice();break;case 6:s=[e,80,65],i=u.A.hcl2derivative(s,[30+90*this.state.randomValue.value,-70,75],1),r=u.A.hcl2derivative(s,[-15-45*this.state.randomValue.value,-35,-75],1),l=r.slice(),o=r.slice(),n=l.slice();break;case 7:const t=Math.random()<.5?["#000","#fff"]:["#fff","#000"];s=t[0],i=t[1],r=t[1],o=t[1],n=t[0],d=t[1],h=t[1],l=t[0]}h||(h=r),d||(d=this.state.randomValue.value<.5?i:r),o||(o=r),n||(n=s),t.setColor("background",s),t.setColor("symbol",i),t.setColor("name",r),t.setColor("nameShadow",o),t.setColor("nameWithShadow",n),t.setColor("symbolContent",l),t.setColor("divider",h),t.setColor("slogan",d)}add(t,e,a=null){return!0===a?t+e:t+(this.state.randomBool.value?e:360-e)}constrain(t,e=360){let a=t;for(;a>=e;)a-=e;return a}};var v=a(5296);const f=class extends c.A{constructor(...t){var e,a,s,i;super(...t),e=this,s=[16,1],(a="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var s=a.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(a="weights"))?i:i+"")in e?Object.defineProperty(e,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[a]=s}activate(t){const e=Object.keys(this.weights);t.state.saved&&void 0!==t.state.saved.variation?t.state.variation=new v.A(t.state.saved.variation):t.state.variation=new l.A(e).weightedRandomize(this.weights)}modify(t){1===Number(t.state.variation.value)&&(this.assign(t.state,"nameShadow","background"),this.assign(t.state,"nameWithShadow","symbol"),this.assign(t.state,"name","background"),this.assign(t.state,"slogan","background"),this.assign(t.state,"background","symbol"),this.assign(t.state,"symbol","name"),this.assign(t.state,"divider","name"),this.assign(t.state,"symbolContent","background"))}assign(t,e,a){const s=t[e],i=t[a];s.color=i.color;const r=u.A.hex2hsv(s.color);s.hue.set(r[0]),s.saturation.set(r[1]),s.value.set(r[2]),t.scheme[e].set(s.color)}};var g=a(3969);const b=class extends c.A{modify(t){const e=[t.state.background,t.state.symbol];if(t.state.saved)return;const a=u.A.hex2hsv(t.state.background.color),s=u.A.hex2hsv(t.state.symbol.color);if(s[2]>.95&&s[1]<.05&&a[2]<.05){if(Math.random()<.5)return;const e=t.state.symbol;let a=null;switch(new l.A([0,1]).weightedRandomize([3,1]).value){case 0:a=[70+25*(Math.random()-.5),45+10*(Math.random()-.5),80+10*(Math.random()-.5)],e.gradient.style.set(0),e.gradient.range.randomizeBetween(.7,.9);break;case 1:a=[360*Math.random(),40+5*(Math.random()-.5),90+10*(Math.random()-.5)],e.gradient.style.set(2),e.gradient.range.randomizeBetween(.35,1)}const s=u.A.hcl2hex(...a),i=u.A.hex2hsv(s);return e.color=s,e.hue.set(i[0]),e.saturation.set(i[1]),e.value.set(i[2]),e.gradient.active.set(!0),void(t.state.scheme.symbol=new o.A(s))}if(Math.random()<.75)return;const i=e[Math.floor(Math.random()*e.length)],r=u.A.hex2hsv(i.color);if(i.gradient.active.set(!0),r[2]<.15)i.gradient.active.set(!1);else if(r[2]>.95&&r[1]<.05)i.gradient.active.set(!1);else{if(r[2]>.9&&r[1]<.25)return i.gradient.style.set(2),void i.gradient.range.randomizeBetween(.35,.85);i.gradient.range.randomizeBetween(.25,.5)}2===i.gradient.style.value&&i.gradient.range.randomizeBetween(.15,.25)}};var y=a(1343),w=a(309),p=a(8289),A=a(7703);function M(t,e,a){var s;return(e="symbol"==typeof(s=function(t,e){if("object"!=typeof t||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var s=a.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?s:s+"")in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const O=[[0,1,0],[15,1.5,0],[30,1.2,0],[45,1,.1],[60,1.1,.1],[70,1,.1],[75,1,.2],[90,1,.1],[105,.75,0],[120,.25,0],[135,.25,0],[150,.5,0],[165,.5,0],[180,.25,0],[195,.65,0],[210,.5,0],[225,.5,0],[240,.75,0],[255,.85,0],[270,.75,0],[285,.5,0],[300,.65,0],[315,.75,0],[330,1,0],[335,1,0],[360,1,0]],S={red:[20,15],orange:[50,20],yellow:[80,4],green:[140,50],blue:[230,40],purple:[295,10],violet:[330,35]};class C extends i.A{constructor(t){super(Object.assign({chroma:new n.A(0,2).randomizeWeightedRight(.6,1).ignoreOnSave(),contrast:new n.A(0,1).randomizeBetween(.5,.75).ignoreOnSave(),brightness:new n.A(-1,1).set(0).ignoreOnSave(),scheme:new s.A},t)),M(this,"ids",["background","symbol","symbolContent","icon","name","nameShadow","nameWithShadow","divider","slogan"]),M(this,"gradientStyles",[[30,15,30],[90,30,30],[120,0,0],[60,-30,45]]),M(this,"savedColorScheme",null),null!==this.state.hue&&void 0!==this.state.hue||(this.state.hue=(0,A.A)(["red","orange","yellow","green","blue","purple","violet","black"],[7,2,1,4,4,2,4,6]));const e=S[this.state.hue];this.state.hue=e?new v.A((e[0]+(Math.random()-.5)*e[1]*2+360)%360).ignoreOnSave():new v.A(this.state.hue).ignoreOnSave();const a=C.adjustFromHue(this.state.hue&&"string"!=typeof this.state.hue.value?this.state.hue.value:1);this.state.chroma.set(this.state.chroma.value+.35*(a[0]-1)),this.state.brightness.set(this.state.brightness.value+a[1]),this.ids.forEach((t=>{this.state[t]=new d,this.state.scheme[t]=new o.A("#000")})),this.state.saved&&this.state.saved.scheme?(this.savedColorScheme=this.state.saved.scheme,this.addModifiers([m])):this.addModifiers([m,f,g.A,b]),this.ids.forEach((t=>{const e=this.state[t],a=u.A.hex2hsv(e.color);e.hue.set(a[0]),e.saturation.set(a[1]),e.value.set(a[2])}))}static adjustFromHue(t){const e=(0,p.A)(t,0,360);let a=1,s=O[a],i=O[a-1];for(;e>s[0];)i=s,s=O[a++];const r=s[0]-i[0];return[i[1]+(e-i[0])/r*(s[1]-i[1]),i[2]+(e-i[0])/r*(s[2]-i[2])]}initialize(t){this.state.hasTextInsideSymbol=t.hasTextInsideSymbol,this.state.hasIcon=t.hasIcon,this.state.hasSymbol=t.hasSymbol,this.state.savedColorScheme=this.savedColorScheme,this.applyModifiers()}setColor(t,e){const a=this.state[t];let s=null;if(e instanceof Array){const t=this.state.contrast.value,a=this.state.chroma.value,i=this.state.brightness.value;s=u.A.hcl2hex(e[0],e[1]*a,(e[2]-50)*(t+.5)+50+100*i)}else s=e;const i=u.A.hex2hsv(s);a.hue.set(i[0]),a.saturation.set(i[1]),a.value.set(i[2]),a.color=s,this.state.scheme[t].set(s)}setGradient(t,e){this.state[t].gradient.copyAllFrom(e)}static getRandomPalette({hue:t=null,hueFactor:e=.5,contrast:a=.75,chroma:s=1,brightness:i=0,colorLut:r=null,colorScheme:o=null}={}){const h=new n.A(s),l=new n.A(i);let d=t;if("string"==typeof t&&e){const a=S[t];d=new n.A((a[0]+(e-.5)*a[1]*2+360)%360)}const c=new C({chroma:h,brightness:l,contrast:new n.A(a),colorScheme:null===o?void 0:new n.A(o),colorLut:null===r?void 0:new n.A(r),hue:d instanceof n.A?d.value:d,saved:{variation:0}});return c.applyModifiers(),c}update({isMonotone:t=!1,hasNameShadow:e=!1,recreatedFromSavedState:a=!1}={}){let s=y.A;t?(this.state.background.color="#000",this.state.symbol.color="{{MONOTONE_COLOR}}",this.state.name.color="{{MONOTONE_COLOR}}",this.state.nameShadow.color="{{MONOTONE_COLOR}}",this.state.symbolContent.color="#000",this.state.divider.color="{{MONOTONE_COLOR}}",this.state.slogan.color="{{MONOTONE_COLOR}}"):(e&&(a||(this.state.nameShadow.color===this.state.nameWithShadow.color?this.setColor("name",this.state.background.color):this.setColor("name",this.state.nameWithShadow.color))),this.ids.forEach((t=>{const e=this.state[t],a={angle:e.gradient.angle.value};switch(Number(e.gradient.type.value)){case 0:s=y.A;break;case 1:s=w.A,a.radius=e.gradient.radius.value}e.color=new s(Object.assign({active:e.gradient.active.value,hue:e.hue.value,saturation:e.saturation.value,color:u.A.hsv2hex(e.hue.value,e.saturation.value,e.value.value),style:this.gradientStyles[Number(e.gradient.style.value)],range:e.gradient.range.value,reverse:e.gradient.reverse.value},a))})))}}},3969:(t,e,a)=>{a.d(e,{A:()=>l});var s=a(6404),i=a(3696),r=a(6419);const o=class{constructor(t){if(e=this,s=null,(a="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var s=a.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(a="points"))?i:i+"")in e?Object.defineProperty(e,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[a]=s,"string"==typeof t){const e=t.split(",");this.points=[];for(let t=0;t<e.length;t+=2)this.points.push([Number(e[t]),Number(e[t+1])])}var e,a,s,i;const r=this.points.length-1;0===this.points[0][0]&&0===this.points[0][1]&&1===this.points[r][0]&&1===this.points[r][1]||(this.points.unshift([0,0]),this.points.push([1,1])),this.order=this.points.length,this.cardinality=this.points[0].length}getPoint(t){const e=this.order-1;let a=this.newVector();for(let s=0;s<=e;++s)a=this.vectorAdd(a,this.vectorMultiply(this.binT(s,e,t),this.points[s]));return a}binT(t,e,a){return this.binom(e,t)*a**t*(1-a)**(e-t)}factorial(t){return t<=1?1:t*this.factorial(t-1)}binom(t,e){return this.factorial(t)/(this.factorial(e)*this.factorial(t-e))}vectorMultiply(t,e){return e.map((e=>e*t))}vectorAdd(t,e){return t.map(((t,a)=>t+e[a]))}newVector(){const t=[];for(let e=0;e<this.cardinality;++e)t.push(0);return t}};function n(t,e,a){var s;return(e="symbol"==typeof(s=function(t,e){if("object"!=typeof t||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var s=a.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?s:s+"")in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const h={},l=class extends s.A{constructor(t){super(Object.assign({},t)),n(this,"size",16),n(this,"data",null),n(this,"strength",1),n(this,"width",0),n(this,"height",0),n(this,"id","")}activate(t){t.state.colorLut||(t.state.colorLut=new i.A([0,1,2,3,4]).weightedRandomize([4,1,1,1,1]).ignoreOnSave())}modify(t){const e=t.state.colorLut.value;if(0!==e){switch(e){case 1:this.saturation(.65),this.brightness(.975),this.contrast(.95);break;case 2:this.contrast(1.15),this.colorize("#ffce70",.075),this.saturation(1.15);break;case 3:this.saturation(.25),this.contrast(1.15),this.brightness(.975);break;case 4:this.saturation(.75),this.contrast(1.1),this.brightness(.975),this.colorize("#ec7357",.075)}t.ids.forEach((e=>{t.setColor(e,r.A.rgb2hex(...this.transform(...r.A.hex2rgb(t.state[e].color))))}))}}initData(){this.width=this.size**2,this.height=this.size;const t=1/(this.size-1)*255;this.data=new Uint8ClampedArray(this.width*this.height*4);let e=0;for(let a=0;a<this.size;a++)for(let s=0;s<this.size;s++)for(let i=0;i<this.size;i++)this.data[e++]=i*t,this.data[e++]=a*t,this.data[e++]=s*t,this.data[e++]=255}lerp(t,e,a){return t+(e-t)*a}colorize(t,e=1){this.addToCache("colorize",t,e,(()=>{const a=r.A.hex2rgb(t);for(let t=0;t<this.data.length;t+=4)this.data[t]-=(this.data[t]-a[0])*e,this.data[t+1]-=(this.data[t+1]-a[1])*e,this.data[t+2]-=(this.data[t+2]-a[2])*e}))}multiply(t,e=1){this.addToCache("multiply",t,e,(()=>{const a=r.A.hex2rgb(t),s=1/255*e;for(let t=0;t<this.data.length;t+=4)this.data[t]*=a[0]*s,this.data[t+1]*=a[1]*s,this.data[t+2]*=a[2]*s}))}overlay(t,e=1){this.addToCache("overlay",t,e,(()=>{const a=r.A.hex2rgb(t),s=1/255*e;for(let t=0;t<this.data.length;t+=4)this.data[t]=this.data[t]>128?255-2*(255-a[0])*(255-this.data[t])*s:this.data[t]*a[0]*2*s,this.data[t+1]=this.data[t+1]>128?255-2*(255-a[1])*(255-this.data[t+1])*s:this.data[t+1]*a[1]*2*s,this.data[t+2]=this.data[t+2]>128?255-2*(255-a[2])*(255-this.data[t+2])*s:this.data[t+2]*a[2]*2*s}))}add(t,e=1){this.addToCache("add",t,e,(()=>{const a=r.A.hex2rgb(t);for(let t=0;t<this.data.length;t+=4)this.data[t]+=a[0]*e,this.data[t+1]+=a[1]*e,this.data[t+2]+=a[2]*e}))}contrast(t){this.addToCache("contrast",t,(()=>{for(let e=0;e<this.data.length;e+=4)this.data[e]=(this.data[e]-128)*t+128,this.data[e+1]=(this.data[e+1]-128)*t+128,this.data[e+2]=(this.data[e+2]-128)*t+128}))}brightness(t){this.addToCache("brightness",t,(()=>{const e=t-1;for(let t=0;t<this.data.length;t+=4)this.data[t]+=255*e,this.data[t+1]+=255*e,this.data[t+2]+=255*e}))}makeGradient(t,e,a,s=0,i=1){const r=3*Math.floor(this.data.length/3*s),o=3*Math.floor(this.data.length/3*i);for(let s=r;s<o;s+=3){const i=(s-r)/(o-r);t[s]=(a[0]-e[0])*i+e[0],t[s+1]=(a[1]-e[1])*i+e[1],t[s+2]=(a[2]-e[2])*i+e[2]}}gradientMap(t,e=1){this.addToCache("gradientMap",t.reduce(((t,e)=>`${t}:${e.offset}-${e.stop}`),""),e,(()=>{const a=1-e,s=new Uint8ClampedArray(this.data.length/4*3);let i=1,o=0;for(let e=0;e<t.length-1;e++){const a=r.A.hex2rgb(t[e].color),n=r.A.hex2rgb(t[e+1].color),h=t[e].offset,l=t[e+1].offset;i=Math.min(h,i),o=Math.max(l,o),this.makeGradient(s,a,n,h,l)}if(i>0){const e=t[0].color;this.makeGradient(s,e,e,0,i)}if(o<1){const e=t[t.length-1].color;this.makeGradient(s,e,e,o,1)}const n=Math.floor(s.length/3)-1;for(let t=0;t<this.data.length;t+=4){const i=this.data[t],o=this.data[t+1],h=this.data[t+2],l=r.A.rgb2hsl(i,o,h);this.data[t]=s[3*Math.floor(n*l[2])]*e+this.data[t]*a,this.data[t+1]=s[3*Math.floor(n*l[2])+1]*e+this.data[t+1]*a,this.data[t+2]=s[3*Math.floor(n*l[2])+2]*e+this.data[t+2]*a}}))}splitToning(t,e,a=1){this.addToCache("splitToning",t,e,a,(()=>{for(let s=0;s<this.data.length;s+=4){const i=this.data[s],o=this.data[s+1],n=this.data[s+2],h=r.A.rgb2hsl(i,o,n)[2],l=h<.5?t.h:e.h,d=h<.5?t.s:e.s,c=(h<.5?1-2*h:2*(h-.5))*a,u=1-c,m=r.A.hsl2rgb(l,d,h);this.data[s]=i*u+m[0]*c,this.data[s+1]=o*u+m[1]*c,this.data[s+2]=n*u+m[2]*c}}))}vibrance(t){this.addToCache("vibrance",t,(()=>{for(let e=0;e<this.data.length;e+=4){const a=Math.max(this.data[e],this.data[e+1],this.data[e+2]),s=(this.data[e]+this.data[e+1]+this.data[e+2])/3,i=2*Math.abs(a-s)/255*-t;this.data[e]+=(a-this.data[e])*i,this.data[e+1]+=(a-this.data[e+1])*i,this.data[e+2]+=(a-this.data[e+2])*i}}))}saturation(t){this.addToCache("saturation",t,(()=>{for(let e=0;e<this.data.length;e+=4){const a=r.A.rgb2hsl(this.data[e],this.data[e+1],this.data[e+2]);a[1]=Math.max(0,Math.min(a[1]*t,1));const s=r.A.hsl2rgb(a[0],a[1],a[2]);this.data[e]=s[0],this.data[e+1]=s[1],this.data[e+2]=s[2]}}))}adjust(t,e,a){this.addToCache("adjust",t,e,a,(()=>{const s=((t.max||255)-t.min)/255,i=((e.max||255)-e.min)/255,r=((a.max||255)-a.min)/255;for(let o=0;o<this.data.length;o+=4)this.data[o]=this.data[o]*s+t.min,this.data[o+1]=this.data[o+1]*i+e.min,this.data[o+2]=this.data[o+2]*r+a.min}))}adjustGamma(t){this.addToCache("adjustGamma",t,(()=>{for(let e=0;e<this.data.length;e+=4)this.data[e]=Math.pow(this.data[e],1/t),this.data[e+1]=Math.pow(this.data[e+1],1/t),this.data[e+2]=Math.pow(this.data[e+2],1/t)}))}adjustCurves(t=[]){this.addToCache("adjustCurves",t.join("-"),(()=>{t.map((t=>new o(t))).forEach(((t,e)=>{for(let a=e;a<this.data.length;a+=4)this.data[a]=255*t.getPoint(this.data[a]/255)[1]}))}))}transform(t,e,a){if(!this.data)return[t,e,a];const s=Math.min(Math.floor(a/255*this.size),this.size-1),i=Math.min(s+1,this.size-1),r=a/255*this.size%1,o=Math.min(Math.floor(t/255*this.size),this.size-1),n=Math.min(o+1,this.size-1),h=t/255*this.size%1,l=Math.min(Math.floor(e/255*this.size),this.size-1),d=Math.min(l+1,this.size-1),c=e/255*this.size%1,u=4*Math.floor(s*this.size+o+l*this.width),m=4*Math.floor(i*this.size+n+d*this.width);return[Math.floor(this.lerp(this.data[u+0],this.data[m+0],h)),Math.floor(this.lerp(this.data[u+1],this.data[m+1],c)),Math.floor(this.lerp(this.data[u+2],this.data[m+2],r))]}addToCache(t,...e){this.id||(this.id=this.size,this.initData()),this.id=`${this.id}|${t}:${e.slice(0,e.length-1).join(",")}`;const a=e[e.length-1];h[this.id]?this.data=h[this.id]:(a(),h[this.id]=new Uint8ClampedArray(this.data))}}}}]);